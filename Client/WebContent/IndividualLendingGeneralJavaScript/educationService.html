<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<title>EduServ-Educational Counselling Billing Solution</title>


<link rel="stylesheet" type="text/css" href="resources/allinone.css" />
<link rel="stylesheet" type="text/css"
	href="resources/libs/DataTables-1.8.2/extras/TableTools/media/css/TableTools.css" />
<link rel="stylesheet" type="text/css"
	href="resources/libs/DataTables-1.8.2/media/css/demo_page.css" />
<link rel="stylesheet" type="text/css"
	href="resources/libs/DataTables-1.8.2/media/css/demo_table.css" />
<link rel="stylesheet" type="text/css"
	href="resources/libs/jquery-ui-1.8.16.custom/css/smoothness/jquery-ui-1.8.16.custom.css" />
<link rel="stylesheet" type="text/css"
	href="resources/libs/jquery-ui-timepicker-addon.css" />

<link rel="stylesheet" type="text/css"
	href="resources/stretchyreporting/stretchyreporting.css">
<link rel="stylesheet" type="text/css"
	href="resources/IndividualLendingCode-1.3.css" />


<!-- JQuery/JQuery UI is used. JQuery data tables are used to display rows of data - especially in reporting (stretchyreporting) -->
<script type="text/javascript" src="resources/libs/jquery-1.7.min.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-1.8.16.custom/js/jquery-ui-1.8.16.custom.min.js"></script>
<script type="text/javascript"
	src="resources/libs/DataTables-1.8.2/media/js/jquery.dataTables.min.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery.dataTables.TitleNumeric.js"></script>
<script type="text/javascript"
	src="resources/libs/DataTables-1.8.2/extras/TableTools/media/js/ZeroClipboard.js"></script>
<script type="text/javascript"
	src="resources/libs/DataTables-1.8.2/extras/TableTools/media/js/TableTools.min.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-1.8.16.custom/js/i18n/jquery.ui.datepicker-en.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-1.8.16.custom/js/i18n/jquery.ui.datepicker-es.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-1.8.16.custom/js/i18n/jquery.ui.datepicker-fr.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-1.8.16.custom/js/i18n/jquery.ui.datepicker-pt.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery-ui-1.8.16.custom/js/i18n/jquery.ui.datepicker-zh.js"></script>

<!--JQuery custom combobox plugin used for sections of the accounting module-->
<script type="text/javascript" src="resources/libs/jquery.combobox.js"></script>

<!-- JQuery Date Time Picker -->
<script type="text/javascript"
	src="resources/libs/jquery-ui-timepicker-addon.js"></script>


<!-- JQuery I18N plug-in -->
<script type="text/javascript"
	src="resources/libs/jquery.i18n.properties-min-1.0.9.js"></script>

<!-- JQuery Template plug-in and code (for rendering UI functionality) -->
<script type="text/javascript" src="resources/libs/jsrender.js"></script>
<script type="text/javascript" src="resources/libs/jquery.views.js"></script>
<script type="text/javascript"
	src="resources/libs/jquery.observable.min.js"></script>

<!-- JQuery globalize plug-in -->
<script type="text/javascript"
	src="resources/libs/globalize/globalize.js"></script>
<script type="text/javascript"
	src="resources/libs/globalize/cultures/globalize.culture.en.js"></script>
<script type="text/javascript"
	src="resources/libs/globalize/cultures/globalize.culture.es.js"></script>
<script type="text/javascript"
	src="resources/libs/globalize/cultures/globalize.culture.fr.js"></script>
<script type="text/javascript"
	src="resources/libs/globalize/cultures/globalize.culture.pt.js"></script>
<script type="text/javascript"
	src="resources/libs/globalize/cultures/globalize.culture.zh.js"></script>

<!-- JQuery Ajax file download plug-in-->
<script type="text/javascript"
	src="resources/libs/jquery.fileDownload.js"></script>

<!-- JQuery webcam integration plug-in-->
<script type="text/javascript" src="resources/libs/jquery.webcam.js"></script>

<!-- JQuery plug-in to show Mifos X Platform additional data tables -->
<script type="text/javascript" src="resources/stretchydatatables-1.3.js"></script>

<!-- JQuery plug-in to show Mifos X Platform reporting -->
<script type="text/javascript"
	src="resources/stretchyreporting/stretchyreporting-1.3.js"></script>

<!-- JQuery plug-in to check if links and buttons should be shown in Mifos X UI -->
<script type="text/javascript" src="resources/MifosXUI-1.3.js"></script>

<!-- JQuery plug-in to manage permissions and role permissions in the UI as the UI code is quite elaborate -->
<script type="text/javascript" src="resources/MifosXPermissions-1.3.js"></script>


<!-- Google charts api (used in stretchyreporting) -->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
	google.load("visualization", "1", {
		packages : [ "corechart" ]
	});
</script>

<!-- This is a single Page javascript app - IndividualLendingCode.js has functions which switch functionality by replacing the html in the #container div -->
<script type="text/javascript"
	src="resources/IndividualLendingCode-1.3.js"></script>

<script type="text/javascript"
	src="resources/SetTenantLoadTenantConfig-1.3.js"></script>
</head>

<body>

	<div id="container"></div>
	<script>
		$(document).ready(function() {

			//IndividualLendingCode.js is the file to look at
			initialiseAndShowLogon();

		});
	</script>



	<!-- Everything below here is just templates for jsrender to process in order to display the various pages -->
	<!-- Normally this would be put in a server side include... but you need to run the html through a web server for those to work -->
	<!-- If anyone knows how to include this text without the need for a web server that would help a lot. -->
	<!-- I guess I could just read the file and write it into the DOM but probably not worth it -->

	<script id="makerCheckerListTemplate" type="text/x-jquery-tmpl">
<table id='makercheckertable' width='100%'>
<thead>
	<tr>
		<th>Id</th>
		<th>Task</th>
		<th>Created on</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=actionName}} {{=entityName}}</td>
	<td>{{=$ctx.globalDate(madeOnDate)}}</td>
	<td>
		{{#if resourceId}}
		<a id='editmakerchecker{{=id}}' href='#' style='margin-right: 5px;' onclick="viewMakerCheckerEntry('{{=actionName}}', '{{=entityName}}', {{=entityId}} ,{{=id}}, '{{=entityHref}}'); return false;">{{=$ctx.doI18N("link.action.view")}}</a>
		<a id='deletemakerchecker{{=id}}' class='deletemakerchecker' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
		<a id='approvemakerchecker{{=id}}' class='approvemakerchecker' href='#' style='margin-right: 5px;' onclick="approveMakerCheckerEntry('{{=actionName}}', '{{=entityName}}', {{=resourceId}} ,{{=id}}); return false;">{{=$ctx.doI18N("link.action.approve")}}</a>
		{{else}}
		<a id='editmakerchecker{{=id}}' href='#' style='margin-right: 5px;' onclick="viewMakerCheckerEntry('{{=actionName}}', '{{=entityName}}', null ,{{=id}}, '{{=entityHref}}'); return false;">{{=$ctx.doI18N("link.action.view")}}</a>
		<a id='deletemakerchecker{{=id}}' class='deletemakerchecker' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
		<a id='approvemakerchecker{{=id}}' class='approvemakerchecker' href='#' style='margin-right: 5px;' onclick="approveMakerCheckerEntry('{{=actionName}}', '{{=entityName}}', null ,{{=id}}); return false;">{{=$ctx.doI18N("link.action.approve")}}</a>
		{{/if}}
		
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<!-- portfolio templates -->
	<script id="newLoanScheduleTemplate" type="text/x-jquery-tmpl">
		<table id="repaymentschedule" class="pretty displayschedule">
			<caption>{{=$ctx.doI18N("table.caption.repaymentSchedule")}}</caption>
			<colgroup span="3"></colgroup>
			<colgroup span="3">
				<col class="lefthighlightcol">
				<col>
				<col class="righthighlightcol">
			</colgroup>
			<colgroup span="3">
				<col class="lefthighlightcol">
				<col>
				<col class="righthighlightcol">
			</colgroup>
			<colgroup span="3"></colgroup>

			<thead>
				<tr>
					<th colspan="3" scope="colgroup" class="empty">&nbsp;</th>
					<th colspan="3" scope="colgroup" class="highlightcol">Loan Amount and Balance</th>
					<th colspan="3" scope="colgroup" class="highlightcol">Total Cost of Loan</th>
					<th colspan="3" scope="colgroup" class="empty">&nbsp;</th>
				</tr>
				<tr>
					<th scope="col">#</th>
					<th scope="col">{{=$ctx.doI18N("table.heading.date")}}</th>
					<th scope="col"># Days</th>
					
					<th scope="col" class="lefthighlightcolheader">Disbursement</th>
					<th scope="col">Principal Repayment</th>
					<th scope="col" class="righthighlightcolheader">Balance of Loan</th>

					<th scope="col" class="lefthighlightcolheader">Interest Repayment</th>
					<th scope="col">Fees</th>
					<th scope="col" class="righthighlightcolheader">Penalties</th>

					<th scope="col">Total Repayment Due</th>
					<th scope="col">Total Paid</th>
					<th scope="col">Total Outstanding</th>
				</tr>
			</thead>
			<tbody>
			{{#each periods}}
			<tr>
				<td scope="row">{{=$ctx.number(period)}}</td>
				<td>{{=$ctx.globalDate(dueDate)}}</td>
				<td>{{=$ctx.number(daysInPeriod)}}</td>

				<td class="lefthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, principalDisbursed)}}</td>
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, principalDue)}}</td>
				<td class="righthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, principalLoanBalanceOutstanding)}}</td>

				<td class="lefthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, interestOriginalDue)}}</td>
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, feeChargesDue)}}</td>
				<td class="righthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, penaltyChargesDue)}}</td>

				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, totalOriginalDueForPeriod)}}</td>
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, totalPaidForPeriod)}}</td>
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, totalOutstandingForPeriod)}}</td>
			</tr>
			{{/each}}
			</tbody>
			<tfoot class="ui-widget-header">
				<tr>
					<th colspan="2">{{=$ctx.doI18N("table.heading.total")}}</th>
					<th>{{=$ctx.number(loanTermInDays)}}</th>

					<th class="lefthighlightcolheader">{{=$ctx.monetaryValue(currency, cumulativePrincipalDisbursed)}}</th>
					<th>{{=$ctx.monetaryValue(currency, cumulativePrincipalDue)}}</th>
					<th class="righthighlightcolheader">&nbsp;</th>

					<th class="lefthighlightcolheader">{{=$ctx.monetaryValue(currency, cumulativeInterestExpected)}}</th>
					<th>{{=$ctx.monetaryValue(currency, cumulativeFeeChargesToDate)}}</th>
					<th class="righthighlightcolheader">{{=$ctx.monetaryValue(currency, cumulativePenaltyChargesToDate)}}</th>

					<th>{{=$ctx.monetaryValue(currency, totalExpectedRepayment)}}</th>
					<th>{{=$ctx.monetaryValue(currency, totalPaidToDate)}}</th>
					<th>{{=$ctx.monetaryValue(currency, totalOutstanding)}}</th>
				</tr>
			</tfoot>
		</table>
</script>

	<script id="newLoanFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	<input type="hidden" id="groupId" name="groupId" value="{{=groupId}}" />
	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.loan.information")}}</legend>
		<div>
			<table id="productdetails">
				<tr>
					<td valign="top">
						{{#if clientName }}
						<label for="clientname">{{=$ctx.doI18N("label.applicant")}}</label>
						<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" style="width: 300px;" />
						{{/if}}
						{{#if groupName}}
						<label for="groupname">{{=$ctx.doI18N("label.applicant")}}</label>
						<input id="groupname" name="groupName" title="" type="text" value="{{=groupName}}" disabled="disabled" style="width: 300px;" />
						{{/if}}

						<label for="productId">{{=$ctx.doI18N("label.product")}}</label>
						<select name="productId" id="productId" style="width: 306px;">
							<option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
						{{#each productOptions}}
							{{#if $ctx.number($parent.parent.data.loanProductId)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
							{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=name}}</option>
							{{/if}}
        				{{/each}}
  						</select>
						<label for="description">{{=$ctx.doI18N("label.description")}}</label>
						<textarea id="description" rows="2" cols="50" draggable="false" disabled="disabled">{{=loanProductDescription}}</textarea>
					</td>
					<td style="text-align:right;vertical-align:bottom;width:50px;">&nbsp;</td>
					<td valign="top">
						<label for"loanOfficerId">{{=$ctx.doI18N("label.loanOfficer")}}</label>
						<select name="loanOfficerId" id="loanOfficerId">
							<option value="">{{=$ctx.doI18N("option.loanOfficer.first.choice")}}</option>
						{{#each loanOfficerOptions}}
							{{#if $ctx.number($parent.parent.data.loanOfficerId)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=displayName}}</option>
							{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
							{{/if}}
        				{{/each}}
  						</select>
						
						<label for="submittedOnDate">{{=$ctx.doI18N("label.submitted.on")}}</label>
						<input id="submittedOnDate" name="submittedOnDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(submittedOnDate)}}" />

						<label for="submittedOnNote">{{=$ctx.doI18N("label.loan.note")}}</label>
						<textarea id="submittedOnNote" name="submittedOnNote" rows="2" cols="50" draggable="false">{{=submittedOnNote}}</textarea>
					</td>
				</tr>
			</table>
		</div>
	</fieldset>
	<fieldset>
		<legend>{{=$ctx.doI18N("legend.loanTerms")}}</legend>
		<table>
			<tr>
				<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("label.principal")}}</td>
							<td>
								<input id="principal" name="principal" title="" type="text" value="{{=$ctx.monetaryValue(currency, principal)}}" style="width: 125px;" />
								<input id="principalCurrencyCode" name="principalCurrencyCode" title="" type="text" value="{{=currency.displaySymbol}}" style="width: 40px;" disabled="disabled" />
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.loanTerm")}}</td>
							<td>
								<input id="loanTermFrequency" name="loanTermFrequency" title="" type="text" value="{{=$ctx.number(termFrequency)}}" style="width: 50px;" />
								
								<select name="loanTermFrequencyType" id="loanTermFrequencyType"  title="" style="width: 121px;">
								{{#each termFrequencyTypeOptions}}
								{{#if $ctx.number($parent.parent.data.termPeriodFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.numberof.repayments")}}</td>
							<td>
								<input id="numberOfRepayments" name="numberOfRepayments" title="" type="text" value="{{=$ctx.number(numberOfRepayments)}}" style="width: 50px;" />
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.repaidevery")}}</td>
							<td>
								<input id="repaymentEvery" name="repaymentEvery" title="" type="text" value="{{=$ctx.number(repaymentEvery)}}" style="width: 50px;" />
								
								<select name="repaymentFrequencyType" id="repaymentFrequencyType"  title="" style="width: 121px;">
								{{#each repaymentFrequencyTypeOptions}}
								{{#if $ctx.number($parent.parent.data.repaymentFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.repaymentStrategy")}}</td>
							<td>
								<select id="transactionProcessingStrategyId" name="transactionProcessingStrategyId" title="">
									<option value="">{{=$ctx.doI18N("option.repaymentStrategy.first.choice")}}</option>
								{{#each repaymentStrategyOptions}}
									{{#if $ctx.number($parent.parent.data.transactionProcessingStrategyId)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
									{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=name}}</option>
									{{/if}}
            					{{/each}}
								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.expectedDisbursementOn")}}</td>
							<td>
							<input id="expectedDisbursementDate" name="expectedDisbursementDate" title="" type="text" class="datepickerfieldnoconstraint" value="{{=$ctx.globalDate(expectedDisbursementDate)}}" style="width:172px;"/>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.firstRepaymentOn")}}</td>
							<td>
							<input id="repaymentsStartingFromDate" name="repaymentsStartingFromDate" title="" type="text" class="datepickerfieldnoconstraint" value="{{=$ctx.globalDate(repaymentsStartingFromDate)}}" style="width:172px;"/>
							</td>
						</tr>
						{{#if $ctx.showTask("VIEWFUNDS")}}
						<tr>
							<td>{{=$ctx.doI18N("label.fund")}}</td>
							<td>
								<select id="fundId" name="fundId" title="">
									<option value="">{{=$ctx.doI18N("option.fund.first.choice")}}</option>
								{{#each fundOptions}}
									{{#if $ctx.number($parent.parent.data.fundId)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=name}}</option>
									{{/if}}
            						{{/each}}
								</select>
							</td>
						</tr>
						{{/if}}
					</table>
				</td>
				<!-- interest details cell -->
				<td valign="top" style="padding-left: 5px; padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("label.nominal.interestrate")}}</td>
							<td>
								<input id="interestRatePerPeriod" name="interestRatePerPeriod" title="" type="text" value="{{=$ctx.decimal(interestRatePerPeriod, 4)}}" style="width: 60px;" />
								
								<select name="interestRateFrequencyType" id="interestRateFrequencyType"  title="" style="width: 115px;">
								{{#each interestRateFrequencyTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestRateFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.amortization")}}</td>
							<td>
								<select name="amortizationType" id="amortizationType"  title="" style="width: 178px;">
								{{#each amortizationTypeOptions}}
								{{#if $ctx.number($parent.parent.data.amortizationType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.interest.method")}}</td>
							<td>
								<select name="interestType" id="interestType"  title="" style="width: 180px;">
								{{#each interestTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.interestRate.calculatedInPeriod")}}</td>
							<td>
							<select id="interestCalculationPeriodType" name="interestCalculationPeriodType" title="" style="width: 220px;">
								{{#each interestCalculationPeriodTypeOptions}}
                                 	{{#if $ctx.number($parent.parent.data.interestCalculationPeriodType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
									{{/if}}
                                {{/each}}
							</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.interestChargedFrom")}}</td>
							<td>
							<input id="interestChargedFromDate" name="interestChargedFromDate" title="" type="text" class="datepickerfieldnoconstraint" value="{{=$ctx.globalDate(interestChargedFromDate)}}" style="width:172px;"/>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.arrears.tolerance")}}</td>
							<td>
								<input id="inArrearsTolerance" name="inArrearsTolerance" title="" type="text" value="{{=$ctx.monetaryValue(currency, inArrearsTolerance)}}" style="width: 125px;" />
								<input id="inArrearsCurrencyCode" name="inArrearsCurrencyCode" title="" type="text" value="{{=currency.displaySymbol}}" style="width: 40px;" disabled="disabled" />
							</td>
						</tr>
					</table>
				</td>
				<td>
				<!-- Other options -->
					<div>
						<span id="toolbar" class="ui-widget-header ui-corner-all">
							<button type="submit" class="submitloanapp" id="submitloanapp" name="_eventId_submit"  title="Submit loan application.">Submit loan application</button>
							<button type="submit" class="cancelloanapp" id="cancelloanapp" name="_eventId_cancel" title="Cancel loan application.">Cancel</button>
						</span>
					</div>
				<!-- other options -->
				</td>
			</tr>
		</table>
	</fieldset>
	<fieldset>
		<legend>{{=$ctx.doI18N("legend.charges")}}</legend>
		<div>
			<table id="chargesdetails">
				<tr>
					<td valign="top">
						<label for="chargeOptions">{{=$ctx.doI18N("label.charges")}}</label>
						<select id="chargeOptions">
							<option value="-1">{{=$ctx.doI18N("option.charge.first.choice")}}</option>
						{{#each chargeOptions}}
							<option value="{{=$ctx.number(id)}}">{{=name}}</option>
        				{{/each}}
  						</select>
						<a href="#" id="addloancharges">{{=$ctx.doI18N("widget.charges.select.button.add")}}</a> 
					</td>
				</tr>
				<tr>
					<td id="selectedLoanCharges">
						{{#each charges}}
						<div class="row charge">
							<span class="rowvalue chargeName">{{=name}}, {{=currency.displaySymbol}}</span>
							{{#if id}}
							<input id="charges[{{=$itemNumber}}][id]" name="charges[{{=$itemNumber}}][id]" class="id" title="" type="hidden" value="{{=id}}" />
							{{/if}}
							<input id="charges[{{=$itemNumber}}][chargeId]" name="charges[{{=$itemNumber}}][chargeId]" class="chargeId" title="" type="hidden" value="{{=chargeId}}" />
							<span class="rowvalue">
								<input id="charges[{{=$itemNumber}}][amount]" name="charges[{{=$itemNumber}}][amount]" class="chargeAmount" title="" type="text" value="{{=$ctx.decimal(amount, 2)}}" style="width: 125px;"/>
							</span>
							<span class="rowvalue">
								<select id="charges[{{=$itemNumber}}][chargeCalculationType]" name="charges[{{=$itemNumber}}][chargeCalculationType]" title="" style="width: 180px" disabled="disabled">
								{{#each $parent.parent.data.chargeTemplate.chargeCalculationTypeOptions}}
									{{#if $ctx.number($parent.parent.data.chargeCalculationType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
									{{/if}}
								{{/each}}
								</select>
							</span>
							<span class="rowvalue">
								<select id="charges[{{=$itemNumber}}][chargeTimeType]" name="charges[{{=$itemNumber}}][chargeTimeType]" title="" style="width: 180px" disabled="disabled">
								{{#each $parent.parent.data.chargeTemplate.chargeTimeTypeOptions}}
									{{#if $ctx.number($parent.parent.data.chargeTimeType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
									{{/if}}
								{{/each}}
								</select>
							</span>
							<span class="rowvalue">
								<input id="charges[{{=$itemNumber}}][specifiedDueDate]" name="charges[{{=$itemNumber}}][specifiedDueDate]" class="specifiedDueDate datepickerfieldnoconstraint" title="" value="{{=specifiedDueDate}}" />
							</span>
							<span class="rowvalue">
								<a href="#" class="removeloancharges">{{=$ctx.doI18N("widget.charges.select.button.remove")}}</a> 
							</span>
						</div>
						{{/each}}
					</td>	
				</tr>
			</table>
		</div>
	</fieldset>
</form>
</script>

	<!-- Template rendered when attaching new charge to loan application, in this case id property is charge id (*NOT* loan charge) and index is computed in js logic-->
	<script id="addNewLoanChargeFormTemplate" type="text/x-jquery-tmpl">
<div class="row charge">
	<span class="rowvalue chargeName">{{=name}}, {{=currency.displaySymbol}}</span>
	<input id="charges[{{=index}}][chargeId]" name="charges[{{=index}}][chargeId]" class="chargeId" title="" type="hidden" value="{{=id}}" />
	<span class="rowvalue">
		<input id="charges[{{=index}}][amount]" name="charges[{{=index}}][amount]" class="chargeAmount" title="" type="text" value="{{=$ctx.decimal(amount, 2)}}" style="width: 125px;"/>
	</span>
	<span class="rowvalue">
		<select id="charges[{{=index}}][chargeCalculationType]" name="charges[{{=index}}][chargeCalculationType]" title="" style="width: 180px" disabled="disabled">
		{{#each chargeCalculationTypeOptions}}
			{{#if $ctx.number($parent.parent.data.chargeCalculationType.id)===$ctx.number(id)}}
				<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
			{{#else}}
				<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
			{{/if}}
		{{/each}}
		</select>
	</span>
	<span class="rowvalue">
		<select id="charges[{{=index}}][chargeTimeType]" name="charges[{{=index}}][chargeTimeType]" title="" style="width: 180px" disabled="disabled">
		{{#each chargeTimeTypeOptions}}
			{{#if $ctx.number($parent.parent.data.chargeTimeType.id)===$ctx.number(id)}}
				<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
			{{#else}}
				<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
			{{/if}}
		{{/each}}
		</select>
	</span>
	<span class="rowvalue">
		<input id="charges[{{=index}}][specifiedDueDate]" name="charges[{{=index}}][specifiedDueDate]" class="specifiedDueDate datepickerfieldnoconstraint" title="" value="" />
	</span>
	<span class="rowvalue">
		<a href="#" class="removeloancharges">{{=$ctx.doI18N("widget.charges.select.button.remove")}}</a> 
	</span>
</div>
</script>

	<!-- Template rendered when attaching new charge to loan through popup (along with loanChargeDetailsPartialFormTemplate) -->
	<script id="loanChargeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<div>
			<legend>{{=$ctx.doI18N("form.legend.charge.details")}}</legend>
			<label for="chargeOptions">{{=$ctx.doI18N("label.charges")}}</label>
			<select id="chargeOptions" name="chargeId">
				<option value="-1">{{=$ctx.doI18N("option.charge.first.choice")}}</option>
				{{#each chargeOptions}}
					{{#if $ctx.number($parent.parent.data.id)===$ctx.number(id)}}
						<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}, {{=currency.displaySymbol}}</option>
					{{#else}}
						<option value="{{=$ctx.number(id)}}">{{=name}}, {{=currency.displaySymbol}}</option>
					{{/if}}
				{{/each}}
			</select>
			<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		</div>
		<div id="loanChargeDetails">
			{{each $parent.data tmpl="#loanChargeDetailsPartialFormTemplate"}}
		</div>
	</fieldset>
</form>
</script>

	<script id="loanChargeDetailsPartialFormTemplate"
		type="text/x-jquery-tmpl">
<label for="amount">{{=$ctx.doI18N("label.amount")}}</label>
<input id="amount" name="amount" title="" type="text" value="{{=$ctx.decimal(amount, 2)}}" style="width: 125px;"/>
<label for="chargeCalculationType">{{=$ctx.doI18N("form.label.charge.calculation.type")}}</label>
<select id="chargeCalculationType" name="chargeCalculationType" title="" style="width: 180px" disabled="disabled">
	{{#each chargeCalculationTypeOptions}}
		{{#if $ctx.number($parent.parent.data.chargeCalculationType.id)===$ctx.number(id)}}
			<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
		{{#else}}
			<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
		{{/if}}
	{{/each}}
</select>
<label for="chargeTimeType">{{=$ctx.doI18N("form.label.charge.time")}}</label>
<select id="chargeTimeType" name="chargeTimeType" title="" style="width: 180px" disabled="disabled">
	{{#each chargeTimeTypeOptions}}
		{{#if $ctx.number($parent.parent.data.chargeTimeType.id)===$ctx.number(id)}}
			<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
		{{#else}}
			<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
		{{/if}}
	{{/each}}
</select>
{{#if $ctx.number(chargeTimeType.id)===$ctx.number(2)}}
<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
<label for="specifiedDueDate">Due for collection on:</label>
<input id="specifiedDueDate" name="specifiedDueDate" class="datepickerfieldnoconstraint" title="" value="{{=specifiedDueDate}}" />
{{/if}}
</script>

	<script id="modifyLoanChargeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<div>
			<legend>{{=$ctx.doI18N("form.legend.charge.details")}}</legend>
			<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
			<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

			<label for="amount">{{=$ctx.doI18N("label.amount")}}</label>
			<input id="amount" name="amount" title="" type="text" value="{{=$ctx.monetaryValue(currency, amount)}}" style="width: 125px;"/>

		{{#if $ctx.number(chargeTimeType.id)===$ctx.number(2)}}
			<label for="specifiedDueDate">Due for collection on:</label>
			<input id="specifiedDueDate" name="specifiedDueDate" class="datepickerfieldnoconstraint" title="" value="{{=$ctx.globalDate(dueAsOfDate)}}" />
		{{/if}}
		</div>
	</fieldset>
</form>
</script>

	<script id="newLoanFormTemplateMin" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	<input type="hidden" id="groupId" name="groupId" value="{{=groupId}}" />

	{{#if clientId}}
	<label for="clientname">{{=$ctx.doI18N("label.applicant")}}</label>
	<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" style="width: 300px;"/>
	{{/if}}
	{{#if groupId}}
	<label for="groupname">{{=$ctx.doI18N("label.applicant")}}</label>
	<input id="groupname" name="groupName" title="" type="text" value="{{=groupName}}" disabled="disabled" style="width: 300px;"/>
	{{/if}}

	<label for="productId">{{=$ctx.doI18N("label.product")}}</label>
	<select name="productId" id="productId" style="width: 306px;">
		<option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
	{{#each productOptions}}
		{{#if $ctx.number($parent.parent.data.loanProductId)===$ctx.number(id)}}
		<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
		{{#else}}
		<option value="{{=$ctx.number(id)}}">{{=name}}</option>
		{{/if}}
	{{/each}}
	</select>
</form>	
</script>

	<script id="modifyLoanApplicationFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.loan.information")}}</legend>
		<div>
			<table id="productdetails">
				<tr>
					<td valign="top">
						<label for="clientname">{{=$ctx.doI18N("label.applicant")}}</label>
						<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" style="width: 300px;"/>

						<label for="productId">{{=$ctx.doI18N("label.product")}}</label>
						<select name="productId" id="productId" style="width: 306px;">
							<option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
						{{#each productOptions}}
							{{#if $ctx.number($parent.parent.data.loanProductId)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
							{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=name}}</option>
							{{/if}}
        				{{/each}}
  						</select>
					</td>
					<td style="text-align:right;vertical-align:bottom;width:50px;">&nbsp;</td>
					<td valign="top">
						<label for="submittedOnDate">{{=$ctx.doI18N("label.submitted.on")}}</label>
						<input id="submittedOnDate" name="submittedOnDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(submittedOnDate)}}" />

						<label for="submittedOnNote">{{=$ctx.doI18N("label.loan.note")}}</label>
						<textarea id="submittedOnNote" name="submittedOnNote" rows="2" cols="50" draggable="false">{{=submittedOnNote}}</textarea>
					</td>
				</tr>
			</table>
		</div>
	</fieldset>
	<fieldset>
		<legend>{{=$ctx.doI18N("legend.loanTerms")}}</legend>
		<table>
			<tr>
				<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("label.principal")}}</td>
							<td>
								<input id="principal" name="principal" title="" type="text" value="{{=$ctx.monetaryValue(currency, principal)}}" style="width: 125px;" />
								<input id="principalCurrencyCode" name="principalCurrencyCode" title="" type="text" value="{{=currency.displaySymbol}}" style="width: 40px;" disabled="disabled" />
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.loanTerm")}}</td>
							<td>
								<input id="loanTermFrequency" name="loanTermFrequency" title="" type="text" value="{{=$ctx.number(termFrequency)}}" style="width: 50px;" />
								
								<select name="loanTermFrequencyType" id="loanTermFrequencyType"  title="" style="width: 121px;">
								{{#each termFrequencyTypeOptions}}
								{{#if $ctx.number($parent.parent.data.termPeriodFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.numberof.repayments")}}</td>
							<td>
								<input id="numberOfRepayments" name="numberOfRepayments" title="" type="text" value="{{=$ctx.number(numberOfRepayments)}}" style="width: 50px;" />
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.repaidevery")}}</td>
							<td>
								<input id="repaymentEvery" name="repaymentEvery" title="" type="text" value="{{=$ctx.number(repaymentEvery)}}" style="width: 50px;" />
								
								<select name="repaymentFrequencyType" id="repaymentFrequencyType"  title="" style="width: 121px;">
								{{#each repaymentFrequencyTypeOptions}}
								{{#if $ctx.number($parent.parent.data.repaymentFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.repaymentStrategy")}}</td>
							<td>
								<select id="transactionProcessingStrategyId" name="transactionProcessingStrategyId" title="">
									<option value="">{{=$ctx.doI18N("option.repaymentStrategy.first.choice")}}</option>
								{{#each repaymentStrategyOptions}}
									{{#if $ctx.number($parent.parent.data.transactionProcessingStrategyId)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
									{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=name}}</option>
									{{/if}}
            					{{/each}}
								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.expectedDisbursementOn")}}</td>
							<td>
							<input id="expectedDisbursementDate" name="expectedDisbursementDate" title="" type="text" class="datepickerfieldnoconstraint" value="{{=$ctx.globalDate(expectedDisbursementDate)}}" style="width:172px;"/>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.firstRepaymentOn")}}</td>
							<td>
							<input id="repaymentsStartingFromDate" name="repaymentsStartingFromDate" title="" type="text" class="datepickerfieldnoconstraint" value="{{=$ctx.globalDate(repaymentsStartingFromDate)}}" style="width:172px;"/>
							</td>
						</tr>
						{{#if $ctx.showTask("VIEWFUNDS")}}
						<tr>
							<td>{{=$ctx.doI18N("label.fund")}}</td>
							<td>
								<select id="fundId" name="fundId" title="">
									<option value="">{{=$ctx.doI18N("option.fund.first.choice")}}</option>
								{{#each fundOptions}}
									{{#if $ctx.number($parent.parent.data.fundId)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=name}}</option>
									{{/if}}
            						{{/each}}
								</select>
							</td>
						</tr>
						{{/if}}
					</table>
				</td>
				<!-- interest details cell -->
				<td valign="top" style="padding-left: 5px; padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("label.nominal.interestrate")}}</td>
							<td>
								<input id="interestRatePerPeriod" name="interestRatePerPeriod" title="" type="text" value="{{=$ctx.decimal(interestRatePerPeriod, 4)}}" style="width: 60px;" />
								
								<select name="interestRateFrequencyType" id="interestRateFrequencyType"  title="" style="width: 115px;">
								{{#each interestRateFrequencyTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestRateFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.amortization")}}</td>
							<td>
								<select name="amortizationType" id="amortizationType"  title="" style="width: 178px;">
								{{#each amortizationTypeOptions}}
								{{#if $ctx.number($parent.parent.data.amortizationType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.interest.method")}}</td>
							<td>
								<select name="interestType" id="interestType"  title="" style="width: 180px;">
								{{#each interestTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.interestRate.calculatedInPeriod")}}</td>
							<td>
							<select id="interestCalculationPeriodType" name="interestCalculationPeriodType" title="" style="width: 220px;">
								{{#each interestCalculationPeriodTypeOptions}}
                                 	{{#if $ctx.number($parent.parent.data.interestCalculationPeriodType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
									{{/if}}
                                {{/each}}
							</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.interestChargedFrom")}}</td>
							<td>
							<input id="interestChargedFromDate" name="interestChargedFromDate" title="" type="text" class="datepickerfieldnoconstraint" value="{{=$ctx.globalDate(interestChargedFromDate)}}" style="width:172px;"/>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.arrears.tolerance")}}</td>
							<td>
								<input id="inArrearsTolerance" name="inArrearsTolerance" title="" type="text" value="{{=$ctx.monetaryValue(currency, inArrearsTolerance)}}" style="width: 125px;" />
								<input id="inArrearsCurrencyCode" name="inArrearsCurrencyCode" title="" type="text" value="{{=currency.displaySymbol}}" style="width: 40px;" disabled="disabled" />
							</td>
						</tr>
					</table>
				</td>
				<td>
				<!-- Other options -->
					<div>
						<span id="toolbar" class="ui-widget-header ui-corner-all">
							<button type="submit" class="modifyloanapp" id="modifyloanapp" name="_eventId_submit"  title="Modify loan application.">Modify loan application</button>
							<button type="submit" class="cancelloanapp" id="cancelloanapp" name="_eventId_cancel" title="Cancel loan application.">Cancel</button>
						</span>
					</div>
				<!-- other options -->
				</td>
			</tr>
		</table>
	</fieldset>
	<fieldset>
		<legend>{{=$ctx.doI18N("legend.charges")}}</legend>
		<div>
			<table id="chargesdetails">
				<tr>
					<td valign="top">
						<label for="chargeOptions">{{=$ctx.doI18N("label.charges")}}</label>
						<select id="chargeOptions">
							<option value="-1">{{=$ctx.doI18N("option.charge.first.choice")}}</option>
						{{#each chargeOptions}}
							<option value="{{=$ctx.number(id)}}">{{=name}}</option>
        				{{/each}}
  						</select>
						<a href="#" id="addloancharges">{{=$ctx.doI18N("widget.charges.select.button.add")}}</a> 
					</td>
				</tr>
				<tr>
					<td id="selectedLoanCharges">
					{{#each charges}}
						<div class="row charge">
							<span class="rowvalue chargeName">{{=name}}, {{=currency.displaySymbol}}</span>
							<input id="charges[{{=$itemNumber}}][id]" name="charges[{{=$itemNumber}}][id]" class="id" title="" type="hidden" value="{{=id}}" />
							<input id="charges[{{=$itemNumber}}][chargeId]" name="charges[{{=$itemNumber}}][chargeId]" class ="chargeId" title="" type="hidden" value="{{=chargeId}}" />
							<span class="rowvalue">
								<input id="charges[{{=$itemNumber}}][amount]" name="charges[{{=$itemNumber}}][amount]" class="chargeAmount" title="" type="text" value="{{=$ctx.decimal(amountOrPercentage, 2)}}" style="width: 125px;"/>
							</span>
							<span class="rowvalue">
								<select id="charges[{{=$itemNumber}}][chargeCalculationType]" name="charges[{{=$itemNumber}}][chargeCalculationType]" title="" style="width: 180px" disabled="disabled">
									{{#each $parent.parent.data.chargeTemplate.chargeCalculationTypeOptions}}
										{{#if $ctx.number($parent.parent.data.chargeCalculationType.id)===$ctx.number(id)}}
											<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
										{{#else}}
											<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
										{{/if}}
									{{/each}}
								</select>
							</span>
							<span class="rowvalue">
								<select id="charges[{{=$itemNumber}}][chargeTimeType]" name="charges[{{=$itemNumber}}][chargeTimeType]" title="" style="width: 180px" disabled="disabled">
									{{#each $parent.parent.data.chargeTemplate.chargeTimeTypeOptions}}
										{{#if $ctx.number($parent.parent.data.chargeTimeType.id)===$ctx.number(id)}}
											<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
										{{#else}}
											<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
										{{/if}}
									{{/each}}
								</select>
							</span>
							<span class="rowvalue">
								<input id="charges[{{=$itemNumber}}][specifiedDueDate]" name="charges[{{=$itemNumber}}][specifiedDueDate]" class="specifiedDueDate datepickerfieldnoconstraint" title="" value="{{=$ctx.globalDate(dueAsOfDate)}}" />
							</span>
							<span class="rowvalue">
								<a href="#" class="removeloancharges">{{=$ctx.doI18N("widget.charges.select.button.remove")}}</a> 
							</span>
						</div>
					{{/each}}
					</td>	
				</tr>
			</table>
		</div>
	</fieldset>
</form>
</script>

	<script id="bulkLoanApplicationFormTemplate" type="text/x-jquery-tmpl">
<fieldset>
	<table>
		<tr>
			<td>
			    <div class="multiselectwidget">
			        <label for="notSelectedClients">{{=$ctx.doI18N("form.label.group.available.clients")}}</label>
			        <select id="notSelectedClients" name="notSelectedClients" title="" class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:200px;height:125px;">
			        {{#each clientMembers}}
			            <option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
			        {{/each}}
			        </select>
			        <a href="#" id="addclientmembers" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
			    </div>
		    </td>
		    <td>
			    <div>
			        <span id="toolbar" class="ui-widget-header ui-corner-all">
			            <button type="submit" class="submitloanapp" id="submitloanapp" name="_eventId_submit"  title="Submit loan application.">Submit loan application</button>
			            <button type="submit" class="cancelloanapp" id="cancelloanapp" name="_eventId_cancel" title="Cancel loan application.">Cancel</button>
			        </span>
			    </div>
		    </td>
	    </tr>
    </table>
</fieldset>
<fieldset>
    <ul id="membersLoanApplication">

    </ul>
</fieldset>
</script>

	<script id="bulkLoanApplicationMemberPartial" type="text/x-jquery-tmpl">
<form class="entityform">
<table>
    <tr>
        <div class="formerrors"></div>
    </tr>
    <tr>
        <td>
            {{=clientName}}
            <input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
            <input type="hidden" id="groupId" name="groupId" value="{{=groupId}}" />
        	<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
			<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
        </td>
        <td>{{=$ctx.doI18N("label.product")}}</td>
        <td>
            <select name="productId" id="productId" class="productId">
                <option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
                {{#each productOptions}}
                    {{#if $ctx.number($parent.parent.data.loanProductId)===$ctx.number(id)}}
                    <option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
                    {{#else}}
                    <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                    {{/if}}
                {{/each}}
            </select>
        </td>
        {{#if loanProductId}}
        <td>{{=$ctx.doI18N("label.principal")}}</td>
        <td>
            <input id="principal" name="principal" title="" type="text" value="{{=$ctx.monetaryValue(currency, principal)}}" style="width: 125px;" />
            <input id="principalCurrencyCode" name="principalCurrencyCode" title="" type="text" value="{{=currency.displaySymbol}}" style="width: 40px;" disabled="disabled" />
        </td>
        <td>{{=$ctx.doI18N("label.loanOfficer")}}</td>
        <td>
            <select name="loanOfficerId" id="loanOfficerId">
                <option value="">{{=$ctx.doI18N("option.loanOfficer.first.choice")}}</option>
                {{#each loanOfficerOptions}}
                {{#if $ctx.number($parent.parent.data.loanOfficerId)===$ctx.number(id)}}
                    <option value="{{=$ctx.number(id)}}" selected="selected">{{=displayName}}</option>
                {{#else}}
                    <option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
                {{/if}}
                {{/each}}
            </select>
        </td>
        <td>{{=$ctx.doI18N("label.submitted.on")}}</td>
        <td>
            <input name="submittedOnDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(submittedOnDate)}}" />
        </td>
        <td>
            <a href='#' id="toggleMemberLoanDetails{{=clientId}}" onclick="return false;">{{=$ctx.doI18N("form.label.group.toggle.member.loan.details")}}</a>
            <a href='#' id="removeMemberFromApplication{{=clientId}}" onclick="return false;">{{=$ctx.doI18N("form.label.group.remove.member.from.loan.application")}}</span>
        </td>
        {{/if}}
    </tr>
    <tr class="memberLoanDetails" style="display: none;">
        {{#if loanProductId}}
        <td valign="top" style="padding-right: 5px; border-right: 1px solid;" colspan="5">
            <table>
                <tr>
                    <td>{{=$ctx.doI18N("label.loanTerm")}}</td>
                    <td>
                        <input id="loanTermFrequency" name="loanTermFrequency" title="" type="text" value="{{=$ctx.number(termFrequency)}}" style="width: 50px;" />
                        
                        <select name="loanTermFrequencyType" id="loanTermFrequencyType"  title="" style="width: 121px;">
                        {{#each termFrequencyTypeOptions}}
                        {{#if $ctx.number($parent.parent.data.termPeriodFrequencyType.id)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=value}}</option>
                        {{/if}}
                        {{/each}}
                            </select>
                    </td>
                </tr>
                <tr>
                    <td>{{=$ctx.doI18N("label.numberof.repayments")}}</td>
                    <td>
                        <input id="numberOfRepayments" name="numberOfRepayments" title="" type="text" value="{{=$ctx.number(numberOfRepayments)}}" style="width: 50px;" />
                    </td>
                </tr>
                <tr>
                    <td>{{=$ctx.doI18N("label.repaidevery")}}</td>
                    <td>
                        <input id="repaymentEvery" name="repaymentEvery" title="" type="text" value="{{=$ctx.number(repaymentEvery)}}" style="width: 50px;" />
                        
                        <select name="repaymentFrequencyType" id="repaymentFrequencyType"  title="" style="width: 121px;">
                        {{#each repaymentFrequencyTypeOptions}}
                        {{#if $ctx.number($parent.parent.data.repaymentFrequencyType.id)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=value}}</option>
                        {{/if}}
                        {{/each}}
                            </select>
                    </td>
                </tr>
                <tr>
                    <td>{{=$ctx.doI18N("label.repaymentStrategy")}}</td>
                    <td>
                        <select id="transactionProcessingStrategyId" name="transactionProcessingStrategyId" title="">
                            <option value="">{{=$ctx.doI18N("option.repaymentStrategy.first.choice")}}</option>
                        {{#each repaymentStrategyOptions}}
                            {{#if $ctx.number($parent.parent.data.transactionProcessingStrategyId)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
                            {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                            {{/if}}
                        {{/each}}
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>{{=$ctx.doI18N("label.expectedDisbursementOn")}}</td>
                    <td>
                    <input id="expectedDisbursementDate" name="expectedDisbursementDate" title="" type="text" class="datepickerfieldnoconstraint" value="{{=$ctx.globalDate(expectedDisbursementDate)}}" style="width:172px;"/>
                    </td>
                </tr>
                <tr>
                    <td>{{=$ctx.doI18N("label.firstRepaymentOn")}}</td>
                    <td>
                    <input id="repaymentsStartingFromDate" name="repaymentsStartingFromDate" title="" type="text" class="datepickerfieldnoconstraint" value="{{=$ctx.globalDate(repaymentsStartingFromDate)}}" style="width:172px;"/>
                    </td>
                </tr>
                {{#if $ctx.showTask("VIEWFUNDS")}}
                <tr>
                    <td>{{=$ctx.doI18N("label.fund")}}</td>
                    <td>
                        <select id="fundId" name="fundId" title="">
                            <option value="">{{=$ctx.doI18N("option.fund.first.choice")}}</option>
                        {{#each fundOptions}}
                            {{#if $ctx.number($parent.parent.data.fundId)===$ctx.number(id)}}
                                <option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
                            {{#else}}
                                <option value="{{=$ctx.number(id)}}">{{=name}}</option>
                            {{/if}}
                            {{/each}}
                        </select>
                    </td>
                </tr>
                {{/if}}
            </table>
        </td>
        <!-- interest details cell -->
        <td valign="top" style="padding-left: 5px; padding-right: 5px; border-right: 1px solid;" colspan="5">
            <table>
                <tr>
                    <td>{{=$ctx.doI18N("label.nominal.interestrate")}}</td>
                    <td>
                        <input id="interestRatePerPeriod" name="interestRatePerPeriod" title="" type="text" value="{{=$ctx.decimal(interestRatePerPeriod, 4)}}" style="width: 60px;" />
                        
                        <select name="interestRateFrequencyType" id="interestRateFrequencyType"  title="" style="width: 115px;">
                        {{#each interestRateFrequencyTypeOptions}}
                        {{#if $ctx.number($parent.parent.data.interestRateFrequencyType.id)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=value}}</option>
                        {{/if}}
                        {{/each}}
                            </select>
                    </td>
                </tr>
                <tr>
                    <td>{{=$ctx.doI18N("label.amortization")}}</td>
                    <td>
                        <select name="amortizationType" id="amortizationType"  title="" style="width: 178px;">
                        {{#each amortizationTypeOptions}}
                        {{#if $ctx.number($parent.parent.data.amortizationType.id)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=value}}</option>
                        {{/if}}
                        {{/each}}
                            </select>
                    </td>
                </tr>
                <tr>
                    <td>{{=$ctx.doI18N("label.interest.method")}}</td>
                    <td>
                        <select name="interestType" id="interestType"  title="" style="width: 180px;">
                        {{#each interestTypeOptions}}
                        {{#if $ctx.number($parent.parent.data.interestType.id)===$ctx.number(id)}}
                            <option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
                        {{#else}}
                            <option value="{{=$ctx.number(id)}}">{{=value}}</option>
                        {{/if}}
                        {{/each}}
                            </select>
                    </td>
                </tr>
                <tr>
                    <td>{{=$ctx.doI18N("label.interestRate.calculatedInPeriod")}}</td>
                    <td>
                    <select id="interestCalculationPeriodType" name="interestCalculationPeriodType" title="" style="width: 220px;">
                        {{#each interestCalculationPeriodTypeOptions}}
                            {{#if $ctx.number($parent.parent.data.interestCalculationPeriodType.id)===$ctx.number(id)}}
                                <option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
                            {{#else}}
                                <option value="{{=$ctx.number(id)}}">{{=value}}</option>
                            {{/if}}
                        {{/each}}
                    </select>
                    </td>
                </tr>
                <tr>
                    <td>{{=$ctx.doI18N("label.interestChargedFrom")}}</td>
                    <td>
                    <input id="interestChargedFromDate" name="interestChargedFromDate" title="" type="text" class="datepickerfieldnoconstraint" value="{{=$ctx.globalDate(interestChargedFromDate)}}" style="width:172px;"/>
                    </td>
                </tr>
                <tr>
                    <td>{{=$ctx.doI18N("label.arrears.tolerance")}}</td>
                    <td>
                        <input id="inArrearsTolerance" name="inArrearsTolerance" title="" type="text" value="{{=$ctx.monetaryValue(currency, inArrearsTolerance)}}" style="width: 125px;" />
                        <input id="inArrearsCurrencyCode" name="inArrearsCurrencyCode" title="" type="text" value="{{=currency.displaySymbol}}" style="width: 40px;" disabled="disabled" />
                    </td>
                </tr>
            </table>
        </td>
        {{/if}}
    </tr>
</table>
</form>
</script>

	<script id="newDepositFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.deposit.information")}}</legend>
		<div>
			<table id="productdetails">
				<tr>
					<td valign="top">

						<label for="clientname">{{=$ctx.doI18N("form.label.deposit.applicant")}}</label>
						<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" />

						<label for="productId">{{=$ctx.doI18N("label.product")}}</label>
						<select name="productId" id="productId">
							<option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
							{{#each productOptions}}
							{{#if $ctx.number($parent.parent.data.productId)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
							{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=name}}</option>
							{{/if}}
							{{/each}}
						</select>
					</td>
					<td style="text-align:right;vertical-align:bottom;width:50px;">&nbsp;</td>
					<td valign="top">
						<label for="commencementDate">{{=$ctx.doI18N("label.commencementDate")}}</label>
						<input id="commencementDate" name="commencementDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(projectedCommencementDate)}}" />
						<label for="externalId">{{=$ctx.doI18N("form.label.deposit.externalId")}}</label>
						<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}" />
					</td>
				</tr>
			</table>
		</div>
	</fieldset>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.deposit.product.deposit.terms")}}</legend>
			<table>
			<tr>
				<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.deposit.amount")}}</td>
							<td>
								<input id="deposit" name="deposit" title="" type="text" value="{{=$ctx.decimal(deposit, currency.decimalPlaces)}}" style="width: 125px;" />
								<input id="currencyCode" name="currencyCode" title="" type="text" value="{{=currency.code}}" style="width: 40px;" disabled="disabled" />
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.tenure")}}</td>
							<td>
								<input id="tenureInMonths" name="tenureInMonths" title="" type="text" value="{{=$ctx.number(tenureInMonths)}}" style="width: 50px;" />
							</td>
						</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.canRenew")}}</td>
						<td>
							{{#if renewalAllowed}}
							<input type="checkbox" id="renewalAllowed" name="renewalAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="renewalAllowed" name="renewalAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.canPreClose")}}</td>
						<td>
							{{#if preClosureAllowed}}
							<input type="checkbox" id="preClosureAllowed" name="preClosureAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="preClosureAllowed" name="preClosureAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
					<tr>
						<td>
							{{=$ctx.doI18N("form.label.deposit.product.isCompoundingAllowed")}}<br/><br />
							{{=$ctx.doI18N("form.label.deposit.product.isInterestWithdrawable")}}
						</td>
						<td>
							{{#if interestCompoundingAllowed}}
							<input type="checkbox" id="interestCompoundingAllowed" name="interestCompoundingAllowed" title="" style="width: 125px;" checked=checked onClick="updateCheckbox()"/><br /><br />
							<input type="checkbox" id="isInterestWithdrawable" name="isInterestWithdrawable" title="" style="width: 125px;" />
							{{#else}}
							<input type="checkbox" id="interestCompoundingAllowed" name="interestCompoundingAllowed" title="" style="width: 125px;" onClick="updateCheckbox()"/><br /><br />
							<input type="checkbox" id="isInterestWithdrawable" name="isInterestWithdrawable" title="" style="width: 125px;" checked=checked />
							{{/if}}
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.account.isLockinPeriodAllowed")}}</td>
						<td>
							{{#if isLockinPeriodAllowed}}
							<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
					</table>
				</td>

				<!-- interest details cell -->
				<td valign="top" style="padding-left: 5px; padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.nominal.interestrate")}}</td>
							<td>
								<input id="maturityInterestRate" name="maturityInterestRate" title="" type="text" value="{{=$ctx.decimal(maturityInterestRate, 4)}}" style="width: 60px;" />
							</td>
						</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.preClosureInterestRate")}}</td>
						<td>
							<input id="preClosureInterestRate" name="preClosureInterestRate" title="" style="width: 125px;" value="{{=$ctx.decimal(preClosureInterestRate,4)}}"/>
						</td>
					</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.interest.compounding.every")}}</td>
							<td>
								<input id="interestCompoundedEvery" name="interestCompoundedEvery" title="" type="text" value="{{=$ctx.number(interestCompoundedEvery)}}" style="width: 50px;" />
								
								<select name="interestCompoundedEveryPeriodType" id="interestCompoundedEveryPeriodType"  title="" style="width: 121px;">
								{{#each interestCompoundedEveryPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestCompoundedEveryPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
					</tr>
					<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.lockin.period")}}</td>
							<td>
								<input id="lockinPeriod" name="lockinPeriod" title="" type="text" value="{{=$ctx.number(lockinPeriod)}}" style="width: 50px;" />
								
								<select name="lockinPeriodType" id="lockinPeriodType"  title="" style="width: 121px;">
								{{#each interestCompoundedEveryPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.lockinPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
					</tr>

					</table>
				</td>


				<td>
				<!-- Other options -->
					<div>
						<span id="toolbar" class="ui-widget-header ui-corner-all">
							<button type="submit" class="submitdepositapp" id="submitdepositapp" name="_eventId_submit"  title="Submit deposit application.">Submit Deposit application</button>
							<button type="submit" class="canceldepositapp" id="canceldepositapp" name="_eventId_cancel" title="Cancel deposit application.">Cancel</button>
						</span>
					</div>
				<!-- other options -->
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>



	<script id="newDepositFormTemplateMin" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />

<label for="clientname">{{=$ctx.doI18N("form.label.deposit.applicant")}}</label>
<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" />

<label for="productId">{{=$ctx.doI18N("label.product")}}</label>
<select name="productId" id="productId">
<option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
{{#each productOptions}}
{{#if $ctx.number($parent.parent.data.productId)===$ctx.number(id)}}
<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
{{#else}}
<option value="{{=$ctx.number(id)}}">{{=name}}</option>
{{/if}}
{{/each}}
</select>
</form>
</script>

	<script id="renewDepositFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.deposit.information")}}</legend>
		<div>
			<table id="productdetails">
				<tr>
					<td valign="top">

						<label for="clientname">{{=$ctx.doI18N("form.label.deposit.applicant")}}</label>
						<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" />

						<label for="productId">{{=$ctx.doI18N("label.product")}}</label>
						<select name="productId" id="productId">
							<option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
							{{#each productOptions}}
							{{#if $ctx.number($parent.parent.data.productId)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
							{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=name}}</option>
							{{/if}}
							{{/each}}
						</select>
					</td>
					<td style="text-align:right;vertical-align:bottom;width:50px;">&nbsp;</td>
					<td valign="top">
						<label for="commencementDate">{{=$ctx.doI18N("label.commencementDate")}}</label>
						<input id="commencementDate" name="commencementDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(maturedOn)}}" />
						<label for="externalId">{{=$ctx.doI18N("form.label.deposit.externalId")}}</label>
						<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}" />
					</td>
				</tr>
			</table>
		</div>
	</fieldset>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.deposit.product.deposit.terms")}}</legend>
			<table>
			<tr>
				<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.deposit.amount")}}</td>
							<td>
								<input id="deposit" name="deposit" title="" type="text" value="{{=$ctx.decimal(actualMaturityAmount, currency.decimalPlaces)}}" style="width: 125px;" />
								<input id="currencyCode" name="currencyCode" title="" type="text" value="{{=currency.code}}" style="width: 40px;" disabled="disabled" />
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.tenure")}}</td>
							<td>
								<input id="tenureInMonths" name="tenureInMonths" title="" type="text" value="{{=$ctx.number(tenureInMonths)}}" style="width: 50px;" />
							</td>
						</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.canRenew")}}</td>
						<td>
							{{#if renewalAllowed}}
							<input type="checkbox" id="renewalAllowed" name="renewalAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="renewalAllowed" name="renewalAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.canPreClose")}}</td>
						<td>
							{{#if preClosureAllowed}}
							<input type="checkbox" id="preClosureAllowed" name="preClosureAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="preClosureAllowed" name="preClosureAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
					<tr>
						<td>
							{{=$ctx.doI18N("form.label.deposit.product.isCompoundingAllowed")}}<br/><br />
							{{=$ctx.doI18N("form.label.deposit.product.isInterestWithdrawable")}}
						</td>
						<td>
							{{#if interestCompoundingAllowed}}
							<input type="checkbox" id="interestCompoundingAllowed" name="interestCompoundingAllowed" title="" style="width: 125px;" checked=checked onClick="updateCheckbox()"/><br /><br />
							<input type="checkbox" id="isInterestWithdrawable" name="isInterestWithdrawable" title="" style="width: 125px;" />
							{{#else}}
							<input type="checkbox" id="interestCompoundingAllowed" name="interestCompoundingAllowed" title="" style="width: 125px;" onClick="updateCheckbox()"/><br /><br />
							<input type="checkbox" id="isInterestWithdrawable" name="isInterestWithdrawable" title="" style="width: 125px;" checked=checked />
							{{/if}}
						</td>
					</tr>
					</table>
				</td>

				<!-- interest details cell -->
				<td valign="top" style="padding-left: 5px; padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.nominal.interestrate")}}</td>
							<td>
								<input id="maturityInterestRate" name="maturityInterestRate" title="" type="text" value="{{=$ctx.decimal(maturityInterestRate, 4)}}" style="width: 60px;" />
							</td>
						</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.preClosureInterestRate")}}</td>
						<td>
							<input id="preClosureInterestRate" name="preClosureInterestRate" title="" style="width: 125px;" value="{{=$ctx.decimal(preClosureInterestRate,4)}}"/>
						</td>
					</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.interest.compounding.every")}}</td>
							<td>
								<input id="interestCompoundedEvery" name="interestCompoundedEvery" title="" type="text" value="{{=$ctx.number(interestCompoundedEvery)}}" style="width: 50px;" />
								
								<select name="interestCompoundedEveryPeriodType" id="interestCompoundedEveryPeriodType"  title="" style="width: 121px;">
								{{#each interestCompoundedEveryPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestCompoundedEveryPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>

	<script id="noteListViewTemplate" type="text/x-jquery-tmpl">
{{#if notes.length > 0}}
	<div class="ui-widget .ui-widget-content ui-corner-all notecontainer">
		<div class="ui-widget-header">
			<span class="ui-icon ui-icon-info" style="float: left; margin-right: 5px;" ></span>
			<span>{{=title}}</span>
		</div>
		<div class="ui-widget ui-widget-content ui-corner-all">
		
		{{#each notes}}
			<div>
				<div class="notespacer">
					<span class="ui-icon ui-icon-note" style="float: left; margin-right: 5px;"></span>
					{{#if noteType.id === 100}}
					<span>{{=$ctx.doI18N("widget.notes.label.client.note")}}</span>
					{{/if}}
					{{#if noteType.id === 200}}
					<span>{{=$ctx.doI18N("widget.notes.label.loan.note")}}</span>
					{{/if}}
					{{#if noteType.id === 300}}
					<span>{{=$ctx.doI18N("widget.notes.label.loan.transaction.note")}}</span>
					{{/if}}
					{{#if noteType.id === 400}}
					<span>{{=$ctx.doI18N("widget.notes.label.deposit.transaction.note")}}</span>
					{{/if}}
					<span><a href="#" class="editclientnote" id="editclientnotelink{{=id}}">{{=$ctx.doI18N("link.action.edit")}}</a></span>
				</div>
				<div class="notecontent">{{=note}}</div>
				<div class="notespacer">
					<span class="ui-icon ui-icon-person" style="float: left; margin-right: 5px;" ></span>
					<span class="noteusername">{{=updatedByUsername}}</span>
					<span>&nbsp;{{=$ctx.globalDateTime(updatedOn)}}</span>
				</div>
			</div>
		{{/each}}
		</div>
	</div>
{{/if}}
</script>

	<script id="noteFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="10" cols="75" id="note" name="note" cssClass="text ui-widget-content ui-corner-all">{{=note}}</textarea>
</form>
</script>

	<script id="clientSearchTabTemplate" type="text/x-jquery-tmpl">
<div>	
	<form method="post" id="viewClient" name="viewClient" action="switchToClient">
		<div style="width:100%">
			<h1 align="center">{{=$ctx.doI18N("tab.search.title")}}</h1>
		</div>
		<div id="officesInScopeDiv">
		</div>
		<div style="height: 80px">
			<div style="float: left">
					<label for="client">{{=$ctx.doI18N("label.client.search.by.name")}}</label>
					<input type="text" maxlength="30" id="clientSearchInput"/>
					<button id="searchClientBtn" style="clear: both;" style="height:10px">{{=$ctx.doI18N("button.search")}}</button>
			</div>
			
			<div style="float: right">
				<div id="clientsInScopeDiv">
				</div>
			</div>
		</div>
		<div id="clientTableDiv">
		</div>
	</form>	
</div>
</script>


	<!-- All Clients Dropdown-->
	<script id="allClientsDropdownTemplate" type="text/x-jquery-tmpl">
	<label for="client">{{=$ctx.doI18N("label.client.search")}}</label>
	
	<select name="client" id="client" onChange="showILClient(options[selectedIndex].value);">
		<option value="0">{{=$ctx.doI18N("option.client.search.first.choice")}}</option>
		{{#each crudRows}}
			<option value="{{=id}}">{{=displayName}}&nbsp;-&nbsp;({{=officeName}})</option>
	    {{/each}}
	</select>
	
</script>

	<!--Applicable Offices-->
	<script id="officesDropdownTemplate" type="text/x-jquery-tmpl">
	{{#if crudRows.length > 1 }}
		<div style="width:100%">
				<label for="office">{{=$ctx.doI18N("label.data.scope")}}</label>
				<select id="officeId" name="officeId">
					{{#each crudRows}}
						{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
							<option value="{{=hierarchy}}" selected="selected">{{=nameDecorated}}</option>
						{{#else}}
							<option value="{{=hierarchy}}">{{=nameDecorated}}</option>
						{{/if}}
			        {{/each}}
				</select>
		</div>
		<hr/>
	{{/if}}
</script>

	<script id="clientsTableTemplate" type="text/x-jquery-tmpl">
	<table id='clientstable' width='100%'>
		<thead>
			<tr>
				<th>{{=$ctx.doI18N("table.heading.officename")}}</th>
				<th>{{=$ctx.doI18N("table.header.client.accountNo")}}</th>
				<th>{{=$ctx.doI18N("table.header.displayname")}}</th>
			</tr>
		</thead>
		<tbody>
			{{#each crudRows}}
			<tr>
				<td>{{=officeName}}</td>
				<td><a id='navigateToClient{{=id}}' href='#' style='margin-right: 5px;' onclick="showILClient({{=id}});">{{=accountNo}}</a></td>
				<td><a id='navigateToClient{{=id}}' href='#' style='margin-right: 5px;' onclick="showILClient({{=id}});">{{=displayName}}</a></td>				
			</tr>
			{{/each}}
		</tbody>
	</table>
</script>

	<script id="groupSearchTabTemplate" type="text/x-jquery-tmpl">
<div>
	<form method="post" id="viewGroup" name="viewGroup" action="switchToGroup">
		<div style="width:100%">
			<h1 align="center">{{=$ctx.doI18N("tab.search.group.title")}}</h1>
		</div>
		<div id="officesInScopeDiv">
		</div>
		<div style="height: 80px">
			<div style="float: left">
					<label for="group">{{=$ctx.doI18N("label.group.search.by.name")}}</label>
					<input type="text" maxlength="30" id="groupSearchInput"/>
					<button id="searchGroupBtn" style="clear: both;" style="height:10px">Search</button>
			</div>
			
			<div style="float: right">
				<div id="groupsInScopeDiv">
				</div>
			</div>
		</div>
		<div id="groupTableDiv">
		</div>
	</form>
</div>	
</script>

	<!-- All Groups Dropdown-->
	<script id="allGroupsDropdownTemplate" type="text/x-jquery-tmpl">
	<label for="group">{{=$ctx.doI18N("label.group.search")}}</label>
	<select name="group" id="group" onChange="showILGroup(options[selectedIndex].value);">
		<option value="0">{{=$ctx.doI18N("option.group.search.first.choice")}}</option>
		{{#each crudRows}}
			<option value="{{=id}}">{{=name}}&nbsp;-&nbsp;({{=officeName}})</option>
        {{/each}}
  	</select>
</script>

	<!--Group search results table-->
	<script id="groupsTableTemplate" type="text/x-jquery-tmpl">
	<table id='groupstable' width='100%'>
		<thead>
			<tr>
				<th>{{=$ctx.doI18N("table.header.officename")}}</th>
				<th>{{=$ctx.doI18N("table.header.name")}}</th>
			</tr>
		</thead>
		<tbody>
			{{#each crudRows}}
			<tr>
				<td>{{=officeName}}</td>
				<td><a id='navigateToGroup{{=id}}' href='#' style='margin-right: 5px;' onclick="showILGroup({{=id}});">{{=name}}</a></td>				
			</tr>
			{{/each}}
		</tbody>
	</table>
</script>

	<script id="clientImageAndActionsTemplate" type="text/x-jquery-tmpl">
<form id="clientImageForm">
		<table style="width:100%">
			<tr>
				<td>
					<img id="customerImage" src="resources/img/client-image-placeholder.png" width="100" height="100"/>
					<br/>
					<span id="modifyImageToolbar" class="ui-widget-header ui-corner-all">
								<button id="captureClientImage"></button>
						   		<button id="editClientImage"></button>
						   		<button id="deleteClientImage"></button>
					</span>
				</td>
				<td valign="top" align="left">

<TABLE BORDER="2">
			<tr>
			<td style="width:70%;">
					

                 		<b>Name:<span id="customerName"></span>
					<br/>
					Office:<span id="customerOfficeName"></span>
						<br/>
					Balance:<span id="customerBalance"></span></b></td>

<td style="width:40%;">
 



				
                 		<b><span id="addrNum"></span><span id="streetName"></span>
					<br/>
					<span id="cityName"></span><span id="stateName"></span>
						<br/>
					<span id="countryName"></span><span id="zip"></span>
                   <span id="addbtn"></span>
                         <span id="btn"></span>


</span></b>


</td>



</tr></table>
              
				</td>
				<td valign="top" style="text-align: right">
					<span id="toolbar" class="ui-widget-header ui-corner-all">

					
					<button id="neworderbtn{{=id}}" class="newordertbtn">Create Order</button>
                    <button id="newpaymentbtn{{=id}}" class="newpaymentbtn">Payments</button>
                   
                       <button id="addadjustments{{=id}}" class="addadjustments">Adjustments</button>
					 <button id="invoicebtn{{=id}}"  class="invoicebtn">Generate Invoice</button>
                     <button id="genpdfbtn{{=id}}"  class="genpdfbtn">Bill Pdf</button>
                    <button id="regticketbtn{{=id}}"  class="regticketbtn">Register Ticket </button>
                   
					
					{{#if $ctx.showTask("EditClient")}}
						<button id="editclientbtn{{=id}}" class="editclientbtn">Edit client</button>

					{{/if}}

				
					
					{{#if $ctx.showTask("AddClientNote")}}
						<button id="addnotebtn{{=id}}" class="addnotebtn">Add note</button>
					{{/if}}


					{{#if $ctx.showTask("DeleteClient")}}
						<button id="deleteclientbtn{{=id}}" class="deleteclientbtn">Delete client</button>
					{{/if}}

					</span>
				</td>
			<tr>
		</table>
</form>
</script>

	<script id="clientImageUploadFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.client.browse.image")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>

	<script id="clientImageWebcamFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table style="width:100%">
		<tr>
			<td><div id="webcam" style="width:320px;height:240px"></div></td>
			<td><button id="captureImage">{{=$ctx.doI18N("button.capture.image")}}</button></td>
			<td><canvas id="imageCanvas" height="240" width="320"></canvas></td>
		</tr>
	</table>
 </form>
</script>

	<script id="editClientFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<label for="office">{{=$ctx.doI18N("label.office")}}</label>
	<select id="officeId" name="officeId" title="">
		<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
		{{#each allowedOffices}}
			{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
				<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
			{{#else}}
				<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
			{{/if}}
        {{/each}}
	</select>

	<table>
		<tr>
			<td>
				<label for="firstname">{{=$ctx.doI18N("label.firstname")}}</label>
				<input id="firstname" name="firstname" title="" type="text" value="{{=firstname}}"/>
			</td>
			<td>
				<label for="middlename">{{=$ctx.doI18N("label.middlename")}}</label>
				<input id="middlename" name="middlename" title="" type="text" value="{{=middlename}}"/>
			</td>
			<td>
				<label for="lastname">{{=$ctx.doI18N("label.lastname")}}</label>
				<input id="lastname" name="lastname" title="" type="text" value="{{=lastname}}"/>
			</td>
		<tr>
		<tr>
			<td colspan="2">
				<label for="fullname">{{=$ctx.doI18N("label.fullname")}}</label>
				<input id="fullname" name="fullname" title="" type="text" value="{{=fullname}}" style="width:100%"/>
			</td>
		</tr>
	</table>
	<label for="accountNo">{{=$ctx.doI18N("label.accountNo")}}</label>
	<input id="accountNo" name="accountNo" title="" type="text" value="{{=accountNo}}"/>

    <label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
	<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}"/>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<label for="joinedDate">{{=$ctx.doI18N("label.joiningdate")}}</label>
	<input id="joinedDate" name="joinedDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(joinedDate)}}"/>
</form>
</script>

	<script id="clientFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<label for="office">{{=$ctx.doI18N("label.office")}}</label>
	{{#if currentChange}}
		{{#if currentChange.officeId}}
	<select id="officeId" name="officeId" title="" style="border: thin solid green;">
		<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
		{{#each allowedOffices}}
			{{#if $ctx.number($parent.parent.data.currentChange.officeId)===$ctx.number(id)}}
				<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
			{{#else}}
				<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
			{{/if}}
        {{/each}}
	</select>
		{{#else}}
		<select id="officeId" name="officeId" title="">
		<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
		{{#each allowedOffices}}
			{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
				<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
			{{#else}}
				<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
			{{/if}}
        {{/each}}
		</select>
		{{/if}} 
	{{#else}}
	<select id="officeId" name="officeId" title="">
		<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
		{{#each allowedOffices}}
			{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
				<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
			{{#else}}
				<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
			{{/if}}
        {{/each}}
	</select>
	{{/if}}

	<table>
		<tr>
			<td>
				<label for="firstname">{{=$ctx.doI18N("label.firstname")}}</label>
				<input id="firstname" name="firstname" title="" type="text" value="{{=firstname}}"/>
			</td>
			<td>
				<label for="middlename">{{=$ctx.doI18N("label.middlename")}}</label>
				<input id="middlename" name="middlename" title="" type="text" value="{{=middlename}}"/>
			</td>
			<td>
				<label for="lastname">{{=$ctx.doI18N("label.lastname")}}</label>
				<input id="lastname" name="lastname" title="" type="text" value="{{=lastname}}"/>
			</td>
		<tr>
		<tr>
			<td colspan="2">
				<label for="fullname">{{=$ctx.doI18N("label.fullname")}}</label>
				<input id="fullname" name="fullname" title="" type="text" value="{{=fullname}}" style="width:100%"/>
			</td>
		</tr>
	</table>
    <label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
	{{#if currentChange}}
		{{#if currentChange.externalId}}
		<input id="externalId" name="externalId" title="Previous value was {{=externalId}}" type="text" value="{{=currentChange.externalId}}" style="border: thin solid green;"/>
		{{#else}}
		<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}"/>
		{{/if}}
	{{#else}}
	<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}"/>
	{{/if}}

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<label for="joinedDate">{{=$ctx.doI18N("label.joiningdate")}}</label>
	{{#if currentChange}}
		{{#if currentChange.joinedDate}}
		<input id="joinedDate" name="joinedDate" title="Previous value was {{=$ctx.globalDate(joinedDate)}}" type="text" class="datepickerfield" value="{{=$ctx.globalDate(currentChange.joinedDate)}}" style="border: thin solid green;"/>
		{{#else}}
		<input id="joinedDate" name="joinedDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(joinedDate)}}"/>
		{{/if}}
	{{#else}}
	<input id="joinedDate" name="joinedDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(joinedDate)}}"/>
	{{/if}}
</form>
</script>

	<script id="groupFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<label for="office">{{=$ctx.doI18N("label.office")}}</label>
	<select id="officeId" name="officeId" title="">
		<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
		{{#each allowedOffices}}
			{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
				<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
			{{#else}}
				<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
			{{/if}}
        {{/each}}
	</select>

	<table>
		<tr>
			<td colspan="2">
				<label for="name">{{=$ctx.doI18N("form.label.group.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
		<tr>
		<tr>
			<td colspan="2">
				<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
				<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<div class="multiselectwidget">
					<label for="notSelectedClients">{{=$ctx.doI18N("form.label.group.available.clients")}}</label>
					<select id="notSelectedClients" name="notSelectedClients" title="" class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:400px;height:125px;">
					{{#each allowedClients}}
						<option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
		            {{/each}}
					</select>
					<a href="#" id="addclientmembers" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
				</div>
			</td>
			<td>
				<div class="multiselectwidget">
					<label for="clientMembers">{{=$ctx.doI18N("form.label.group.selected.clients")}}</label>
					<select id="clientMembers" name="clientMembers" title="" class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:400px;height:125px;">
					{{#each clientMembers}}
						{{#if officeName}}
							<option value="{{=id}}">{{=displayName}}, {{=officeName}}</option>
		            	{{else}}
		            		<option value="{{=id}}">{{=displayName}}, {{=$parent.parent.parent.data.officeName}}</option>
		            	{{/if}}
		            {{/each}}
					</select>
					<a href="#" id="removeclientmembers" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
				</div>
			</td>
		</tr>
	</table>
</form>
</script>

	<script id="clientIdentifiersTemplate" type="text/x-jquery-tmpl">
	{{#if $ctx.showTask("ADDCLIENTIDENTIFIER")}}
	<table width="100%">
		<td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
		   		<button id="addclientidentifier{{=clientId}}">{{=$ctx.doI18N("button.add.identityType")}}</button>
			</span>
		</td>
	</table>
    {{/if}}
	<hr/>
	<table style="vertical-align: top;width: 100%">
		{{#each crudRows}}
				<tr>
					<td colspan="3" align="center"><b>{{=$ctx.doI18N("label.clientIdentityDocumentType")}} {{=documentTypeName}}</b></td>
				</tr>
				<tr>
					<td colspan="1">
						<label for="documentKey">{{=$ctx.doI18N("label.identityDocumentNumber")}}</label>
					</td>
					<td>{{=documentKey}}</td>
				<tr>
				<tr>
				   	<td><label for="description">{{=$ctx.doI18N("label.description")}}</label></td>
					<td><textarea readonly="true" id="description" name="description" cols="75" rows="5">{{=description}}</textarea></td>
					<td>
						<span id="modifycellToolbar" class="ui-widget-header ui-corner-all">
							<button id="addclientIdentifierdocument{{=id}}">{{=$ctx.doI18N("link.action.upload")}}</button>
					   		<button id="editclientidentifier{{=id}}">{{=$ctx.doI18N("link.action.edit")}}</button>
					   		<button id="deleteclientidentifier{{=id}}">{{=$ctx.doI18N("link.action.delete")}}</button>
						</span>
					</td>
				</tr>
				<tr>
				   	<td><label for="documents">{{=$ctx.doI18N("label.identityDocuments")}}</label></td>
				</tr>
				<tr>
					<td colspan="2" id="clientidentifier{{=id}}documents"></td>
				</tr>
				<tr>
					<td colspan="2">
						<hr/>
					</td>
				</tr>
		{{/each}}
	</table>
</script>

	<script id="clientIdentifiersFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="documentTypeId">{{=$ctx.doI18N("label.identityDocumentType")}}</label>
				<select id="documentTypeId" name="documentTypeId" title="">
					<option value="">{{=$ctx.doI18N("label.identityDocumentType.option.first.choice")}}</option>
					{{#each allowedDocumentTypes}}
				        {{#if $ctx.number($parent.parent.data.documentTypeId)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
						{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=name}}</option>
						{{/if}}
					{{/each}}
				</select>
			</td>
			<td>
				<label for="documentKey">{{=$ctx.doI18N("label.identityDocumentNumber")}}</label>
				<input id="documentKey" name="documentKey" title="" type="text" value="{{=documentKey}}"/>
			</td>
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="description">{{=$ctx.doI18N("label.description")}}</label>
				<textarea cols="75" rows="5" id="description" name="description">{{=description}}</textarea>
			</td>
		</tr>
	</table>
 </form>
</script>

	<!--Client identifier documents section begins here -->

	<script id="clientIdentifierDocumentsTemplate"
		type="text/x-jquery-tmpl">
	<table style="vertical-align: top;width: 100%">
		{{#each crudRows}}
				<tr>
					<td>{{=$ctx.doI18N("clientIdentifier.document.label")}} {{=name}} ({{=fileName}})</td>
					<td>
						<span id="modifycellToolbar" class="ui-widget-header ui-corner-all">
							<button id="downloadclientIdentifierdocument{{=id}}"></button>
					   		<button id="editclientIdentifierdocument{{=id}}"></button>
					   		<button id="deleteclientIdentifierdocument{{=id}}"></button>
						</span>
					</td>
				</tr>
		{{/each}}
	</table>
</script>

	<script id="clientIdentifierDocumentsFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("label.name")}}</label>
				<input id="name" name="name" title="" type="text"/>
			</td>
		</tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.select.new.file")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>

	<script id="editClientIdentifierDocumentsFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("label.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("clientIdentifier.document.current.file.name")}}</label>
				{{=fileName}}
			</td>
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("clientIdentifier.document.file.new.select")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>
	<!-- Clients Identifier Document section ends here-->

	<!-- Client document section begins here-->
	<script id="clientDocumentsTemplate" type="text/x-jquery-tmpl">
	<table width="100%">
		<td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
		   		<button id="addclientdocument{{=clientId}}">{{=$ctx.doI18N("button.document.add")}}</button>
			</span>
		</td>
	</table>
	<hr/>
	<table style="vertical-align: top;width: 100%">
		{{#each crudRows}}
				<tr>
					<td>{{=$ctx.doI18N("label.name")}}</td>
					<td>{{=name}}</td>
				</tr>
				<tr>
				   	<td><label for="description">{{=$ctx.doI18N("label.description")}}</label></td>
					<td><textarea readonly="true" id="description" name="description" cols="75" rows="5">{{=description}}</textarea></td>
					<td>
						<span id="modifycellToolbar" class="ui-widget-header ui-corner-all">
							<button id="downloadclientdocument{{=id}}">{{=$ctx.doI18N("link.action.download")}}</button>
					   		<button id="editclientdocument{{=id}}">{{=$ctx.doI18N("link.action.edit")}}</button>
					   		<button id="deleteclientdocument{{=id}}">{{=$ctx.doI18N("link.action.delete")}}</button>
						</span>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.filename")}}</td>
					<td>{{=fileName}}</td>
				</tr>
				<tr>
					<td colspan="2">
						<hr/>
					</td>
				</tr>
		{{/each}}
	</table>
</script>

	<script id="clientDocumentsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("label.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("label.description")}}</label>
				<textarea cols="75" rows="5" id="description" name="description">{{=description}}</textarea>
			</td>
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.upload.browse")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>

	<script id="editClientDocumentsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("label.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("label.description")}}</label>
				<textarea cols="75" rows="5" id="description" name="description">{{=description}}</textarea>
			</td>
		<tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("label.current.filename")}}</label>
				{{=fileName}}
			</td>
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.select.new.file")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>

	<script id="clientAccountSummariesTemplate" type="text/x-jquery-tmpl">

{{#if $ctx.numberGreaterThanZero(pendingApprovalLoanCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.pending.approval")}} ({{=$ctx.number(pendingApprovalLoanCount)}}):</span>
	<span class="rowvalue">
	{{#each pendingApprovalLoans}}
		<span class="loanaccount"><a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}', '{{=accountNo}}');return false ;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(awaitingDisbursalLoanCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.pending.disbursal")}} ({{=$ctx.number(awaitingDisbursalLoanCount)}}):</span>
	<span class="rowvalue">
	{{#each awaitingDisbursalLoans}}
		<span class="loanaccount"><a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}', '{{=accountNo}}');return false ;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(activeLoanCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.active")}} ({{=$ctx.number(activeLoanCount)}}):</span>
	<span class="rowvalue">
	{{#each openLoans}}
		<span class="loanaccount"><a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}', '{{=accountNo}}');return false ;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(closedLoanCount)}}
<div class="row">
	<div class="longrowlabel">{{=$ctx.doI18N("label.closed")}} ({{=$ctx.number(closedLoanCount)}}):</div>
	<div class="rowvalue">
	{{#each closedLoans}}
		<span class="loanaccount"><a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}', '{{=accountNo}}');return false ;" >{{=productName}}: &#35;{{=accountNo}}</a></span>
	{{/each}}
	</div>
</div>
{{/if}}

{{#if $ctx.showTask("VIEWDEPOSITPRODUCTS")}}
<p><b>{{=$ctx.doI18N("heading.depositaccount.overview")}}</b></p>
{{#if $ctx.numberGreaterThanZero(pendingApprovalDepositAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.pending.approval")}} ({{=$ctx.number(pendingApprovalDepositAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each pendingApprovalDepositAccounts}}
		<span class="depositaccount"><a href="unknown.html" onclick="showDepositAccount({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(approvedDepositAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.approved")}} ({{=$ctx.number(approvedDepositAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each approvedDepositAccounts}}
		<span class="depositaccount"><a href="unknown.html" onclick="showDepositAccount({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(maturedDepositAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.matured")}} ({{=$ctx.number(maturedDepositAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each maturedDepositAccounts}}
		<span class="depositaccount"><a href="unknown.html" onclick="showDepositAccount({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(closedDepositAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.closed")}} ({{=$ctx.number(closedDepositAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each closedDepositAccounts}}
		<span class="depositaccount"><a href="unknown.html" onclick="showDepositAccount({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(preclosedDepositAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.preClosed")}} ({{=$ctx.number(preclosedDepositAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each preclosedDepositAccounts}}
		<span class="depositaccount"><a href="unknown.html" onclick="showDepositAccount({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(rejectedDepositAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.rejected")}} ({{=$ctx.number(rejectedDepositAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each rejectedDepositAccounts}}
		<span class="depositaccount"><a href="unknown.html" onclick="showDepositAccount({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(withdrawnByClientDepositAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.withdrawnbyclient")}} ({{=$ctx.number(withdrawnByClientDepositAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each withdrawnByClientDepositAccounts}}
		<span class="depositaccount"><a href="unknown.html" onclick="showDepositAccount({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}
{{/if}}

{{#if $ctx.showTask("VIEWSAVINGPRODUCTS")}}
<p><b>{{=$ctx.doI18N("heading.savingaccount.overview")}}</b></p>
{{#if $ctx.numberGreaterThanZero(pendingApprovalSavingAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.pending.approval")}} ({{=$ctx.number(pendingApprovalSavingAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each pendingApprovalSavingAccounts}}
		<span class="savingaccount"><a href="unknown.html" onclick="showSavingAccount({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(approvedSavingAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.approved")}} ({{=$ctx.number(approvedSavingAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each approvedSavingAccounts}}
		<span class="savingaccount"><a href="unknown.html" onclick="showSavingAccount({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(closedSavingAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.closed")}} ({{=$ctx.number(closedSavingAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each closedSavingAccounts}}
		<span class="savingaccount"><a href="unknown.html" onclick="showSavingAccount({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}


{{#if $ctx.numberGreaterThanZero(rejectedSavingAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.rejected")}} ({{=$ctx.number(rejectedSavingAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each rejectedSavingAccounts}}
		<span class="savingaccount"><a href="unknown.html" onclick="showSavingAccount({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(withdrawnByClientSavingAccountsCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.withdrawnbyclient")}} ({{=$ctx.number(withdrawnByClientSavingAccountsCount)}}):</span>
	<span class="rowvalue">
	{{#each withdrawnByClientSavingAccounts}}
		<span class="savingaccount"><a href="unknown.html" onclick="showSavingAccount({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{/if}}
</script>

	<script id="clientDataTabTemplate" type="text/x-jquery-tmpl">
<div id="clienttabcontent">
	<div id="clienttableftpane" style="float:left; max-width: 700px; width: 700px;">
		{{#if allChanges}}
		<div class="row" style="border: 1px dashed red;">
			<span class="longrowlabel">{{=$ctx.doI18N("label.changes.awaiting")}}</span>
			<span class="rowvalue">{{=allChanges.length}}</span>
		</div>
		{{/if}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.name")}}</span>
			<span class="rowvalue">{{=displayName}}</span>
		</div>
		{{#if accountNo}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.accountNo")}}</span>
			<span class="rowvalue">{{=accountNo}}</span>
		</div>
		{{/if}}
		{{#if externalId}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.externalId")}}</span>
			<span class="rowvalue">{{=externalId}}</span>
		</div>
		{{/if}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.office")}}</span>
			<span class="rowvalue">{{=officeName}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.joinedon")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(joinedDate)}}</span>
		</div>

		<div id="clientaccountssummary"></div>
	</div>
	<!-- end of left pane content -->

	<!-- placeholder for notes content -->
	<div id="clienttabrightpane" style="float:right;max-width:400px;width:400px;"></div>
</div>
<div style="clear: both;"></div>
</script>

	<script id="groupDataTabTemplate" type="text/x-jquery-tmpl">
<span id="toolbar" class="ui-widget-header ui-corner-all">
    <button id="deletegroupbtn{{=id}}" class="deletegroupbtn">Delete group</button>
	<button id="editgroupbtn{{=id}}" class="editgroupbtn">Edit group</button>
	<button id="newloanbtn{{=id}}" class="newloanbtn">New loan application</button>
	<button id="newbulkloanbtn{{=id}}" class="newbulkloanbtn">New members loan application</button>
</span>
<hr/>

<div id="grouptabcontent">
	<div id="grouptableftpane" style="float:left; max-width: 700px; width: 700px;">
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.group.name")}}</span>
			<span class="rowvalue">{{=name}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.group.externalid")}}</span>
			<span class="rowvalue">{{=externalId}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.client.account.branch")}}</span>
			<span class="rowvalue">{{=officeName}}</span>
		</div>
		<p><b>{{=$ctx.doI18N("heading.group.members.overview")}}</b></p>
		{{#each clientMembers}}
		<div class="row">
			<span class="rowvalue">{{=displayName}}</span>
		</div>
		{{/each}}

		<div id="groupaccountssummary"></div>

		<div id="grouptabrightpane" style="float:right;max-width:400px;width:400px;"></div>
	</div>
	<!-- end of left pane content -->
</div>
<div style="clear: both;"></div>
</script>

	<script id="groupAccountSummariesTemplate" type="text/x-jquery-tmpl">
{{#if $ctx.numberGreaterThanZero(anyIndividualLoanCount)}}

<p><b>{{=$ctx.doI18N("heading.group.account.individual.loanaccount.overview")}}</b></p>
{{#if $ctx.numberGreaterThanZero(pendingApprovalIndividualLoanCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.group.account.pending.approval.loans")}} ({{=$ctx.number(pendingApprovalIndividualLoanCount)}}):</span>
	<span class="rowvalue">
		<ul>
		{{#each pendingApprovalIndividualLoans}}
			<li class="loanaccount">
				<a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a>
				<a class="toggleMemberLoanDetails" href='#' onclick="return false;">{{=$ctx.doI18N("label.group.toggle.member.loan.details")}}</a>
				<div id="memberLoanDetails{{=id}}" class="memberLoanDetails" style="display: none;"></div>
			</li>
		{{/each}}
		</ul>
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(awaitingDisbursalIndividualLoanCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.group.account.pending.disbursal.loans")}} ({{=$ctx.number(awaitingDisbursalIndividualLoanCount)}}):</span>
	<span class="rowvalue">
	<ul>
		{{#each awaitingDisbursalIndividualLoans}}
			<li class="loanaccount">
				<a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a>
				<a class="toggleMemberLoanDetails" href='#' onclick="return false;">{{=$ctx.doI18N("label.group.toggle.member.loan.details")}}</a>
				<div id="memberLoanDetails{{=id}}" class="memberLoanDetails" style="display: none;"></div>
			</li>
		{{/each}}
		</ul>
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(activeIndividualLoanCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.active")}} ({{=$ctx.number(activeIndividualLoanCount)}}):</span>
	<span class="rowvalue">
	<ul>
		{{#each openIndividualLoans}}
			<li class="loanaccount">
				<a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a>
				<a class="toggleMemberLoanDetails" href='#' onclick="return false;">{{=$ctx.doI18N("label.group.toggle.member.loan.details")}}</a>
				<div id="memberLoanDetails{{=id}}" class="memberLoanDetails" style="display: none;"></div>
			</li>
		{{/each}}
	</ul>
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(closedIndividualLoanCount)}}
<div class="row">
	<div class="longrowlabel">{{=$ctx.doI18N("label.closed")}} ({{=$ctx.number(closedIndividualLoanCount)}}):</div>
	<div class="rowvalue">
	{{#each closedIndividualLoans}}
		<span class="loanaccount"><a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}');return false ;" >{{=clientName}}, {{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</div>
</div>
{{/if}}

{{#else}}
<div>
	{{=$ctx.doI18N("label.no.accounts.exist")}}
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(anyLoanCount)}}

<p><b>{{=$ctx.doI18N("heading.group.account.loanaccount.overview")}}</b></p>
{{#if $ctx.numberGreaterThanZero(pendingApprovalLoanCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.pending.approval")}} ({{=$ctx.number(pendingApprovalLoanCount)}}):</span>
	<span class="rowvalue">
	{{#each pendingApprovalLoans}}
		<span class="loanaccount"><a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(awaitingDisbursalLoanCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.pending.disbursal")}} ({{=$ctx.number(awaitingDisbursalLoanCount)}}):</span>
	<span class="rowvalue">
	{{#each awaitingDisbursalLoans}}
		<span class="loanaccount"><a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(activeLoanCount)}}
<div class="row">
	<span class="longrowlabel">{{=$ctx.doI18N("label.active")}} ({{=$ctx.number(activeLoanCount)}}):</span>
	<span class="rowvalue">
	{{#each openLoans}}
		<span class="loanaccount"><a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</span>
</div>
{{/if}}

{{#if $ctx.numberGreaterThanZero(closedLoanCount)}}
<div class="row">
	<div class="longrowlabel">{{=$ctx.doI18N("label.closed")}} ({{=$ctx.number(closedLoanCount)}}):</div>
	<div class="rowvalue">
	{{#each closedLoans}}
		<span class="loanaccount"><a href="unknown.html" onclick="showILLoan({{=id}}, '{{=productName}}');return false ;" >{{=productName}}: &#35;{{=id}}</a></span>
	{{/each}}
	</div>
</div>
{{/if}}

{{#else}}
<div>
	{{=$ctx.doI18N("label.no.accounts.exist")}}
</div>
{{/if}}
</script>

	<script id="memberLoanDetailsPartialTemplate" type="text/x-jquery-tmpl">
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.client.account.name")}}</span>
		<span class="rowvalue">{{=clientName}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.status")}}</span>
		<span class="rowvalue">{{=$ctx.doI18N(status.code)}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.product")}}</span>
		<span class="rowvalue">{{=loanProductName}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.externalId")}}</span>
		<span class="rowvalue">{{=externalId}}</span>
	</div>
	<br/>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.currency")}}</span>
		<span class="rowvalue">{{=currency.name}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.principal")}}</span>
		<span class="rowvalue">{{=$ctx.moneyFormatted(currency, principal)}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.repayments")}}</span>
		<span class="rowvalue">{{=numberOfRepayments}} every {{=repaymentEvery}}&nbsp;{{=repaymentFrequencyType.value}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.amortization")}}</span>
		<span class="rowvalue">{{=amortizationType.value}}</span>
	</div>
	<div class="row">
		<span class="longrowlabel">{{=$ctx.doI18N("label.interest")}}</span>
		<span class="rowvalue">{{=$ctx.decimal(annualInterestRate, 4)}}% per annum ({{=$ctx.decimal(interestRatePerPeriod, 4)}}%&nbsp; {{=interestRateFrequencyType.value}}) - {{=interestType.value}}</span>
	</div>
	<div class="row">
		{{#if permissions.pendingApproval}}
			{{#if $ctx.showTask("APPROVELOAN")}}
			<button id="approvebtn{{=$parent.parent.data.id}}" class="approveloan">Approve</button>
			{{/if}}
			{{#if $ctx.showTask("DELETELOAN")}}
			<button id="deletebtn{{=$parent.parent.data.id}}" class="deleteloan">Delete</button>
			{{/if}}
		{{/if}}
		{{#if permissions.undoApprovalAllowed}}
			{{#if $ctx.showTask("UNDOLOANAPPROVAL")}}
			<button id="undoapprovebtn{{=$parent.parent.data.id}}" class="undoapproveloan">Undo Approval</button>
			{{/if}}
		{{/if}}
		{{#if permissions.disbursalAllowed}}
			{{#if $ctx.showTask("DISBURSELOAN")}}
			<button id="disbursebtn{{=$parent.parent.data.id}}" class="disburseloan">Disburse</button>
			{{/if}}
		{{/if}}
		{{#if permissions.undoDisbursalAllowed}}
			{{#if $ctx.showTask("UNDOLOANDISBURSAL")}}
			<button id="undodisbursalbtn{{=$parent.parent.data.id}}" class="undodisbursalloan">Undo Disbursal</button>
			{{/if}}
		{{/if}}
	</div>
</script>

	<script id="depositAccountDataTabTemplate" type="text/x-jquery-tmpl">
{{#each permissions}}
{{#if anyActionOnAccountAllowed}}
<div id="depositaccountactions">
	<span id="toolbar" class="ui-widget-header ui-corner-all">
		{{#if rejectAllowed}}
		<button id="rejectbtn{{=$parent.parent.parent.data.id}}" class="rejectdepositapplication">Reject</button>
		{{/if}}
		
		{{#if withdrawnByApplicantAllowed}}
		<button id="withdrawnbyapplicantbtn{{=$parent.parent.parent.data.id}}" class="withdrawnbyapplicant">Withdrawn By Applicant</button>
		{{/if}}
		
		{{#if pendingApproval}}
		<button id="approvebtn{{=$parent.parent.parent.data.id}}" class="approvedepositapplication">Approve</button>
		{{/if}}
		
		{{#if undoApprovalAllowed}}
		<button id="withdrawbtn{{=$parent.parent.parent.data.id}}" class="withdrawdepositamount">Withdraw Total Amount </button>
		{{/if}}
		
		{{#if pendingApproval}}
		<button id="modifydepositbtn{{=$parent.parent.parent.data.id}}" class="modifydepositapplication">Modify</button>
		{{/if}}
		
		{{#if undoApprovalAllowed}}
		<button id="modifyapproveddepositbtn{{=$parent.parent.parent.data.id}}" class="modifyapproveddepositapplication">Modify</button>
		{{/if}}

		{{#if undoApprovalAllowed}}
		{{#if isInterestWithdrawalAllowed}}
		<button id="withdrawinterestbtn{{=$parent.parent.parent.parent.data.id}}" class="withdrawinterestamount">Withdraw Interest </button>
		{{/if}}
		{{/if}}

		{{#if undoApprovalAllowed}}
		{{#if renewelAllowed}}
		<button id="renewbtn{{=$parent.parent.parent.parent.data.id}}" class="renewdepositaccount">Renew </button>
		{{/if}}
		{{/if}}
		{{#if pendingApproval}}
		<button id="deletebtn{{=$parent.parent.parent.data.id}}" class="deletedepositapplication">Delete</button>
		{{/if}}
		
	    {{#if undoApprovalAllowed}}
	     <button id="printbtn{{=$parent.parent.parent.data.id}}" class="printpdf">Print</button>
	    {{/if}}
	
        {{#if undoApprovalAllowed}}
		<button id="undoapprovebtn{{=$parent.parent.parent.data.id}}" class="undoapprovedepositapplication">Undo Approval</button>
		{{/if}}
	</span>
</div>
{{/if}}
{{/each}}

<br/>
<div>
    <div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.status")}}</span>
			<span class="rowvalue">{{=$ctx.doI18N(status.code)}}</span>
	</div>
	{{#if submittedOnDate}}
	<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.submitted.on")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(submittedOnDate)}}</span>
	</div>
	{{/if}}

	{{#if actualCommencementDate}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.approved.on")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(actualCommencementDate)}}</span>
		</div>
	{{/if}}

	{{#if maturedOn}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.client.account.deposit.matured.on")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(maturedOn)}}</span>
		</div>
	{{/if}}

	{{#if closedonDate}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.client.account.deposit.closed.on")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(closedonDate)}}</span>
		</div>
	{{/if}}

		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.product")}}</span>
			<span class="rowvalue">{{=productName}}</span>
		</div>

	{{#if externalId}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.externalId")}}</span>
			<span class="rowvalue">{{=externalId}}</span>
		</div>
	{{/if}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.currency")}}</span>
			<span class="rowvalue">{{=currency.name}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.deposit")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, deposit)}}</span>
		</div>
{{#each permissions}}
{{#if anyActionOnAccountAllowed}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.projectedInterestAccrued")}}</span>
			{{#if undoApprovalAllowed}} 
			<span class="rowvalue">{{=$ctx.moneyFormatted($parent.parent.parent.data.currency, $parent.parent.parent.data.actualInterestAccrued)}}</span>
			{{else}}
			<span class="rowvalue">{{=$ctx.moneyFormatted($parent.parent.parent.data.currency, $parent.parent.parent.data.projectedInterestAccrued)}}</span>
			{{/if}}
		</div>
{{/if}}
{{/each}}

	{{#if actualInterestAccrued}}
	{{#if closedonDate}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.actualInterestAccrued")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, actualInterestAccrued)}}</span>
		</div>
	{{/if}}
	{{/if}}
	{{#if $ctx.decimal(interestPaid, 2)>0}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interestPaid")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, interestPaid)}}</span>
		</div>
	{{/if}}
	{{#if actualMaturityAmount}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.actualMaturityAmount")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, actualMaturityAmount)}}</span>
		</div>
	{{#else}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.actualMaturityAmount")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, projectedMaturityAmount)}}</span>
		</div>
	{{/if}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interestcompoundevery")}}</span>
			<span class="rowvalue">{{=interestCompoundedEvery}} month(s)</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interestType")}}</span>
			{{#if interestCompoundingAllowed}}
			<span class="rowvalue">Compound</span>
			{{else}}
			<span class="rowvalue">Simple</span>
			{{/if}}
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.tenure")}}</span>
			<span class="rowvalue">{{=tenureInMonths}} month(s)</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interest.rate.on.maturity")}}</span>
			<span class="rowvalue">{{=$ctx.decimal(maturityInterestRate, 4)}}%</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interest.rate.on.preclose")}}</span>
			<span class="rowvalue">{{=$ctx.decimal(preClosureInterestRate, 4)}}%</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.lockin.period")}}</span>
			{{#if isLockinPeriodAllowed}}
			<span class="rowvalue">{{=lockinPeriod}} month(s).</span>
			{{else}}
			<span class="rowvalue">Not applicable.</span>
			{{/if}}
		</div>
</div>
<div>
    {{#if transactions}}
	<!-- Third loan tab -->
	<div id="transactions{{=transactionId}}" style="margin-top: 5px;">
		<table class="pretty displaypayments">
		<caption>{{=$ctx.doI18N("tab.client.account.deposit.transactions.caption")}}</caption>
			<thead>
				<tr>
				<th>{{=$ctx.doI18N("deposit.account.show.transactions.table.column.heading.transactiondate")}}</th>
				<th>{{=$ctx.doI18N("deposit.account.show.transactions.table.column.heading.transactionType")}}</th>
				<th>{{=$ctx.doI18N("deposit.account.show.transactions.table.column.heading.amount")}}</th>
				<th>{{=$ctx.doI18N("deposit.account.show.transactions.table.column.heading.interest")}}</th>
				<th>{{=$ctx.doI18N("deposit.account.show.transactions.table.column.heading.total")}}</th>
				</tr>
			</thead>
			<tbody>
				{{#each transactions}}
				<tr>
				<td>{{=$ctx.globalDate(transactionDate)}}</td>
				<td>{{=$ctx.doI18N(transactionType.code)}}</td>
				<td>{{=$ctx.decimal(transactionAmount, 2)}}</td>
				<td>{{=$ctx.decimal(interestAmount, 2)}}</td>
				<td>{{=$ctx.decimal(total, 2)}}</td>					
				</tr>
				{{/each}}
			</tbody>
		</table>
	</div>
	{{/if}}
</div>

</script>

	<script id="stateTransitionDepositFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<label for="eventDate">{{=$ctx.doI18N("label.on")}}</label>
	<input id="eventDate" name="eventDate" title="" class="datepickerfield" value="{{=$ctx.globalDate(todaysDate)}}"/>

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="3" cols="40" id="note" name="note"></textarea>

</form>
</script>

	<script id="withdrawAmountFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />

	<table>
		<tr>
			<td>{{=$ctx.doI18N("form.label.deposit.maturity.date")}}</td>
			<td>
			<input id="maturesOnDate" name="maturesOnDate" title="" class="datepickerfield" value="{{=$ctx.globalDate(todaysDate)}}"/>
			</td>
		</tr>
	
		<tr>
			<td>{{=$ctx.doI18N("form.label.deposit.product.deposit.amount")}}</td>
			<td>
			<input title="" type="text" value="{{=$ctx.decimal(deposit, 2)}}" style="width: 125px;"  disabled="disabled"/>
			</td>
		</tr>

		<tr>
			<td>{{=$ctx.doI18N("form.label.deposit.interest.amount")}}</td>
			<td>
			<input type="text" value="{{=$ctx.decimal(actualInterestAccrued, 2)}}" style="width: 125px;"  disabled="disabled"/>
			</td>
		</tr>
		<tr>
			<td>{{=$ctx.doI18N("form.label.deposit.withdraw.amount")}}</td>
			<td>
			<input type="text" value="{{=$ctx.decimal(availableWithdrawalAmount, 2)}}" style="width: 125px;"  disabled="disabled"/>
			</td>
		</tr>
	</table>	
	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="3" cols="40" id="note" name="note"></textarea>

</form>
</script>

	<script id="withdrawInterestFormTemplate" type="text/x-jquery-tmpl">
 <form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<table>
		<tr>
			<td>{{=$ctx.doI18N("form.label.deposit.account.interest.withdraw.amount")}}</td>
			<td>
			<input id="amount" name="amount" title="" type="text" value="{{=$ctx.decimal(availableInterestForWithdrawal,2)}}" style="width: 125px;" />
			<input id="currencyCode" name="currencyCode" title="" type="text" value="{{=currency.code}}" style="width: 40px;" disabled="disabled" />
			</td>
		</tr> 
	</table>

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="3" cols="40" id="note" name="note"></textarea>

</form>
</script>

	<script id="stateTransitionDepositFormTemplateForApprove"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<label for="commencementDate">{{=$ctx.doI18N("label.commencementDate")}}</label>
	<input id="commencementDate" name="commencementDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(todaysDate)}}" />

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="2" cols="53" id="note" name="note"></textarea>

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.deposit.product.deposit.terms")}}</legend>
		<table>
			<tr>
				<td valign="top" style="padding-right: 5px; border-right: 0px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.deposit.amount")}}</td>
							<td>
								<input id="deposit" name="deposit" title="" type="text" value="{{=$ctx.decimal(deposit, $ctx.number(currency.decimalPlaces))}}" style="width: 125px;" />
								<input id="currencyCode" name="currencyCode" title="" type="text" value="{{=currency.code}}" style="width: 40px;" disabled="disabled" />
							</td>
						</tr> 
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.nominal.interestrate")}}</td>
							<td>
								<input id="maturityInterestRate" name="maturityInterestRate" title="" type="text" value="{{=$ctx.decimal(maturityInterestRate, $ctx.number(currency.decimalPlaces))}}" style="width: 60px;" />
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.tenure")}}</td>
							<td>
								<input id="tenureInMonths" name="tenureInMonths" title="" type="text" value="{{=$ctx.number(tenureInMonths)}}" style="width: 50px;" />
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.interest.compounding.every")}}</td>
							<td>
								<input id="interestCompoundedEvery" name="interestCompoundedEvery" title="" type="text" value="{{=$ctx.number(interestCompoundedEvery)}}" style="width: 50px;" />
							
								<select name="interestCompoundedEveryPeriodType" id="interestCompoundedEveryPeriodType"  title="" style="width: 121px;">
								{{#each interestCompoundedEveryPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestCompoundedEveryPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>

	<script id="modifyDepositApplicationFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.deposit.information")}}</legend>
		<div>
			<table id="productdetails">
				<tr>
					<td valign="top">

						<label for="clientname">{{=$ctx.doI18N("form.label.deposit.applicant")}}</label>
						<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" />

						<label for="productId">{{=$ctx.doI18N("label.product")}}</label>
						<select name="productId" id="productId">
							<option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
							{{#each productOptions}}
							{{#if $ctx.number($parent.parent.data.productId)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
							{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=name}}</option>
							{{/if}}
							{{/each}}
						</select>
					</td>
					<td style="text-align:right;vertical-align:bottom;width:50px;">&nbsp;</td>
					<td valign="top">
						<label for="commencementDate">{{=$ctx.doI18N("label.commencementDate")}}</label>
						<input id="commencementDate" name="commencementDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(todaysDate)}}" />
						<label for="externalId">{{=$ctx.doI18N("form.label.deposit.externalId")}}</label>
						<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}" />
					</td>
				</tr>
			</table>
		</div>
	</fieldset>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.deposit.product.deposit.terms")}}</legend>
			<table>
			<tr>
				<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.deposit.amount")}}</td>
							<td>
								<input id="deposit" name="deposit" title="" type="text" value="{{=$ctx.decimal(deposit, 2)}}" style="width: 125px;" />
								<input id="currencyCode" name="currencyCode" title="" type="text" value="{{=currency.code}}" style="width: 40px;" disabled="disabled" />
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.tenure")}}</td>
							<td>
								<input id="tenureInMonths" name="tenureInMonths" title="" type="text" value="{{=$ctx.number(tenureInMonths)}}" style="width: 50px;" />
							</td>
						</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.canRenew")}}</td>
						<td>
							{{#if renewalAllowed}}
							<input type="checkbox" id="renewalAllowed" name="renewalAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="renewalAllowed" name="renewalAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.canPreClose")}}</td>
						<td>
							{{#if preClosureAllowed}}
							<input type="checkbox" id="preClosureAllowed" name="preClosureAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="preClosureAllowed" name="preClosureAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
					<tr>
						<td>
							{{=$ctx.doI18N("form.label.deposit.product.isCompoundingAllowed")}}<br/><br />
							{{=$ctx.doI18N("form.label.deposit.product.isInterestWithdrawable")}}
						</td>
						<td>
							{{#if interestCompoundingAllowed}}
							<input type="checkbox" id="interestCompoundingAllowed" name="interestCompoundingAllowed" title="" style="width: 125px;" checked=checked onClick="updateCheckbox()"/><br /><br />
							<input type="checkbox" id="isInterestWithdrawable" name="isInterestWithdrawable" title="" style="width: 125px;" />
							{{#else}}
							<input type="checkbox" id="interestCompoundingAllowed" name="interestCompoundingAllowed" title="" style="width: 125px;" onClick="updateCheckbox()"/><br /><br />
							<input type="checkbox" id="isInterestWithdrawable" name="isInterestWithdrawable" title="" style="width: 125px;" checked=checked />
							{{/if}}
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.account.isLockinPeriodAllowed")}}</td>
						<td>
							{{#if isLockinPeriodAllowed}}
							<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
					</table>
				</td>

				<!-- interest details cell -->
				<td valign="top" style="padding-left: 5px; padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.nominal.interestrate")}}</td>
							<td>
								<input id="maturityInterestRate" name="maturityInterestRate" title="" type="text" value="{{=$ctx.decimal(maturityInterestRate, 4)}}" style="width: 60px;" />
							</td>
						</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.preClosureInterestRate")}}</td>
						<td>
							<input id="preClosureInterestRate" name="preClosureInterestRate" title="" style="width: 125px;" value="{{=$ctx.decimal(preClosureInterestRate,4)}}"/>
						</td>
					</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.interest.compounding.every")}}</td>
							<td>
								<input id="interestCompoundedEvery" name="interestCompoundedEvery" title="" type="text" value="{{=$ctx.number(interestCompoundedEvery)}}" style="width: 50px;" />
								
								<select name="interestCompoundedEveryPeriodType" id="interestCompoundedEveryPeriodType"  title="" style="width: 121px;">
								{{#each interestCompoundedEveryPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestCompoundedEveryPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
					<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.lockin.period")}}</td>
							<td>
								<input id="lockinPeriod" name="lockinPeriod" title="" type="text" value="{{=$ctx.number(lockinPeriod)}}" style="width: 50px;" />
								
								<select name="lockinPeriodType" id="lockinPeriodType"  title="" style="width: 121px;">
								{{#each interestCompoundedEveryPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.lockinPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
					</tr>
					</table>
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>

	<script id="modifyApprovedDepositApplicationFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

		   <table>
			<tr>
				<td valign="top" style="padding-right: 5px; border-right: 0px solid;">
					<table>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.canRenew")}}</td>
						<td>
							{{#if renewalAllowed}}
							<input type="checkbox" id="renewalAllowed" name="renewalAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="renewalAllowed" name="renewalAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
					
					<tr>
						<td>
							{{=$ctx.doI18N("form.label.deposit.product.isInterestWithdrawable")}}
						</td>
						<td>
							{{#if isInterestWithdrawable}}
							<input type="checkbox" id="isInterestWithdrawable" name="isInterestWithdrawable" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="isInterestWithdrawable" name="isInterestWithdrawable" title="" style="width: 125px;"  />
							{{/if}}
						</td>
					</tr>
					</table>
				</td>
			</tr>
		</table>
 </form>
</script>

	<script id="editAccountNoFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<label for="accountNo">{{=$ctx.doI18N("label.accountNo")}}</label>
	<input id="accountNo" name="accountNo" title="" type="text" value="{{=accountNo}}" />

	<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
	<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}" />
	
 </form>
</script>

	<script id="loanDataTabTemplate" type="text/x-jquery-tmpl">
{{#each permissions}}
{{#if anyActionOnLoanAllowed}}
<div id="loanactions">
	<table width="100%">
		<td align="center">
		<span id="toolbar" class="ui-widget-header ui-corner-all">
	
		{{#if $ctx.showTask("AddLoanCharge")}}
			{{#if addLoanChargeAllowed}}
			<button id="addloanchargebtn{{=$parent.parent.parent.parent.data.id}}" class="addloancharge">{{=$ctx.doI18N("button.addLoanCharge")}}</button>
			{{/if}}
		{{/if}}

		{{#if $ctx.showTask("RejectLoanApplication")}}
			<button id="assignloanofficerbtn{{=$parent.parent.parent.data.id}}" class="assignloanofficer">{{=$ctx.doI18N("button.assignLoanOfficer")}}</button>
		{{/if}}

		{{#if $ctx.showTask("RejectLoanApplication")}}
			{{#if rejectAllowed}}
			<button id="rejectbtn{{=$parent.parent.parent.parent.data.id}}" class="rejectloan">{{=$ctx.doI18N("button.application.reject")}}</button>
			{{/if}}
		{{/if}}
	
		{{#if $ctx.showTask("LoanApplicationWithdrawn")}}
			{{#if withdrawnByApplicantAllowed}}
			<button id="withdrawnbyapplicantloanbtn{{=$parent.parent.parent.parent.data.id}}" class="withdrawnbyapplicantloan">{{=$ctx.doI18N("button.application.withdrawnByApplicant")}}</button>
			{{/if}}
		{{/if}}

		{{#if pendingApproval}}
			{{#if $ctx.showTask("MODIFYLOAN")}}
			<button id="modifybtn{{=$parent.parent.parent.parent.data.id}}" class="modifyloan">{{=$ctx.doI18N("button.application.modify")}}</button>
			{{/if}}
			{{#if $ctx.showTask("APPROVELOAN")}}
			<button id="approvebtn{{=$parent.parent.parent.parent.data.id}}" class="approveloan">{{=$ctx.doI18N("button.application.approve")}}</button>
			{{/if}}
			{{#if $ctx.showTask("DELETELOAN")}}
			<button id="deletebtn{{=$parent.parent.parent.parent.data.id}}" class="deleteloan">{{=$ctx.doI18N("button.application.delete")}}</button>
			{{/if}}
		{{/if}}
	
		{{#if undoApprovalAllowed}}
			{{#if $ctx.showTask("UNDOLOANAPPROVAL")}}
			<button id="undoapprovebtn{{=$parent.parent.parent.parent.data.id}}" class="undoapproveloan">{{=$ctx.doI18N("button.application.undoApproval")}}</button>
			{{/if}}
		{{/if}}
			
		{{#if disbursalAllowed}}
			{{#if $ctx.showTask("MODIFYLOAN")}}
			<button id="modifybtn{{=$parent.parent.parent.parent.data.id}}" class="modifyloan">{{=$ctx.doI18N("button.application.modify")}}</button>
			{{/if}}
			{{#if $ctx.showTask("DISBURSELOAN")}}
			<button id="disbursebtn{{=$parent.parent.parent.parent.data.id}}" class="disburseloan">{{=$ctx.doI18N("button.loan.disburse")}}</button>
			{{/if}}
		{{/if}}
			
		{{#if undoDisbursalAllowed}}
			{{#if $ctx.showTask("UNDOLOANDISBURSAL")}}
			<button id="undodisbursalbtn{{=$parent.parent.parent.parent.data.id}}" class="undodisbursalloan">{{=$ctx.doI18N("button.loan.undoDisbursal")}}</button>
			{{/if}}
		{{/if}}
			
		{{#if makeRepaymentAllowed}}
			{{#if $ctx.showTask("MODIFYLOAN")}}
			<button id="modifybtn{{=$parent.parent.parent.parent.data.id}}" class="modifyloan">{{=$ctx.doI18N("button.application.modify")}}</button>
			{{/if}}
			{{#if $ctx.showTask("LOANREPAYMENT")}}
			<button id="repaymentbtn{{=$parent.parent.parent.parent.data.id}}" class="repaymentloan">{{=$ctx.doI18N("button.loan.repayment")}}</button>
			{{/if}}
			{{#if $ctx.showTask("WAIVEINTERESTPORTIONOFLOAN")}}
			<button id="waiveinterestbtn{{=$parent.parent.parent.parent.data.id}}" class="waiveinterestloan">{{=$ctx.doI18N("button.loan.waiveInterest")}}</button>
			{{/if}}
			{{#if $ctx.showTask("WRITEOFFLOAN")}}
			<button id="writeoffbtn{{=$parent.parent.parent.parent.data.id}}" class="writeoffloan">{{=$ctx.doI18N("button.loan.writeOff")}}</button>
			{{/if}}
		{{/if}}
			
		{{#if setGuarantorAllowed}}
			{{#if $ctx.showTask("ADDLOANGUARANTOR")}}
			<button id="setGuarantorbtn{{=$parent.parent.parent.parent.data.id}}" class="setguarantor">{{=$ctx.doI18N("button.guarantor")}}</button>
			{{/if}}
		{{/if}}
			
		{{#if closeLoanAsRescheduledAllowed}}
			{{#if $ctx.showTask("CLOSEASRESCHEDULEDLOAN")}}
			<button id="closeasrescheduledbtn{{=$parent.parent.parent.parent.data.id}}" class="closeasrescheduledloan">{{=$ctx.doI18N("button.loan.closeAsRescheduled")}}</button>
			{{/if}}
		{{/if}}
	
		{{#if closeLoanAllowed}}
			{{#if $ctx.showTask("CLOSELOAN")}}
			<button id="closebtn{{=$parent.parent.parent.parent.data.id}}" class="closeloan">{{=$ctx.doI18N("button.loan.close")}}</button>
			{{/if}}
		{{/if}}
		</span>
		</td>
	</table>
</div>
{{/if}}
{{/each}}

<div id="loantabs{{=id}}" class="loantabs">
	<ul>
		<li><a href="#details{{=id}}" title="details">{{=$ctx.doI18N("tab.details")}}</a></li>
		{{#if charges}}
		<li><a href="#charges{{=id}}" title="charges">{{=$ctx.doI18N("tab.charges")}}</a></li>
		{{/if}}
		{{#each repaymentSchedule}}
		<li><a href="#schedule{{=id}}" title="schedule">{{=$ctx.doI18N("tab.repaymentSchedule")}}</a></li>
        {{/each}}
		{{#if transactions}}
		<li><a href="#transactions{{=id}}" title="transactions">{{=$ctx.doI18N("tab.transactions")}}</a></li>
		{{/if}}
		<li><a href="#loanDocuments{{=id}}" title="documents">{{=$ctx.doI18N("tab.loanDocuments")}}</a></li>
	</ul>
    <!-- first loan tab -->

	<div id="details{{=id}}" style="margin-top: 5px;">
		{{#if accountNo}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.accountNo")}}</span>
			<span class="rowvalue">
			{{=accountNo}}
			{{#if $ctx.showTask("MODIFYLOAN")}}
			<button id="editaccountnobtn{{=id}}" class="editaccountnobtn"><span>Edit</span></button>
			{{/if}}
			</span>
		</div>
		{{/if}}
		{{#if externalId}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.externalId")}}</span>
			<span class="rowvalue">
			{{=externalId}}
			{{#if $ctx.showTask("MODIFYLOAN")}}
			<button id="editaccountnobtn{{=id}}" class="editaccountnobtn"><span>Edit</span></button>
			{{/if}}
			</span>
		</div>
		{{/if}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.status")}}</span>
			<span class="rowvalue">{{=$ctx.doI18N(status.code)}}</span>
		</div>
		
		{{#if actualDisbursementDate}}
			{{#if $ctx.numberGreaterThanZero(repaymentSchedule.totalInArrears)}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.status.arrears")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted($parent.parent.data.repaymentSchedule.currency, $parent.parent.data.repaymentSchedule.totalInArrears)}}</span>
		</div>
			{{/if}}
		{{/if}}

		{{#if submittedOnDate}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.submitted.on")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(submittedOnDate)}}</span>
		</div>
		{{/if}}
		
		{{#if approvedOnDate}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.approved.on")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(approvedOnDate)}}</span>
		</div>
		{{/if}}

		{{#if actualDisbursementDate}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.disbursedOn")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(actualDisbursementDate)}}</span>
		</div>
		{{#else}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.expectedDisbursementOn")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(expectedDisbursementDate)}}</span>
		</div>
		{{/if}}

		{{#if actualDisbursementDate}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.maturesOn")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(expectedMaturityDate)}}</span>
		</div>
		{{/if}}

		{{#if closedOnDate}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.closedOn")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(closedOnDate)}}</span>
		</div>
		{{/if}}

		{{#if closedOnDate}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.actualLoanTerm")}}</span>
			<span class="rowvalue">{{=convenienceData.actualLoanTermInMonths}} {{=$ctx.doI18N("label.months")}} / ({{=convenienceData.actualLoanTermInDays}} {{=$ctx.doI18N("label.days")}})</span>
		</div>
		{{/if}}

		<br/>
		{{#if repaymentsStartingFromDate}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.firstRepaymentOn")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(repaymentsStartingFromDate)}}</span>
		</div>
		{{/if}}

		{{#if interestChargedFromDate}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interestChargedFrom")}}</span>
			<span class="rowvalue">{{=$ctx.globalDate(interestChargedFromDate)}}</span>
		</div>
		{{/if}}

		{{#if loanOfficerName}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.loanOfficer")}}</span>
			<span class="rowvalue">{{=loanOfficerName}}</span>
		</div>
		{{/if}}
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.product")}}</span>
			<span class="rowvalue">{{=loanProductName}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.fund")}}</span>
			<span class="rowvalue">{{=fundName}}</span>
		</div>
		<br/>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.currency")}}</span>
			<span class="rowvalue">{{=currency.name}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.principal")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currency, principal)}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.repayments")}}</span>
			<span class="rowvalue">{{=numberOfRepayments}} every {{=repaymentEvery}}&nbsp;{{=repaymentFrequencyType.value}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.amortization")}}</span>
			<span class="rowvalue">{{=amortizationType.value}}</span>
		</div>
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interest")}}</span>
			<span class="rowvalue">{{=$ctx.decimal(annualInterestRate, 4)}}% per annum ({{=$ctx.decimal(interestRatePerPeriod, 4)}}%&nbsp; {{=interestRateFrequencyType.value}}) - {{=interestType.value}}</span>
		</div>
		
		<br/>
		
		{{#if guarantors}}
			<b>{{=$ctx.doI18N("label.guarantorDetails")}}</b>
			{{#each guarantors}}
				<div class="row">
					<span class="longrowlabel">&nbsp;</span>
					<span class="rowvalue">
						{{#if $ctx.showTask("REMOVELOANGUARANTOR")}}
							<button id="removeguarantor{{=id}}" class="removeguarantor">Remove</button>
						{{/if}}	
					</span>
				</div>
				<div class="row">
						<span class="longrowlabel">{{=$ctx.doI18N("label.name")}}</span>
						<span class="rowvalue">{{=lastname}}, {{=firstname}}</span>
				</div>
				
				{{#if guarantorType.value == "CUSTOMER"}}
				<div class="row">
						<span class="longrowlabel">{{=$ctx.doI18N("label.office")}}</span>
						<span class="rowvalue">{{=officeName}}</span>
				</div>
				<div class="row">
						<span class="longrowlabel">{{=$ctx.doI18N("label.joinedon")}}</span>
						<span class="rowvalue">{{=$ctx.globalDate(joinedDate)}}</span>
				</div>
				{{/if}}
				{{#if guarantorType.value == "EXTERNAL"}}
					{{#if dob == true}}
						<div class="row">
								<span class="longrowlabel">{{=$ctx.doI18N("label.dob")}}</span>
								<span class="rowvalue">{{=$ctx.globalDate(dob)}}</span>
						</div>
					{{/if}}
					{{#if addressLine1}}
						<div class="row">
								<span class="longrowlabel">{{=$ctx.doI18N("label.address")}}</span>
								<span class="rowvalue">{{=addressLine1}}, {{=addressLine2}}</span>
						</div>
					{{/if}}
					{{#if zip}}
						<div class="row">
								<span class="longrowlabel">{{=$ctx.doI18N("label.zip")}}</span>
								<span class="rowvalue">{{=zip}}</span>
						</div>
					{{/if}}
					{{#if city}}
						<div class="row">
								<span class="longrowlabel">{{=$ctx.doI18N("label.city")}}</span>
								<span class="rowvalue">{{=city}}</span>
						</div>
					{{/if}}
					{{#if mobileNumber}}
						<div class="row">
								<span class="longrowlabel">{{=$ctx.doI18N("label.mobile")}}</span>
								<span class="rowvalue">{{=mobileNumber}}</span>
						</div>
					{{/if}}
					{{#if housePhoneNumber}}
						<div class="row">
								<span class="longrowlabel">{{=$ctx.doI18N("label.telephone")}}</span>
								<span class="rowvalue">{{=housePhoneNumber}}</span>
						</div>
					{{/if}}
				{{/if}}
				<br/>
			{{/each}}
		{{/if}}

	</div>

	{{#if charges}}
	<div id="charges{{=id}}" style="margin-top: 5px;">
		<table id="loancharges{{=id}}" class="pretty displaypayments">
		<caption>{{=$ctx.doI18N("table.caption.loanCharges")}}</caption>
			<thead>
				<tr>
				<th>{{=$ctx.doI18N("table.heading.name")}}</th>
				<th>{{=$ctx.doI18N("table.heading.feeOrPenalty")}}</th>
				<th>{{=$ctx.doI18N("table.heading.paymentDueAt")}}</th>
				<th>{{=$ctx.doI18N("table.heading.dueAsOf")}}</th>
				<th>{{=$ctx.doI18N("table.heading.calculationType")}}</th>
				<th>{{=$ctx.doI18N("table.heading.due")}}</th>
				<th>{{=$ctx.doI18N("table.heading.paid")}}</th>
				<th>{{=$ctx.doI18N("table.heading.waived")}}</th>
				<th>{{=$ctx.doI18N("table.heading.outstanding")}}</th>
				<th>{{=$ctx.doI18N("table.heading.action")}}</th>
				</tr>
			</thead>
			<tbody>
				{{#each charges}}
				<tr>
					<td>{{=name}}</td>

				{{#if penalty}}
					<td>Penalty</td>
				{{#else}}
					<td>Fee</td>
				{{/if}}

					<td>{{=$ctx.doI18N(chargeTimeType.code)}}</td>
				{{#if $ctx.number(chargeTimeType.id)===$ctx.number(2)}}
					<td>{{=$ctx.globalDate(dueAsOfDate)}}</td>
				{{#else}}
					<td>&nbsp;</td>
				{{/if}}

				{{#if $ctx.number(chargeCalculationType.id)===$ctx.number(2)}}
					<td>{{=$ctx.doI18N(chargeCalculationType.code)}} - {{=$ctx.decimal(percentage, 4)}}% of {{=$ctx.moneyFormatted(currency, amountPercentageAppliedTo)}}</td>
				{{#else}}
					<td>{{=$ctx.doI18N(chargeCalculationType.code)}}</td>
				{{/if}}
					<td>{{=$ctx.moneyFormatted(currency, amount)}}</td>
					<td>{{=$ctx.moneyFormatted(currency, amountPaid)}}</td>
					<td>{{=$ctx.moneyFormatted(currency, amountWaived)}}</td>
					<td>{{=$ctx.moneyFormatted(currency, amountOutstanding)}}</td>
					<td>
						<a href="unknown.html" onclick="return removeLoanCharge({{=$parent.parent.data.id}}, {{=id}});">{{=$ctx.doI18N("link.action.delete")}}</a>&nbsp;
						<a href="unknown.html" onclick="return modifyLoanCharge({{=$parent.parent.data.id}}, {{=id}});">{{=$ctx.doI18N("link.action.edit")}}</a>&nbsp;
						<a href="unknown.html" onclick="return waiveLoanCharge({{=$parent.parent.data.id}}, {{=id}});">{{=$ctx.doI18N("link.action.waive")}}</a>
					</td>
				</tr>
				{{/each}}
			</tbody>
		</table>
	</div>
	{{/if}}

	{{#each repaymentSchedule}}
	<div id="schedule{{=id}}" style="margin-top: 5px;">
		<table id="summarytable{{=id}}" class="pretty displayschedule">
			<caption>{{=$ctx.doI18N("table.summary.caption")}}</caption>
			<thead>
				<tr>
					<th class="empty"></th>
					<th>{{=$ctx.doI18N("table.heading.original")}}</th>
					<th>{{=$ctx.doI18N("table.heading.paid")}}</th>
					{{#if totalWaivedToDate}}
					<th>{{=$ctx.doI18N("table.heading.waived")}}</th>
					{{/if}}
					{{#if totalWrittenOffToDate}}
					<th>Written-off</th>
					{{/if}}
					<th>{{=$ctx.doI18N("table.heading.outstanding")}}</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<th>{{=$ctx.doI18N("table.heading.principal")}}</th>
					<td>{{=$ctx.monetaryValue(currency, cumulativePrincipalDue)}}</td>
					<td>{{=$ctx.monetaryValue(currency, cumulativePrincipalPaid)}}</td>
					{{#if totalWaivedToDate}}
					<td>&nbsp;</td>
					{{/if}}
					{{#if totalWrittenOffToDate}}
					<td>{{=$ctx.monetaryValue(currency, cumulativePrincipalWrittenOff)}}</td>
					{{/if}}
					<td>{{=$ctx.monetaryValue(currency, cumulativePrincipalOutstanding)}}</td>
				</tr>
				<tr>
					<th>{{=$ctx.doI18N("table.heading.interest")}}</th>
					<td>{{=$ctx.monetaryValue(currency, cumulativeInterestExpected)}}</td>
					<td>{{=$ctx.monetaryValue(currency, cumulativeInterestPaid)}}</td>
					{{#if totalWaivedToDate}}
					<td>{{=$ctx.monetaryValue(currency, cumulativeInterestWaived)}}</td>
					{{/if}}
					{{#if totalWrittenOffToDate}}
					<td>{{=$ctx.monetaryValue(currency, cumulativeInterestWrittenOff)}}</td>
					{{/if}}
					<td>{{=$ctx.monetaryValue(currency, cumulativeInterestOutstanding)}}</td>
				</tr>
				{{#if cumulativeFeeChargesToDate}}
				<tr>
					<th>{{=$ctx.doI18N("table.heading.fees")}}</th>
					<td>{{=$ctx.monetaryValue(currency, cumulativeFeeChargesToDate)}}</td>
					<td>{{=$ctx.monetaryValue(currency, cumulativeFeeChargesPaid)}}</td>
					{{#if totalWaivedToDate}}
					<td>{{=$ctx.monetaryValue(currency, cumulativeFeeChargesWaived)}}</td>
					{{/if}}
					{{#if totalWrittenOffToDate}}
					<td>{{=$ctx.monetaryValue(currency, cumulativeFeeChargesWrittenOff)}}</td>
					{{/if}}
					<td>{{=$ctx.monetaryValue(currency, cumulativeFeeChargesOutstanding)}}</td>
				</tr>
				{{/if}}

				{{#if cumulativePenaltyChargesToDate}}
				<tr>
					<th>{{=$ctx.doI18N("tab.repaymentSchedule.table.column.heading.penalties")}}</th>
					<td>{{=$ctx.monetaryValue(currency, cumulativePenaltyChargesToDate)}}</td>
					<td>{{=$ctx.monetaryValue(currency, cumulativePenaltyChargesPaid)}}</td>
					{{#if totalWaivedToDate}}
					<td>{{=$ctx.monetaryValue(currency, cumulativePenaltyChargesWaived)}}</td>
					{{/if}}
					{{#if totalWrittenOffToDate}}
					<td>{{=$ctx.monetaryValue(currency, cumulativePenaltyChargesWrittenOff)}}</td>
					{{/if}}
					<td>{{=$ctx.monetaryValue(currency, cumulativePenaltyChargesOutstanding)}}</td>
				</tr>
				{{/if}}
			</tbody>
			<tfoot >
				<tr>
					<th>{{=$ctx.doI18N("table.heading.total")}}</th>
					<th>{{=$ctx.monetaryValue(currency, totalExpectedRepayment)}}</th>
					<th>{{=$ctx.monetaryValue(currency, totalPaidToDate)}}</th>
					{{#if totalWaivedToDate}}
					<th>{{=$ctx.monetaryValue(currency, totalWaivedToDate)}}</th>
					{{/if}}
					{{#if totalWrittenOffToDate}}
					<th>{{=$ctx.monetaryValue(currency, totalWrittenOffToDate)}}</th>
					{{/if}}
					<th>{{=$ctx.monetaryValue(currency, totalOutstanding)}}</th>
				</tr>
			</tfoot>
		</table>

		<br/>

		<table id="repaymentschedule_todate{{=id}}" class="pretty displayschedule">
			<caption>{{=$ctx.doI18N("table.caption.repaymentSchedule")}}</caption>
			<colgroup span="3"></colgroup>
			<colgroup span="3">
				<col class="lefthighlightcol">
				<col>
				<col class="righthighlightcol">
			</colgroup>
			<colgroup span="3">
				<col class="lefthighlightcol">
				<col>
				<col class="righthighlightcol">
			</colgroup>
			{{#if totalWaivedToDate}}
			<colgroup span="4"></colgroup>
			{{#else}}
			<colgroup span="3"></colgroup>
			{{/if}}

			<thead>
				<tr>
					<th colspan="3" scope="colgroup" class="empty">&nbsp;</th>
					<th colspan="3" scope="colgroup" class="highlightcol">{{=$ctx.doI18N("table.heading.loanAmountAndBalance")}}</th>
					<th colspan="3" scope="colgroup" class="highlightcol">{{=$ctx.doI18N("table.heading.totalCostOfLoan")}}</th>
					{{#if totalWaivedToDate}}
					<th colspan="4" scope="colgroup" class="empty">&nbsp;</th>
					{{#else}}
					<th colspan="3" scope="colgroup" class="empty">&nbsp;</th>
					{{/if}}
				</tr>
				<tr>
					<th scope="col">#</th>
					<th scope="col">{{=$ctx.doI18N("table.heading.date")}}</th>
					<th scope="col">{{=$ctx.doI18N("table.heading.days")}}</th>
					
					<th scope="col" class="lefthighlightcolheader">{{=$ctx.doI18N("table.heading.disbursement")}}</th>
					<th scope="col">Principal Repayment</th>
					<th scope="col" class="righthighlightcolheader">{{=$ctx.doI18N("table.heading.balanceOfLoan")}}</th>

					<th scope="col" class="lefthighlightcolheader">{{=$ctx.doI18N("table.heading.interest")}}</th>
					<th scope="col">{{=$ctx.doI18N("table.heading.fees")}}</th>
					<th scope="col" class="righthighlightcolheader">{{=$ctx.doI18N("table.heading.penalties")}}</th>

					<th scope="col">{{=$ctx.doI18N("table.heading.totalDue")}}</th>
					<th scope="col">{{=$ctx.doI18N("table.heading.totalPaid")}}</th>
					{{#if totalWaivedToDate}}
					<th scope="col">{{=$ctx.doI18N("table.heading.totalWaived")}}</th>
					{{/if}}
					<th scope="col">{{=$ctx.doI18N("table.heading.totalOutstanding")}}</th>
				</tr>
			</thead>
			<tbody>
			{{#each periods}}
			<tr>
				<td scope="row">{{=$ctx.number(period)}}</td>
				<td>{{=$ctx.globalDate(dueDate)}}</td>
				<td>{{=$ctx.number(daysInPeriod)}}</td>

				<td class="lefthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, principalDisbursed)}}</td>
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, principalDue)}}</td>
				<td class="righthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, principalLoanBalanceOutstanding)}}</td>

				<td class="lefthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, interestOriginalDue)}}</td>
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, feeChargesDue)}}</td>
				<td class="righthighlightcolheader">{{=$ctx.monetaryValue($parent.parent.data.currency, penaltyChargesDue)}}</td>

				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, totalOriginalDueForPeriod)}}</td>
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, totalPaidForPeriod)}}</td>
				{{#if $parent.parent.data.totalWaivedToDate}}
				<td>{{=$ctx.monetaryValue($parent.parent.parent.data.currency, totalWaivedForPeriod)}}</td>
				{{/if}}
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, totalOutstandingForPeriod)}}</td>
			</tr>
			{{/each}}
			</tbody>
			<tfoot class="ui-widget-header">
				<tr>
					<th colspan="2">{{=$ctx.doI18N("table.heading.total")}}</th>
					<th>{{=$ctx.number(loanTermInDays)}}</th>

					<th class="lefthighlightcolheader">{{=$ctx.monetaryValue(currency, cumulativePrincipalDisbursed)}}</th>
					<th>{{=$ctx.monetaryValue(currency, cumulativePrincipalDue)}}</th>
					<th class="righthighlightcolheader">&nbsp;</th>

					<th class="lefthighlightcolheader">{{=$ctx.monetaryValue(currency, cumulativeInterestExpected)}}</th>
					<th>{{=$ctx.monetaryValue(currency, cumulativeFeeChargesToDate)}}</th>
					<th class="righthighlightcolheader">{{=$ctx.monetaryValue(currency, cumulativePenaltyChargesToDate)}}</th>

					<th>{{=$ctx.monetaryValue(currency, totalExpectedRepayment)}}</th>
					<th>{{=$ctx.monetaryValue(currency, totalPaidToDate)}}</th>
					{{#if totalWaivedToDate}}
					<th>{{=$ctx.monetaryValue(currency, totalWaivedToDate)}}</th>
					{{/if}}
					<th>{{=$ctx.monetaryValue(currency, totalOutstanding)}}</th>
				</tr>
			</tfoot>
		</table>
	</div>
	{{/each}}

    {{#if transactions}}
	<!-- Third loan tab -->
	<div id="transactions{{=id}}" style="margin-top: 5px;">
		<table id="newrepaymentsactivity{{=id}}" class="pretty displaypayments">
		<caption>{{=$ctx.doI18N("table.transactions.caption")}}</caption>
			<thead>
				<tr>
				<th>{{=$ctx.doI18N("table.heading.transactiondate")}}</th>
				<th>{{=$ctx.doI18N("table.heading.transactionType")}}</th>
				<th>{{=$ctx.doI18N("table.heading.amount")}}</th>
				<th>{{=$ctx.doI18N("table.heading.breakdown")}}</th>
				<th>{{=$ctx.doI18N("table.heading.action")}}</th>
				</tr>
			</thead>
			<tbody>
				{{#each transactions}}
				<tr>
				<td>{{=$ctx.globalDate(date)}}</td>
				<td>{{=$ctx.doI18N(type.code)}}</td>
				<td>{{=$ctx.monetaryValue(currency, amount)}}</td>
				<td>
					<table style="border: 0px; padding: 0px;" class="notablestyle">
						{{#if principalPortion}}<tr><td style="border: 0px; text-align: left; ">Principal: {{=$ctx.monetaryValue(currency, principalPortion)}}</td></tr>{{/if}}
						{{#if interestPortion}}<tr><td style="border: 0px; text-align: left; ">Interest: {{=$ctx.monetaryValue(currency, interestPortion)}}</td></tr>{{/if}}
						{{#if feeChargesPortion}}<tr><td style="border: 0px; text-align: left; ">Fees: {{=$ctx.monetaryValue(currency, feeChargesPortion)}}</td></tr>{{/if}}
						{{#if penaltyChargesPortion}}<tr><td style="border: 0px; text-align: left; ">Penalities: {{=$ctx.monetaryValue(currency, penaltyChargesPortion)}}</td></tr>{{/if}}
					</table>
				</td>
				{{#if $ctx.isAdjustableTransaction(type.id)}}
				<td><button id="adjustrepaymentbtn{{=$parent.parent.parent.data.id}}_{{=id}}" class="adjustloanrepayment">{{=$ctx.doI18N("button.loanTransaction.adjust")}}</button></td>
				{{#else}}
				<td>&nbsp;</td>
				{{/if}}
				</tr>
				{{/each}}
			</tbody>
		</table>
	</div>
	{{/if}}
	<!-- Loan Documents Tab--->
	<div id="loanDocuments{{=id}}" style="margin-top: 5px;">
	</div>
</div>
</script>

	<script id="loanDocumentsTemplate" type="text/x-jquery-tmpl">
	<table width="100%">
		<td align="right">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
		   			<button id="addloandocument{{=loanId}}">{{=$ctx.doI18N("button.document.add")}}</button>
			</span>
		</td>
	</table>
	<hr/>
	<table style="vertical-align: top;width: 100%">
		{{#each crudRows}}
				<tr>
					<td>{{=$ctx.doI18N("label.name")}}</td>
					<td>{{=name}}</td>
				</tr>
				<tr>
				   	<td><label for="description">{{=$ctx.doI18N("label.description")}}</label></td>
					<td><textarea readonly="true" id="description" name="description" cols="75" rows="5">{{=description}}</textarea></td>
					<td>
						<span id="modifycellToolbar" class="ui-widget-header ui-corner-all">
							<button id="downloadloandocument{{=id}}">{{=$ctx.doI18N("link.action.download")}}</button>
					   		<button id="editloandocument{{=id}}">{{=$ctx.doI18N("link.action.edit")}}</button>
					   		<button id="deleteloandocument{{=id}}">{{=$ctx.doI18N("link.action.delete")}}</button>
						</span>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("label.filename")}}</td>
					<td>{{=fileName}}</td>
				</tr>
				<tr>
					<td colspan="2">
						<hr/>
					</td>
				</tr>
		{{/each}}
	</table>
</script>

	<script id="loanDocumentsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("label.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("label.description")}}</label>
				<textarea cols="75" rows="5" id="description" name="description">{{=description}}</textarea>
			</td>
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.select.new.file")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>

	<script id="editLoanDocumentsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("label.name")}}</label>
				<input id="name" name="name" title="" type="text" value="{{=name}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("label.description")}}</label>
				<textarea cols="75" rows="5" id="description" name="description">{{=description}}</textarea>
			</td>
		<tr>
		<tr>
			<td>
				<label for="description">{{=$ctx.doI18N("label.current.filename")}}</label>
				{{=fileName}}
			</td>
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.select.new.file")}}</label>
				<input type="file" name="file" id="file" size="65"></input>
			</td>
		</tr>
	</table>
 </form>
</script>

	<!-- Set a guarantor-->
	<script id="guarantorFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
	<input type="hidden" id="guaranteedLoanId" name="guaranteedLoanId" />
    <div id="formerrors"></div>
    
    <table>
	    	<tr>
	    		<td><input type="checkbox" id="internalGuarantorCheckbox" checked="true">{{=$ctx.doI18N("label.guarantor.existingClient")}}</input>
	    		</td>
	    	</tr>
	</table>
    
    <br/>
    
    <div id="internalGuarantorDiv">
	    <table>
	    	<tr>
	    		<td><b>{{=$ctx.doI18N("label.help.smartsearch")}}</b>
	    			<input id="smartGuarantorSearch" name="smartGuarantorSearch" title="" type="text" value=""/>
	    		</td>
	    	</tr>
	    	<tr>
	    		<td><small>{{=$ctx.doI18N("label.help.autocomplete")}}</small></td>
	    	</tr>
	    </table>
	    <fieldset>
	    	<legend>{{=$ctx.doI18N("label.guarantorDetails")}}</legend>
			<table>
				<tr>
					<td><label for="selectedGuarantorName">{{=$ctx.doI18N("label.name")}}</label></td>
					<td><input readonly="true" id="selectedGuarantorName" name="selectedGuarantorName" title="" type="text" value=""/></td>
					
				</tr>
				<tr>
					<td><label for="selectedGuarantorIdentifier">{{=$ctx.doI18N("label.guarantorIdentifier")}}</label></td>
					<td><input readonly="true" id="selectedGuarantorIdentifier" name="selectedGuarantorIdentifier" title="" type="text" value=""/></td>
				</tr>
				<tr>	
					<td><label for="selectedGuarantorBranch">{{=$ctx.doI18N("label.office")}}</label></td>
					<td><input readonly="true" id="selectedGuarantorBranch" name="selectedGuarantorBranch" title="" type="text" value=""/></td>
				</tr>
				<tr>	
					<td><label for="selectedGuarantorJoinedDate">{{=$ctx.doI18N("label.joinedon")}}</label></td>
					<td><input readonly="true" id="selectedGuarantorJoinedDate" name="selectedGuarantorJoinedDate" title="" type="text" value=""/></td>
				</tr>
			</table>
		</fieldset>
	</div>
	
	<div id="externalGuarantorDiv">
		 <input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
		 <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		 <fieldset>
	    	<legend>{{=$ctx.doI18N("label.guarantorDetails")}}</legend>
			<table>
				<tr>
					<td><label>{{=$ctx.doI18N("label.name")}}</label></td>
					<td>
						<input id="guarantorFirstName" name="guarantorFirstName" title="" type="text" value=""/>
						<input id="guarantorLastName" name="guarantorLastName" title="" type="text" value=""/>
					</td>
				</tr>
				<tr>
					<td><label for="guarantorDateOfBirth">{{=$ctx.doI18N("label.dob")}}</label></td>
					<td><input id="guarantorDateOfBirth" name="guarantorDateOfBirth" title="" class="datepickerfield" /></td>
				</tr>
				<tr>
					<td><label>{{=$ctx.doI18N("label.address")}}</label></td>
					<td><input id="guarantorAddressLine1" name="guarantorAddressLine1" type="text" style="width: 200px"/></td>
				</tr>
				<tr>
					<td></td>
					<td><input id="guarantorAddressLine2" name="guarantorAddressLine2" type="text" style="width: 200px"/></td>
				</tr>
				<tr>	
					<td><label for="guarantorCity">{{=$ctx.doI18N("label.city")}}</label></td>
					<td>
						<input id="guarantorCity" name="guarantorCity" title="" type="text" value=""/>
						{{=$ctx.doI18N("label.zip")}}
						<input id="guarantorZip" name="guarantorZip" title="" type="text" value=""/>
					</td>
				</tr>
				<tr>	
					<td><label for="guarantorMobileNumber">{{=$ctx.doI18N("label.mobile")}}</label></td>
					<td><input id="guarantorMobileNumber" name="guarantorMobileNumber" title="" type="text" value=""/></td>
				</tr>
				<tr>	
					<td><label for="guarantorHouseNumber">{{=$ctx.doI18N("label.telephone")}}</label></td>
					<td><input id="guarantorHouseNumber" name="guarantorHouseNumber" title="" type="text" value=""/></td>
				</tr>
			</table>
		</fieldset>
	</div>
 </form>
</script>

	<script id="stateTransitionLoanFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<label for="eventDate">{{=$ctx.doI18N("label.on")}}</label>
	<input id="eventDate" name="eventDate" title="" class="datepickerfield" />

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="3" cols="53" id="note" name="note"></textarea>
</form>
</script>

	<script id="undoStateTransitionLoanFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="5" cols="53" id="note" name="note"></textarea>
</form>
</script>

	<script id="transactionLoanFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<label for="transactionDate">{{=$ctx.doI18N("label.loan.transaction.on")}}</label>
	<input id="transactionDate" name="transactionDate" class="text ui-widget-content ui-corner-all datepickerfield" title=""d value="{{=$ctx.globalDate(date)}}"/>

	<label for="transactionAmount">{{=$ctx.doI18N("label.amount")}}</label>
	<input id="transactionAmount" name="transactionAmount" class="text ui-widget-content ui-corner-all" title="" value="{{=$ctx.monetaryValue(currency, amount)}}" />

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="3" cols="53" id="note" name="note" class="text ui-widget-content ui-corner-all"></textarea>
</form>
</script>

	<script id="loanTransactionWriteOffFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<label for="transactionDate">{{=$ctx.doI18N("label.loan.transaction.writeoff.on")}}</label>
	<input id="transactionDate" name="transactionDate" class="text ui-widget-content ui-corner-all datepickerfield" title=""d value="{{=$ctx.globalDate(date)}}"/>

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="3" cols="53" id="note" name="note" class="text ui-widget-content ui-corner-all"></textarea>
</form>
</script>

	<script id="formErrorsTemplate" type="text/x-jquery-tmpl">
<div class="ui-widget">
	<div class="ui-state-error ui-corner-all">
		<span class="ui-icon ui-icon-alert" style="float: left; margin-right: 5px;" ></span>
		<span>{{=title}}</span>
		<div style="margin-left: 5px;">
		{{#each errors}}
			<div>
				<em>{{=message}}</em>
			</div>
		{{/each}}
		</div>
	</div>
</div>
</script>

	<!-- end of portfolio template section -->

	<!-- admin templates below here -->


	<script id="loanproductFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		<legend>{{=$ctx.doI18N("form.legend.loan.product.information")}}</legend>
		
		<label for="name">{{=$ctx.doI18N("label.name")}}</label>
		<input id="name" name="name" type="text" title="" value="{{=name}}"/>
		
		<label for="description">{{=$ctx.doI18N("label.description")}}</label>
		<textarea cols="73" rows="3" id="description" name="description" title="">{{=description}}</textarea>

		{{#if $ctx.showTask("VIEWFUNDS")}}
		<label for="fundId">{{=$ctx.doI18N("label.fund")}}</label>
		<select id="fundId" name="fundId" title="">
			<option value="">{{=$ctx.doI18N("option.fund.first.choice")}}</option>
			{{#each fundOptions}}
				{{#if $ctx.number($parent.parent.data.fundId)===$ctx.number(id)}}
					<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
				{{#else}}
					<option value="{{=$ctx.number(id)}}">{{=name}}</option>
				{{/if}}
            {{/each}}
		</select>
		{{/if}}
	</fieldset>
	<fieldset>
		<legend>{{=$ctx.doI18N("legend.currency")}}</legend>
		<label for="currencyCode">{{=$ctx.doI18N("label.currency")}}</label>
		<select id="currencyCode" name="currencyCode" title="" style="width: 300px;" onChange="$('#digitsAfterDecimal').val($('#currencyCode option:selected').attr('digitsad'));">
            	<option value="" digitsad="0">{{=$ctx.doI18N("option.currency.first.choice")}}</option>
			{{#each currencyOptions}}
              	{{#if $parent.parent.data.currency.code===code}}
					<option value="{{=code}}" digitsad="{{=$ctx.number(decimalPlaces)}}" selected="selected">{{=name}}</option>
				{{#else}}
					<option value="{{=code}}" digitsad="{{=$ctx.number(decimalPlaces)}}" >{{=name}}</option>
				{{/if}}
          	{{/each}}
		</select>
		<label for="digitsAfterDecimal">{{=$ctx.doI18N("label.decimalplaces")}}</label>
		<input id="digitsAfterDecimal" name="digitsAfterDecimal" title="" style="width: 300px;" value="{{=$ctx.number(currency.decimalPlaces)}}" />
	</fieldset>
	<fieldset>
		<legend>{{=$ctx.doI18N("legend.loanTerms")}}</legend>
		
		<table>
		<tr>
			<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
				<table>
					<tr>
						<td>{{=$ctx.doI18N("label.principal")}}</td>
						<td>
							<input id="principal" name="principal" title="" style="width: 125px;" value="{{=$ctx.monetaryValue(currency, principal)}}" />
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("label.numberof.repayments")}}</td>
						<td>
							<input id="numberOfRepayments" name="numberOfRepayments" title="" style="width: 50px;" value="{{=$ctx.number(numberOfRepayments)}}"/>
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("label.repaidevery")}}</td>
						<td>
							<input id="repaymentEvery" name="repaymentEvery" title="" style="width: 50px;" value="{{=$ctx.number(repaymentEvery)}}"/>
							
							<select id="repaymentFrequencyType" name="repaymentFrequencyType" title="" style="width: 121px;">
                                {{#each repaymentFrequencyTypeOptions}}
                                 	{{#if $ctx.number($parent.parent.data.repaymentFrequencyType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
									{{/if}}
                                {{/each}}
							</select>
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("label.repaymentStrategy")}}</td>
						<td>
							<select id="transactionProcessingStrategyId" name="transactionProcessingStrategyId" title="">
								<option value="">{{=$ctx.doI18N("option.repaymentStrategy.first.choice")}}</option>
							{{#each transactionProcessingStrategyOptions}}
								{{#if $ctx.number($parent.parent.data.transactionProcessingStrategyId)===$ctx.number(id)}}
								<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
								{{#else}}
								<option value="{{=$ctx.number(id)}}">{{=name}}</option>
							{{/if}}
            				{{/each}}
							</select>
						</td>
					</tr>
				</table>
			</td>
			<td valign="top" style="padding-left: 5px; padding-right: 5px; border-right: 1px solid;">
				<table>
					<tr>
						<td>{{=$ctx.doI18N("label.nominal.interestrate")}}</td>
						<td>
							<input id="interestRatePerPeriod" name="interestRatePerPeriod" title="" style="width: 70px;" value="{{=$ctx.decimal(interestRatePerPeriod, 4)}}" />

							<select id="interestRateFrequencyType" name="interestRateFrequencyType" title="" style="width: 139px;">
								{{#each interestRateFrequencyTypeOptions}}
                                 	{{#if $ctx.number($parent.parent.data.interestRateFrequencyType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
									{{/if}}
                                {{/each}}
							</select>
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("label.amortization")}}</td>
						<td>
							<select id="amortizationType" name="amortizationType" title="" style="width: 220px;">
                                {{#each amortizationTypeOptions}}
                                 	{{#if $ctx.number($parent.parent.data.amortizationType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
									{{/if}}
                                {{/each}}
							</select>
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("label.interest.method")}}</td>
						<td>
							<select id="interestType" name="interestType" title="" style="width: 220px;">
								{{#each interestTypeOptions}}
                                 	{{#if $ctx.number($parent.parent.data.interestType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
									{{/if}}
                                {{/each}}
							</select>
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("label.interestRate.calculatedInPeriod")}}</td>
						<td>
							<select id="interestCalculationPeriodType" name="interestCalculationPeriodType" title="" style="width: 220px;">
								{{#each interestCalculationPeriodTypeOptions}}
                                 	{{#if $ctx.number($parent.parent.data.interestCalculationPeriodType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
									{{/if}}
                                {{/each}}
							</select>
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("label.arrears.tolerance")}}</td>
						<td>
							<input id="inArrearsTolerance" name="inArrearsTolerance" title="" style="width: 215px;" value="{{=$ctx.monetaryValue(currency, inArrearsTolerance)}}" />
						</td>
					</tr>
				</table>
			</td>
		</tr>
		</table>
	</fieldset>
	{{#if $ctx.showTask("VIEWCHARGES")}}
	<fieldset>
		<legend>{{=$ctx.doI18N("legend.charges")}}</legend>
		<table>
			<tr>
				<td>
					<div class="multiselectwidget">
						<label for="notSelectedCharges">{{=$ctx.doI18N("label.availableCharges")}}</label>
						<select id="notSelectedCharges" name="notSelectedCharges" title="" class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:200px;height:125px;">
						{{#each chargeOptions}}
							<option value="{{=id}}">{{=name}}, {{=currency.code}}</option>
			            {{/each}}
						</select>
						<a href="#" id="addcharges" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
					</div>
				</td>
				<td>
					<div class="multiselectwidget">
						<label for="charges">{{=$ctx.doI18N("label.selectedCharges")}}</label>
						<select id="charges" name="charges" title="" class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:200px;height:125px;">
						{{#each charges}}
							<option value="{{=id}}">{{=name}}, {{=currency.code}}</option>
			            {{/each}}
						</select>
						<a href="#" id="removecharges" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
					</div>
				</td>
			</tr>
		</table>	
	</fieldset>
	{{/if}}
	<fieldset>
		<legend>{{=$ctx.doI18N("legend.accounting.rules")}}  </legend>
		<table style="width:100%">
			<tr>
				<td align="center">
					{{#if accountingType == 1}}
					<input type="radio" name="accountingType" value="1" checked="true">{{=$ctx.doI18N("label.none")}}</input>
					{{#else}}
					<input type="radio" name="accountingType" value="1" >{{=$ctx.doI18N("label.none")}}</input>
					{{/if}}
					{{#if accountingType == 2}}
					<input type="radio" name="accountingType" value="2" checked="true">{{=$ctx.doI18N("label.cash")}}</input>
					{{#else}}
					<input type="radio" name="accountingType" value="2">{{=$ctx.doI18N("label.cash")}}</input>
					{{/if}}
					{{#if accountingType == 3}}
					<input type="radio" name="accountingType" value="3" checked="true">{{=$ctx.doI18N("label.accrual")}}</input>
					{{#else}}
					<input type="radio" name="accountingType" value="3">{{=$ctx.doI18N("label.accrual")}}</input>
					{{/if}}
				</td>
			</tr>
		</table>
		<div style="padding-left: 20%" id="accountingPlaceholdersDiv">
			<fieldset style="width: 80%;border-top: 1px dotted">
					<legend>{{=$ctx.doI18N("legend.assets")}}</legend>	
				<table style="width:100%">
						<tr>
							<td>{{=$ctx.doI18N("label.fundSource")}}</td>
							<td>
								<select id="fundSourceAccountId" name="fundSourceAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each assetAccountOptions}}
										{{#if $parent.parent.data.accountingMappings.fundSourceAccountId === id)}}
												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
										{{#else}}
												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
										{{/if}}
							        {{/each}}
							    </select>  
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.loanPortfolio")}}</td>
							<td>
								<select id="loanPortfolioAccountId" name="loanPortfolioAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each assetAccountOptions}}
										{{#if $parent.parent.data.accountingMappings.loanPortfolioAccountId === id)}}
												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
										{{#else}}
												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
										{{/if}}
							        {{/each}}
							    </select>  
							</td>
						</tr>
						<tr id="interestReceivableRow">
							<td>{{=$ctx.doI18N("label.interestReceivable")}}</td>
							<td>
								<select id="receivableInterestAccountId" name="receivableInterestAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each assetAccountOptions}}
										{{#if $parent.parent.data.accountingMappings.receivableInterestAccountId === id)}}
												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
										{{#else}}
												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
										{{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
						<tr id="feeReceivableRow">
							<td>{{=$ctx.doI18N("label.feeReceivable")}}</td>
							<td>
								<select id="receivableFeeAccountId" name="receivableFeeAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each assetAccountOptions}}
										{{#if $parent.parent.data.accountingMappings.receivableFeeAccountId === id)}}
												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
										{{#else}}
												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
										{{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
						<tr id="penaltyReceivableRow">
							<td>{{=$ctx.doI18N("label.penaltyReceivable")}}</td>
							<td>
								<select id="receivablePenaltyAccountId" name="receivablePenaltyAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each assetAccountOptions}}
										{{#if $parent.parent.data.accountingMappings.receivablePenaltyAccountId === id)}}
												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
										{{#else}}
												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
										{{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
				</table>
			</fieldset>
			<fieldset style="width: 80%;border-top: 1px dotted">
					<legend>{{=$ctx.doI18N("legend.income")}}</legend>	
				<table style="width:100%">
						<tr>
							<td>{{=$ctx.doI18N("label.incomeFromInterest")}}</td>
							<td>
								<select id="interestOnLoanAccountId" name="interestOnLoanAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each incomeAccountOptions}}
										{{#if $parent.parent.data.accountingMappings.interestOnLoanAccountId === id)}}
												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
										{{#else}}
												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
										{{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.incomeFromFees")}}</td>
							<td>
								<select id="incomeFromFeeAccountId" name="incomeFromFeeAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each incomeAccountOptions}}
										{{#if $parent.parent.data.accountingMappings.incomeFromFeeAccountId === id)}}
												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
										{{#else}}
												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
										{{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("label.incomeFromPenalties")}}</td>
							<td>
								<select id="incomeFromPenaltyAccountId" name="incomeFromPenaltyAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each incomeAccountOptions}}
										{{#if $parent.parent.data.accountingMappings.incomeFromPenaltyAccountId === id)}}
												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
										{{#else}}
												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
										{{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
				</table>
			</fieldset>
			<fieldset style="width: 80%;border-top: 1px dotted">
					<legend>{{=$ctx.doI18N("legend.expenses")}}</legend>	
				<table style="width:100%">
						<tr>
							<td>{{=$ctx.doI18N("label.loanLossesWrittenOff")}}</td>
							<td>
								<select id="writeOffAccountId" name="writeOffAccountId" title="" >
									<option value="">{{=$ctx.doI18N("option.glAccount.first.choice")}}</option>
									{{#each expenseAccountOptions}}
										{{#if $parent.parent.data.accountingMappings.writeOffAccountId === id)}}
												<option value="{{=id}}" selected="true">{{=name}}({{=glCode}})</option>
										{{#else}}
												<option value="{{=id}}">{{=name}}({{=glCode}})</option>
										{{/if}}
							        {{/each}}
							    </select> 
							</td>
						</tr>
				</table>
			</fieldset>
		</div>
	</fieldset>
</form>
</script>

	<script id="loanproductListTemplate" type="text/x-jquery-tmpl">
<table id='loanproductstable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.fundname")}}</th>
			<th>{{=$ctx.doI18N("table.heading.active")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td title='{{=description}}'>{{=name}}</td>
	<td>{{=fundName}}</td>
	<td>{{=$ctx.doI18N("boolean.true")}}</td>
	<td>
		<a id='deactivateloanproduct{{=id}}' class='deactivateloanproduct' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.deactivate")}}</a>
		<a id='editloanproduct{{=id}}' class='editloanproduct' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteloanproduct{{=id}}' class='deleteloanproduct' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>




	<script id="savingproductListTemplate" type="text/x-jquery-tmpl">
<table id='savingproductstable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.product.name")}}</th>
			<!-- <th>{{=$ctx.doI18N("table.heading.fundname")}}</th> -->
			<th>{{=$ctx.doI18N("table.heading.product.created")}}</th>
			<th>{{=$ctx.doI18N("table.heading.product.modified")}}</th>
			<th>{{=$ctx.doI18N("table.heading.active")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td title='{{=description}}'>{{=name}}</td>
	<!-- <td>{{=fundName}}</td> -->
	<td>{{=$ctx.globalDateTime(createdOn)}}</td>
	<td>{{=$ctx.globalDateTime(lastModifedOn)}}</td>
	<td>Yes</td>
	<td>
		<a id='deactivatesavingproduct{{=id}}' class='deactivatesavingproduct' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.deactivate")}}</a>
		<a id='editsavingproduct{{=id}}' class='editsavingproduct' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletesavingproduct{{=id}}' class='deletesavingproduct' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="savingproductFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" /> 
		<input type="hidden" id="interestCalculationMethod" name="interestCalculationMethod" value="1" /> 
		<legend>{{=$ctx.doI18N("form.legend.saving.product.information")}}</legend> 
		<table>
		<tr>
			<td>
				<label for="name">{{=$ctx.doI18N("form.label.saving.product.name")}}</label></td><td>
				<input id="name" name="name" type="text" title="" value="{{=name}}"/>
			</td>
		</tr>
		<tr>
			<td>
				<label for="savingProductType">{{=$ctx.doI18N("form.label.saving.product.savingProductType")}}</label></td><td>
				<select name="savingProductType" id="savingProductType"  title="" style="width: 121px;">
							{{#each savingsProductTypeOptions}}
								{{#if $ctx.number($parent.parent.data.savingProductType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        					{{/each}}
  						</select>
			</td>
		</tr>
		</table>
		<label for="description">{{=$ctx.doI18N("form.label.saving.product.description")}}</label>
		<textarea cols="73" rows="3" id="description" name="description" title="">{{=description}}</textarea>
	</fieldset>

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.saving.product.currency")}}</legend>
		<label for="currencyCode">{{=$ctx.doI18N("form.label.saving.product.currency")}}</label>
		<select id="currencyCode" name="currencyCode" title="" style="width: 300px;" onChange="$('#digitsAfterDecimal').val($('#currencyCode option:selected').attr('digitsad'));">
            	<option value="" digitsad="0">{{=$ctx.doI18N("option.currency.first.choice")}}</option>
			{{#each currencyOptions}}
                {{#if $parent.parent.data.currency.code===code}}
					<option value="{{=code}}" digitsad="{{=$ctx.number(decimalPlaces)}}" selected="selected">{{=name}}</option>
				{{#else}}
					<option value="{{=code}}" digitsad="{{=$ctx.number(decimalPlaces)}}" >{{=name}}</option>
				{{/if}}
          		{{/each}}
		</select>
		<label for="digitsAfterDecimal">{{=$ctx.doI18N("form.label.saving.product.decimalplaces")}}</label>
		<input id="digitsAfterDecimal" name="digitsAfterDecimal" title="" style="width: 300px;" value="{{=$ctx.number(digitsAfterDecimal)}}" />
	</fieldset>

	<fieldset>
	<legend>{{=$ctx.doI18N("form.legend.saving.product.deposit.terms")}}</legend>
	<table>
	<tr>
		<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
			<table>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.product.amount.per.period")}}</td>
					<td>
						<input id="savingsDepositAmount" name="savingsDepositAmount" title="" style="width: 125px;" value="{{=$ctx.decimal(savingsDepositAmount, 2)}}" />
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.product.minbalforwithdrawal")}}</td>
					<td>
						<input id="minimumBalanceForWithdrawal" name="minimumBalanceForWithdrawal" title="" style="width: 125px;" value="{{=$ctx.decimal(minimumBalanceForWithdrawal, 2)}}" />
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.product.tenure")}}</td>
					<td>
						<input id="tenure" name="tenure" title="" style="width: 50px;" value="{{=$ctx.number(tenure)}}"/>
						<select name="tenureType" id="tenureType"  title="">
							{{#each tenureTypeOptions}}
								{{#if $ctx.number($parent.parent.data.tenureType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        					{{/each}}
  						</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.account.isLockinPeriodAllowed")}}</td>
					<td>
						{{#if isLockinPeriodAllowed}}
						<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" checked=checked />
						{{#else}}
						<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" />
						{{/if}}
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.account.ispartialdepositallowed")}}</td>
					<td>
						{{#if isPartialDepositAllowed}}
						<input type="checkbox" id="isPartialDepositAllowed" name="isPartialDepositAllowed" title="" style="width: 125px;" checked=checked />
						{{#else}}
						<input type="checkbox" id="isPartialDepositAllowed" name="isPartialDepositAllowed" title="" style="width: 125px;" />
						{{/if}}
					</td>
				</tr>
			</table>
		</td>
		<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
			<table>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.product.interestRate")}}</td>
					<td>
						<input id="interestRate" name="interestRate" title="" style="width: 90px;" value="{{=$ctx.decimal(interestRate,2)}}"/>%-
						<select name="interestType" id="interestType"  title="">
							{{#each savingsInterestTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        					{{/each}}
  						</select>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.deposit.product.minInterestRate")}}</td>
					<td>
						<input id="minInterestRate" name="minInterestRate" title="" style="width: 125px;" value="{{=$ctx.decimal(minInterestRate,2)}}"/>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.deposit.product.maxInterestRate")}}</td>
					<td>
						<input id="maxInterestRate" name="maxInterestRate" title="" style="width: 125px;" value="{{=$ctx.decimal(maxInterestRate,2)}}"/>
					</td>
				</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.product.deposit.every")}}</td>
					<td>
						<input id="depositEvery" name="depositEvery" title="" type="text" value="{{=$ctx.number(depositEvery)}}" style="width: 50px;" />
							
							<select name="frequency" id="frequency"  title="" style="width: 121px;">
								{{#each savingFrequencyOptions}}
								{{#if $ctx.number($parent.parent.data.savingFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  							</select>
					</td>
				</tr>
				<tr id="lockinPeriodRow">
					<td>{{=$ctx.doI18N("form.label.saving.product.lockin.period")}}</td>
					<td>
						<input id="lockinPeriod" name="lockinPeriod" title="" type="text" value="{{=$ctx.number(lockinPeriod)}}" style="width: 50px;" />
						<select name="lockinPeriodType" id="lockinPeriodType"  title="" style="width: 121px;">
							{{#each lockinPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.lockinPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        					{{/each}}
  						</select>
					</td>
				</tr>
			</table>	
		</td>
	</tr>
	</table>	
</fieldset>	
</form>
</script>

	<script id="depositproductListTemplate" type="text/x-jquery-tmpl">
<table id='depositproductstable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.active")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td title='{{=description}}'>{{=name}}</td>
	<td>Yes</td>
	<td>
		<a id='deactivatedepositproduct{{=id}}' class='deactivatedepositproduct' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.deactivate")}}</a>
		<a id='editdepositproduct{{=id}}' class='editdepositproduct' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletedepositproduct{{=id}}' class='deletedepositproduct' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="depositproductFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" /> 
		<legend>{{=$ctx.doI18N("form.legend.deposit.product.information")}}</legend> 
		
		<label for="name">{{=$ctx.doI18N("form.label.deposit.product.name")}}</label>
		<input id="name" name="name" type="text" value="{{=name}}" style="width:400px;"/>
		
		<label for="description">{{=$ctx.doI18N("form.label.deposit.product.description")}}</label>
		<textarea cols="73" rows="3" id="description" name="description" title="">{{=description}}</textarea>
	</fieldset>

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.deposit.product.currency")}}</legend>
		<label for="currencyCode">{{=$ctx.doI18N("form.label.deposit.product.currency")}}</label>
		<select id="currencyCode" name="currencyCode" title="" style="width: 300px;" onChange="$('#digitsAfterDecimal').val($('#currencyCode option:selected').attr('digitsad'));">
            	<option value="" digitsad="0">{{=$ctx.doI18N("option.currency.first.choice")}}</option>
			{{#each currencyOptions}}
                {{#if $parent.parent.data.currencyCode===code}}
					<option value="{{=code}}" digitsad="{{=$ctx.number(decimalPlaces)}}" selected="selected">{{=name}}</option>
				{{#else}}
					<option value="{{=code}}" digitsad="{{=$ctx.number(decimalPlaces)}}">{{=name}}</option>
				{{/if}}
          	{{/each}}
		</select>
		<label for="digitsAfterDecimal">{{=$ctx.doI18N("form.label.deposit.product.decimalplaces")}}</label>
		<input id="digitsAfterDecimal" name="digitsAfterDecimal" title="" style="width: 300px;" value="{{=$ctx.number(digitsAfterDecimal)}}" />
	</fieldset>

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.deposit.product.deposit.terms")}}</legend>
		
		<table>
		<tr>
			<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
				<table>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.min.amount")}}</td>
						<td>
							<input id="minimumBalance" name="minimumBalance" title="" style="width: 125px;" value="{{=$ctx.decimal(minimumBalance, 2)}}" />
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.max.amount")}}</td>
						<td>
							<input id="maximumBalance" name="maximumBalance" title="" style="width: 125px;" value="{{=$ctx.decimal(maximumBalance, 2)}}"/>
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.tenureMonths")}}</td>
						<td>
							<input id="tenureInMonths" name="tenureInMonths" title="" style="width: 125px;" value="{{=$ctx.number(tenureInMonths)}}"/>
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.canRenew")}}</td>
						<td>
							{{#if renewalAllowed}}
							<input type="checkbox" id="renewalAllowed" name="renewalAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="renewalAllowed" name="renewalAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.canPreClose")}}</td>
						<td>
							{{#if preClosureAllowed}}
							<input type="checkbox" id="preClosureAllowed" name="preClosureAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="preClosureAllowed" name="preClosureAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.isCompoundingAllowed")}}</td>
						<td>
							{{#if interestCompoundingAllowed}}
							<input type="checkbox" id="interestCompoundingAllowed" name="interestCompoundingAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="interestCompoundingAllowed" name="interestCompoundingAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.account.isLockinPeriodAllowed")}}</td>
						<td>
							{{#if isLockinPeriodAllowed}}
							<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" checked=checked onClick="showLockinOptions()"/>
							{{#else}}
							<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" onClick="showLockinOptions()" />
							{{/if}}
						</td>
					</tr>
				</table>	
			</td>
			<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
				<table>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.maturityDefaultInterestRate")}}</td>
						<td>
							<input id="maturityDefaultInterestRate" name="maturityDefaultInterestRate" title="" style="width: 125px;" value="{{=$ctx.decimal(maturityDefaultInterestRate,4)}}"/>
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.maturityMinInterestRate")}}</td>
						<td>
							<input id="maturityMinInterestRate" name="maturityMinInterestRate" title="" style="width: 125px;" value="{{=$ctx.decimal(maturityMinInterestRate,4)}}"/>
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.maturityMaxInterestRate")}}</td>
						<td>
							<input id="maturityMaxInterestRate" name="maturityMaxInterestRate" title="" style="width: 125px;" value="{{=$ctx.decimal(maturityMaxInterestRate,4)}}"/>
						</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.product.preClosureInterestRate")}}</td>
						<td>
							<input id="preClosureInterestRate" name="preClosureInterestRate" title="" style="width: 125px;" value="{{=$ctx.decimal(preClosureInterestRate,4)}}"/>
						</td>
					</tr>
					<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.interest.compounding.every")}}</td>
							<td>
								<input id="interestCompoundedEvery" name="interestCompoundedEvery" title="" type="text" value="{{=$ctx.number(interestCompoundedEvery)}}" style="width: 50px;" />
								
								<select name="interestCompoundedEveryPeriodType" id="interestCompoundedEveryPeriodType"  title="" style="width: 121px;">
								{{#each interestCompoundedEveryPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.interestCompoundedEveryPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
					</tr>
					<tr id="lockinPeriodRow">
							<td>{{=$ctx.doI18N("form.label.deposit.product.lockin.period")}}</td>
							<td>
								{{#if isLockinPeriodAllowed}}
								<input id="lockinPeriod" name="lockinPeriod" title="" type="text" value="{{=$ctx.number(lockinPeriod)}}" style="width: 50px;" />
								<select name="lockinPeriodType" id="lockinPeriodType"  title="" style="width: 121px;">
								{{#each interestCompoundedEveryPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.lockinPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
								{{else}}
								<input id="lockinPeriod" name="lockinPeriod" title="" type="text" value="{{=$ctx.number(lockinPeriod)}}" style="width: 50px;" disabled="disabled"/>
								<select name="lockinPeriodType" id="lockinPeriodType"  title="" style="width: 121px;" disabled="disabled">
								{{#each interestCompoundedEveryPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.lockinPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
								{{/if}}
								
							</td>
					</tr>
				</table>	
			</td>
		</tr>
		
	</table>
	</fieldset>

</form>
</script>

	<script id="officeListTemplate" type="text/x-jquery-tmpl">
<table id='officestable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.externalId")}}</th>
			<th>{{=$ctx.doI18N("table.heading.openedOn")}}</th>
			<th>{{=$ctx.doI18N("table.heading.office.parent")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=nameDecorated}}</td>
	<td>{{=externalId}}</td>
	<td>{{=$ctx.globalDate(openingDate)}}</td>
	<td>{{=parentName}}</td>
	<td>
		<a id='editoffice{{=id}}' class='editoffice' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteoffice{{=id}}' class='deleteoffice' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="officeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.office.details")}}</legend>
		<label for="name">{{=$ctx.doI18N("label.office")}}</label>
		<input id="name" name="name" title="" type="text" value="{{=name}}" size="75"/>

        {{#if allowedParents.length > 0}}
		<label for="parentId">{{=$ctx.doI18N("form.label.office.parent")}}</label>
		<select id="parentId" name="parentId" title="">
            <option value="-1">{{=$ctx.doI18N("option.office.first.choice")}}</option>
			{{#each allowedParents}}
				{{#if $ctx.number($parent.parent.data.parentId)===$ctx.number(id)}}
					<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
				{{#else}}
					<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
				{{/if}}
            {{/each}}
		</select>
		{{/if}}

		<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
		<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		<label for="openingDate">{{=$ctx.doI18N("form.label.openedOn")}}</label>
		<input id="openingDate" name="openingDate" title="" type="text" value="{{=$ctx.globalDate(openingDate)}}" size="75" class="datepickerfield" />

		<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
		<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}" size="75"/>
	</fieldset>
</form>
</script>

	<script id="officetransactionListTemplate" type="text/x-jquery-tmpl">
<table id='officetransactionstable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.officetransaction.transactionDate")}}</th>
			<th>{{=$ctx.doI18N("table.heading.officetransaction.fromOfficeName")}}</th>
			<th>{{=$ctx.doI18N("table.heading.officetransaction.toOfficeName")}}</th>
			<th>{{=$ctx.doI18N("table.heading.officetransaction.currency")}}</th>
			<th>{{=$ctx.doI18N("table.heading.officetransaction.transactionAmount")}}</th>
			<th>{{=$ctx.doI18N("table.heading.officetransaction.description")}}</th>
			{{#if $ctx.showTask("DELETEOFFICEMONEYTXN")}}
			<th>&nbsp;</th>
			{{/if}}
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=$ctx.globalDate(transactionDate)}}</td>
	<td>{{=fromOfficeName}}</td>
	<td>{{=toOfficeName}}</td>
	<td>{{=currency.displayLabel}}</td>
	<td align="right">{{=$ctx.decimal(transactionAmount, currency.decimalPlaces)}}</td>
	<td>{{=description}}</td>
	{{#if $ctx.showTask("DELETEOFFICEMONEYTXN")}}
	<td>
		<a id='deleteofficetransaction{{=id}}' class='deleteofficetransaction' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
	{{/if}}
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="officetransactionFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.officetransaction.details")}}</legend>

	<table>
	 <tr>
	  <td>
		<label for="fromOfficeId">{{=$ctx.doI18N("form.label.officetransaction.fromOfficeId")}}</label>
		<select id="fromOfficeId" name="fromOfficeId" title="">
            <option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
			{{#each allowedOffices}}
				<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
            	{{/each}}
		</select>
	  </td>
	  <td>
		<label for="toOfficeId">{{=$ctx.doI18N("form.label.officetransaction.toOfficeId")}}</label>
		<select id="toOfficeId" name="toOfficeId" title="">
            <option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
			{{#each allowedOffices}}
				<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
            	{{/each}}
		</select>
	  </td>
	 </tr>
	 <tr>
	  <td>
		<label for="transactionDate">{{=$ctx.doI18N("form.label.officetransaction.transactionDate")}}</label>
		<input id="transactionDate" name="transactionDate" title="" type="text" value="{{=$ctx.globalDate(transactionDate)}}" size="20" class="datepickerfield" />
	  </td>
	  <td>
		<label for="description">{{=$ctx.doI18N("form.label.officetransaction.description")}}</label>
		<input id="description" name="description" title="" type="text" value="{{=description}}" size="70"/>
	  </td>
	 </tr>
	 <tr>
	  <td>

		<label for="currencyCode">{{=$ctx.doI18N("form.label.officetransaction.currency")}}</label>
		<select id="currencyCode" name="currencyCode" title="" style="width: 300px;">
            <option value="">{{=$ctx.doI18N("option.currency.first.choice")}}</option>
			{{#each currencyOptions}}
					<option value="{{=code}}">{{=name}}</option>
          		{{/each}}
		</select>
	  </td>
	  <td>
		<label for="transactionAmount">{{=$ctx.doI18N("form.label.officetransaction.transactionAmount")}}</label>
		<input id="transactionAmount" name="transactionAmount" title="" type="text" style="width: 125px;" />
	  </td>
	 </tr>
	</table>
	</fieldset>
</form>
</script>

	<script id="configurationListTemplate" type="text/x-jquery-tmpl">
<table id='configurationstable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.enabled")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=name}}</td>
	<td>
	{{#if enabled}}
		{{=$ctx.doI18N("boolean.true")}}
	{{#else}}
		{{=$ctx.doI18N("boolean.false")}}
	{{/if}}
	</td>
	<td>
		{{#if enabled}}
			<a id='disableconfiguration-{{=name}}' class='disableconfiguration' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.disable")}}</a>
		{{#else}}
			<a id='enableconfiguration-{{=name}}' class='enableconfiguration' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.enable")}}</a>
		{{/if}}
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="codeListTemplate" type="text/x-jquery-tmpl">
<table id='codestable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.code.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.code.systemdefined")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=name}}</td>
	<td>
	{{#if systemDefined}}
		{{=$ctx.doI18N("boolean.true")}}
	{{#else}}
		{{=$ctx.doI18N("boolean.false")}}
	{{/if}}
	</td>
	<td>
		<a id='editcode{{=id}}' class='editcode' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		{{#if systemDefined}}
			&nbsp;
		{{#else}}
			<a id='deletecode{{=id}}' class='deletecode' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
		{{/if}}
		
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="codeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.code.details")}}</legend>
		<label for="name">{{=$ctx.doI18N("label.name")}}</label>
		<input id="name" name="name" title="" type="text" value="{{=name}}" size="75"/>
	</fieldset>
</form>
</script>
	<!-- FIN -->

	<script id="fundListTemplate" type="text/x-jquery-tmpl">
<table id='fundstable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.externalId")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=name}}</td>
	<td>{{=externalId}}</td>
	<td>
		<a id='editfund{{=id}}' class='editfund' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletefund{{=id}}' class='deletefund' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="fundFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.fund.details")}}</legend>
		<label for="name">{{=$ctx.doI18N("label.name")}}</label>
		<input id="name" name="name" title="" type="text" value="{{=name}}" size="75"/>
		<label for="externalId">{{=$ctx.doI18N("label.externalId")}}</label>
		<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}" size="75"/>
	</fieldset>
</form>
</script>

	<script id="employeeListTemplate" type="text/x-jquery-tmpl">
<table id='employeestable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.officename")}}</th>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.isLoanOfficer")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=officeName}}</td>
	<td>{{=displayName}}</td>
	<td>
		{{#if isLoanOfficer}}
			Yes
		{{#else}}
			No
		{{/if}}
	</td>
	<td>
		<a id='editemployee{{=id}}' class='editemployee' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		{{#if isLoanOfficer}}
			<a id='bulkloanreassignment' class='bulkloanreassignment' href='#' style='margin-right: 5px;' data-officeid="{{=officeId}}" data-fromloanofficerid="{{=id}}">{{=$ctx.doI18N("link.action.bulkloanreassignment")}}</a>	
		{{/if}}
		<a id='deleteemployee{{=id}}' class='deleteemployee' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="employeeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.employee.details")}}</legend>
		<table cellspacing="4px" cellpadding="8px">
			<tr>
				<td colspan="2">
					<label for="office">{{=$ctx.doI18N("label.office")}}</label>
					<select id="officeId" name="officeId" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each crudRows}}
							{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
								<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
							{{#else}}
								<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
							{{/if}}
				        {{/each}}
					</select>
				</td>
			</tr>
			<tr>
				<td>
					<label for="firstname">{{=$ctx.doI18N("label.firstname")}}</label>
					<input id="firstname" name="firstname" title="" type="text" value="{{=firstname}}" size="15"/>
				</td>
				<td>	
					<label for="lastname">{{=$ctx.doI18N("label.lastname")}}</label>
					<input id="lastname" name="lastname" title="" type="text" value="{{=lastname}}" size="15"/>
				</td>
			</tr>
			<tr>
				<td colspan="2">
					<label for="isLoanOfficer">{{=$ctx.doI18N("table.heading.isLoanOfficer")}}</label>
					<input id="isLoanOfficer" name="isLoanOfficer" type="checkbox" value="{{=isLoanOfficer}}"/>
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>

	<script id="employeeFormEditTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<table cellspacing="4px" cellpadding="8px">
			<tr>
				<td colspan="2">
					<label for="office">{{=$ctx.doI18N("label.office")}}</label>
					<select id="officeId" name="officeId" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each allowedOffices}}
							{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
								<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
							{{#else}}
								<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
							{{/if}}
				        {{/each}}
					</select>
				</td>
			</tr>
			<tr>
				<td>
					<label for="firstname">{{=$ctx.doI18N("label.firstname")}}</label>
					<input id="firstname" name="firstname" title="" type="text" value="{{=firstname}}" size="15"/>
				</td>
				<td>	
					<label for="lastname">{{=$ctx.doI18N("label.lastname")}}</label>
					<input id="lastname" name="lastname" title="" type="text" value="{{=lastname}}" size="15"/>
				</td>
			</tr>
			<tr>
				<td colspan="2">
					<label for="isLoanOfficer">{{=$ctx.doI18N("table.heading.isLoanOfficer")}}</label>
					{{#if isLoanOfficer}}
						<input id="isLoanOfficer" name="isLoanOfficer" type="checkbox" value="{{=isLoanOfficer}}" checked="true"/>
					{{#else}}
						<input id="isLoanOfficer" name="isLoanOfficer" type="checkbox" value="{{=isLoanOfficer}}"/>
					{{/if}}
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>

	<script id="loanReassignmentFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.loan.reassignment")}}</legend>
		<table cellspacing="4px" cellpadding="8px">
			<tr>
				<td>
					<input type="hidden" id="fromLoanOfficerId" name="fromLoanOfficerId" value="{{=fromLoanOfficerId}}" />
					<label for="toLoanOfficer">{{=$ctx.doI18N("form.label.loan.officer.to")}}</label>
					<select id="toLoanOfficerId" name="toLoanOfficerId" title="">
						<option value="-1">{{=$ctx.doI18N("option.loanOfficer.first.choice")}}</option>
						{{#each loanOfficerOptions}}
							{{#if $ctx.number($parent.parent.data.fromLoanOfficerId)===$ctx.number(id)}}
								<option value="{{=$ctx.number(id)}}" selected="selected">{{=displayName}}</option>
							{{#else}}
								<option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
							{{/if}}
				        {{/each}}
					</select>
				</td>
				<td>
					<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
					<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
					<label for="assignmentDate">{{=$ctx.doI18N("form.label.aassignment.date")}}</label>
					<input id="assignmentDate" name="assignmentDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(assignmentDate)}}"/>
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>

	<script id="bulkLoanReassignmentFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.bulk.loan.reassignment")}}</legend>
		<table cellspacing="4px" cellpadding="8px">
			<tr>
				<td colspan="3">
					<label for="office">{{=$ctx.doI18N("label.office")}}</label>
					<select id="officeId" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each officeOptions}}
							{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
								<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
							{{#else}}
								<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
							{{/if}}
				        {{/each}}
					</select>
				</td>	
			</tr>
			<tr>
				<td colspan="3">
					<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
					<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
					<label for="assignmentDate">{{=$ctx.doI18N("form.label.aassignment.date")}}</label>
					<input id="assignmentDate" name="assignmentDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(assignmentDate)}}"/>
				</td>
			</tr>
			<tr>
				<td colspan="2">
					<label for="fromLoanOfficer">{{=$ctx.doI18N("form.label.loan.officer.from")}}</label>
					<select id="fromLoanOfficerId" name="fromLoanOfficerId" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each loanOfficerOptions}}
							{{#if $ctx.number($parent.parent.data.fromLoanOfficerId)===$ctx.number(id)}}
								<option value="{{=$ctx.number(id)}}" selected="selected">{{=displayName}}</option>
							{{#else}}
								<option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
							{{/if}}
				        {{/each}}
					</select>
				</td>
				<td>
					<label for="toLoanOfficer">{{=$ctx.doI18N("form.label.loan.officer.to")}}</label>
					<select id="toLoanOfficerId" name="toLoanOfficerId" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each loanOfficerOptions}}
							{{#if $ctx.number($parent.parent.data.fromLoanOfficerId)!==$ctx.number(id)}}}
								<option value="{{=$ctx.number(id)}}">{{=displayName}}</option>
							{{/if}}
				        {{/each}}
					</select>
				</td>
			</tr>
			{{#if accountSummaryCollection}}
				{{#if accountSummaryCollection.clients.length > 0 }}
					<tr>
						<td>{{=$ctx.doI18N("label.clients")}}</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
					</tr>
					{{#each accountSummaryCollection.clients}}
						<tr>
							<td><input type="checkbox" class="parentCheckBox" data-id="{{=id}}"/></td>
							<td>{{=displayName}}</td>
							<td>&nbsp;</td>
						</tr>
						{{#each loans}}
							<tr>
								<td>&nbsp;</td>
								<td><input type="checkbox" name="loans" value="{{=id}}" data-parentid="{{=$parent.parent.data.id}}"/></td>
								<td>{{=productName}}: &#35;{{=id}}</td>
							</tr>
						{{/each}}
					{{/each}}
				{{/if}}
				{{#if accountSummaryCollection.groups.length > 0 }}
					<tr>
						<td>{{=$ctx.doI18N("label.groups")}}</td>
						<td>&nbsp;</td>
						<td>&nbsp;</td>
					</tr>
					{{#each accountSummaryCollection.groups}}
						<tr>
							<td><input type="checkbox" class="parentCheckBox" data-id="{{=id}}"/></td>
							<td>{{=name}}</td>
							<td>&nbsp;</td>
						</tr>
						{{#each loans}}
						<tr>
							<td>&nbsp;</td>
							<td><input type="checkbox" name="loans" value="{{=id}}" data-parentid="{{=$parent.parent.data.id}}"/></td>
							<td>{{=productName}}: &#35;{{=id}}</td>
						</tr>
						{{/each}}
					{{/each}}
				{{/if}}
			{{/if}}
		</table>
	</fieldset>
</form>
</script>

	<script id="chargeListTemplate" type="text/x-jquery-tmpl">
<table id='chargestable' width='100%'>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("table.heading.name")}}</th>
			<th>{{=$ctx.doI18N("table.heading.currency")}}</th>
			<th>{{=$ctx.doI18N("table.heading.amount")}}</th>
			<th>{{=$ctx.doI18N("table.heading.charge.chargeAppliesTo")}}</th>
			<th>{{=$ctx.doI18N("table.heading.isPenalty")}}</th>
			<th>{{=$ctx.doI18N("table.heading.calculationType")}}</th>
			<th>{{=$ctx.doI18N("table.heading.charge.chargeTimeType")}}</th>
			<th>{{=$ctx.doI18N("table.heading.active")}}</th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=name}}</td>
	<td>{{=currency.displayLabel}}</td>
	<td>{{=$ctx.decimal(amount, currency.decimalPlaces)}}</td>
	<td>{{=$ctx.doI18N(chargeAppliesTo.code)}}</td>
	<td>
		{{#if penalty}} 
			{{=$ctx.doI18N("boolean.true")}}
		{{#else}}
			{{=$ctx.doI18N("boolean.false")}}
		{{/if}}
	</td>
	<td>{{=$ctx.doI18N(chargeCalculationType.code)}}</td>
	<td>{{=$ctx.doI18N(chargeTimeType.code)}}</td>
	<td>
		{{#if active}} 
			{{=$ctx.doI18N("boolean.true")}}
		{{#else}}
			{{=$ctx.doI18N("boolean.false")}}
		{{/if}}
	</td>
	<td>
		<a id='editcharge{{=id}}' class='editcharge' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletecharge{{=id}}' class='deletecharge' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>

	<script id="chargeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	</div>
	<fieldset>
		<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		<legend>{{=$ctx.doI18N("form.legend.charge.details")}}</legend>
		<label for="name">{{=$ctx.doI18N("label.name")}}</label>
		<input id="name" name="name" title="" type="text" value="{{=name}}" size="25"/>
		<label for="amount">{{=$ctx.doI18N("label.amount")}}</label>
		<input id="amount" name="amount" title="" type="text" value="{{=$ctx.decimal(amount, 2)}}" size="25"/>
		<label for="currencyCode">{{=$ctx.doI18N("label.currency")}}</label>
		<select id="currencyCode" name="currencyCode" title="" style="width: 300px;">
        	<option value="">{{=$ctx.doI18N("option.currency.first.choice")}}</option>
			{{#if currency}}
				{{#each currencyOptions}}
	              	{{#if $parent.parent.data.currency.code===code}}
						<option value="{{=code}}" selected="selected">{{=name}}</option>
					{{#else}}
						<option value="{{=code}}">{{=name}}</option>
					{{/if}}
				{{/each}}
			{{#else}}
				{{#each currencyOptions}}
					<option value="{{=code}}">{{=name}}</option>
				{{/each}}
			{{/if}}
		</select>
		<label for="chargeAppliesTo">{{=$ctx.doI18N("form.label.charge.applies.to")}}</label>
		<select id="chargeAppliesTo" name="chargeAppliesTo" title="" style="width: 300px">
			<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
			{{#if chargeAppliesTo}}
				{{#each chargeAppliesToOptions}}
	              	{{#if $ctx.number($parent.parent.data.chargeAppliesTo.id)===$ctx.number(id)}}
						<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
					{{#else}}
						<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
					{{/if}}
				{{/each}}
			{{#else}}
				{{#each chargeAppliesToOptions}}
					<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
				{{/each}}
			{{/if}}
		</select>
		<label for="chargeTimeType">{{=$ctx.doI18N("form.label.charge.time")}}</label>
		<select id="chargeTimeType" name="chargeTimeType" title="" style="width: 300px">
			<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
			{{#if chargeTimeType}}
				{{#each chargeTimeTypeOptions}}
	              	{{#if $ctx.number($parent.parent.data.chargeTimeType.id)===$ctx.number(id)}}
						<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
					{{#else}}
						<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
					{{/if}}
				{{/each}}
			{{#else}}
				{{#each chargeTimeTypeOptions}}
					<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
				{{/each}}
			{{/if}}
		</select>
		<label for="chargeCalculationType">{{=$ctx.doI18N("form.label.charge.calculation.type")}}</label>
		<select id="chargeCalculationType" name="chargeCalculationType" title="" style="width: 300px">
			<option value="">{{=$ctx.doI18N("form.option.select.one")}}</option>
			{{#if chargeCalculationType}}
				{{#each chargeCalculationTypeOptions}}
	              	{{#if $ctx.number($parent.parent.data.chargeCalculationType.id)===$ctx.number(id)}}
						<option value="{{=$ctx.number(id)}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
					{{#else}}
						<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
					{{/if}}
				{{/each}}
			{{#else}}
				{{#each chargeCalculationTypeOptions}}
					<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(code)}}</option>
				{{/each}}
			{{/if}}
		</select>
		<label for="active">{{=$ctx.doI18N("label.active")}}</label>
		{{#if active}}
			<input type="checkbox" id="active" name="active" title="" style="width: 125px;" checked=checked />
		{{#else}}
			<input type="checkbox" id="active" name="active" title="" style="width: 125px;" />
		{{/if}}

		<label for="penalty">{{=$ctx.doI18N("label.isPenalty")}}</label>
		{{#if penalty}}
			<input type="checkbox" id="penalty" name="penalty" title="" style="width: 125px;" checked=checked />
		{{#else}}
			<input type="checkbox" id="penalty" name="penalty" title="" style="width: 125px;" />
		{{/if}}
	</fieldset>
</form>
</script>

	<script id="orgCurrencyFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("legend.currency")}}</legend>

		<div class="multiselectwidget" style="width:400px;height:125px;">
			<label for="notSelectedCurrencies">{{=$ctx.doI18N("form.label.configuration.available.currencies")}}</label>
			<select id="notSelectedCurrencies" name="notSelectedCurrencies" title="" class="multiselectwidget" multiple="multiple" style="width:400px;height:125px;">
			{{#each currencyOptions}}
				{{#if $ctx.number($parent.parent.data.code)===code}}
					<option value="{{=code}}" selected="selected">{{=displayLabel}}</option>
				{{#else}}
					<option value="{{=code}}">{{=displayLabel}}</option>
				{{/if}}
            {{/each}}
			</select>
			<a href="unknown.html" id="addcurrencies" class="multiselectwidget">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
		</div>
				  
		<div class="multiselectwidget">
			<label for="currencies">{{=$ctx.doI18N("form.label.configuration.allowed.currencies")}}</label>
			<select id="currencies" name="currencies" title="" class="multiselectwidget" multiple="multiple" style="width:400px;height:125px;">
			{{#each selectedCurrencyOptions}}
				{{#if $ctx.number($parent.parent.data.code)===code}}
					<option value="{{=code}}" selected="selected">{{=displayLabel}}</option>
				{{#else}}
					<option value="{{=code}}">{{=displayLabel}}</option>
				{{/if}}
            {{/each}}
			</select>
			<a href="unknown.html" id="removecurrencies" class="multiselectwidget">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
		</div>
	</fieldset>
</form>
</script>

	<script id="changePasswordFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" name="changePasswordForm">
    <div id="formerrors"></div>
        <label for="password">{{=$ctx.doI18N("form.label.new.password")}}</label>
		<input id="password" name="password" title="" type="password" value="{{=password}}" size="75"/>

        <label for="repeatPassword">{{=$ctx.doI18N("form.label.repeat.new.password")}}</label>
		<input id="repeatPassword" name="repeatPassword" title="" type="password" value="{{=passwordrepeat}}" size="75"/>
</form>
</script>

	<script id="userSettingsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" name="changeUserSettingsForm">
    <div id="formerrors"></div>
		<label for="username">{{=$ctx.doI18N("label.username")}}</label>
		<input id="username" name="username" title="" type="text" value="{{=username}}" size="75"/>

        <label for="firstname">{{=$ctx.doI18N("label.firstname")}}</label>
		<input id="firstname" name="firstname" title="The first name of user." type="text" value="{{=firstname}}" size="75"/>

        <label for="lastname">{{=$ctx.doI18N("label.lastname")}}</label>
		<input id="lastname" name="lastname" title="The last name of user." type="text" value="{{=lastname}}" size="75"/>

		<label for="email">{{=$ctx.doI18N("label.email")}}</label>
		<input id="email" name="email" title="" type="text" value="{{=email}}" size="75"/>
</form>
</script>

	<script id="userSettingsTemplate" type="text/x-jquery-tmpl">
<h2>{{=$ctx.doI18N("label.office")}}</h2>
<div class="row">
	<span class="rowlabel">{{=$ctx.doI18N("label.office")}}</span>
	<span class="rowvalue">{{=officeName}}</span>
</div>
<br/>

<h2>{{=$ctx.doI18N("form.label.heading.details")}}</h2>
<div class="row">
	<span class="rowlabel">{{=$ctx.doI18N("label.name")}}</span>
	<span class="rowvalue">{{=firstname}}&nbsp;{{=lastname}}</span>
</div>
<div class="row">
	<span class="rowlabel">{{=$ctx.doI18N("label.username")}}</span>
	<span class="rowvalue">{{=username}}</span>
</div>
<div class="row">
	<span class="rowlabel">{{=$ctx.doI18N("label.email")}}</span>
	<span class="rowvalue">{{=email}}</span>
</div>
<div class="row">
	<span class="rowlabel">&nbsp;</span>
	<span class="rowvalue"><a href="#" id="changedetails">{{=$ctx.doI18N("form.link.changedetails")}}</a></span>
</div>
<br/>

<h2>{{=$ctx.doI18N("form.label.heading.security")}}</h2>
<div class="row">
	<span class="rowlabel">{{=$ctx.doI18N("form.label.password")}}</span>
	<span class="rowvalue"><a href="#" id="changepassword">{{=$ctx.doI18N("form.link.changepassword")}}</a></span>
</div>
<br/>

<h2>{{=$ctx.doI18N("form.label.heading.roles")}}</h2>
{{#each selectedRoles}}
<div class="row">
	<span class="rowlabel">&nbsp;</span>
	<span class="rowvalue"><b>{{=name}}</b> - <i>{{=description}}</i></span>
</div>
{{/each}}
</script>

	<script id="permissionListTemplate" type="text/x-jquery-tmpl">
		<div id=permissionsDiv></div>
</script>

	<script id="permissionFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.role.maintainMC")}}</legend>
		<div id=makerCheckerPermissionsDiv></div>
	</fieldset>
</form>
</script>

	<script id="rolePermissionsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.role.permissions")}}</legend>
		<table width="100%">
		  <tr>
		    <td valign="top" width="50%">
			<label for="name">{{=$ctx.doI18N("label.name")}}</label>
			<input title="" type="text" readonly="readonly" value="{{=name}}" size="50"/>
		    </td>
		    <td valign="top" width="50%">
			<label for="description">{{=$ctx.doI18N("form.label.role.description")}}</label>
			<textarea cols="50" rows="2" title="" readonly="readonly" >{{=description}}</textarea>
		    <td>
		  </tr>
		</table>
		<div id=rolePermissionsDiv></div>
	</fieldset>
</form>
</script>

	<script id="roleFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.role.details")}}</legend>

		<label for="name">{{=$ctx.doI18N("label.name")}}</label>
		<input id="name" name="name" title="" type="text" value="{{=name}}" size="75"/>

		<label for="description">{{=$ctx.doI18N("form.label.role.description")}}</label>
		<textarea cols="73" rows="3" id="description" name="description" title="">{{=description}}</textarea>
	</fieldset>
</form>
</script>

	<script id="roleListTemplate" type="text/x-jquery-tmpl">
<table id='rolestable' width='100%'>
<thead>
	<tr>
		<th>{{=$ctx.doI18N("table.heading.name")}}</th>
		<th>{{=$ctx.doI18N("table.heading.description")}}</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=name}}</td>
	<td>{{=description}}</td>
	<td>
		<a id='editrole{{=id}}' class='editrole' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='permissionsrole{{=id}}' class='permissionsrole' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.permissionsrole")}}</a>
		<a id='deleterole{{=id}}' class='deleterole' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="userListTemplate" type="text/x-jquery-tmpl">
<table id='userstable' width='100%'>
<thead>
	<tr>
		<th>{{=$ctx.doI18N("table.heading.officename")}}</th>
		<th>{{=$ctx.doI18N("table.heading.username")}}</th>
        	<th>{{=$ctx.doI18N("table.heading.name")}}</th>
		<th>{{=$ctx.doI18N("table.heading.email")}}</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=officeName}}</td>
	<td>{{=username}}</td>
    <td>{{=lastname}}, {{=firstname}}</td>
	<td>{{=email}}</td>
	<td>
		<a id='edituser{{=id}}' class='edituser' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteuser{{=id}}' class='deleteuser' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
		<a id='changepassworduser{{=id}}' class='changepassworduser' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.changepassword")}}</a>
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="userFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.user.details")}}</legend>

		<label for="username">{{=$ctx.doI18N("label.username")}}</label>
		<input id="username" name="username" title="" type="text" value="{{=username}}" size="75"/>

        <label for="firstname">{{=$ctx.doI18N("label.firstname")}}</label>
		<input id="firstname" name="firstname" title="" type="text" value="{{=firstname}}" size="75"/>

        <label for="lastname">{{=$ctx.doI18N("label.lastname")}}</label>
		<input id="lastname" name="lastname" title="" type="text" value="{{=lastname}}" size="75"/>

		<label for="email">{{=$ctx.doI18N("label.email")}}</label>
		<input id="email" name="email" title="" type="text" value="{{=email}}" size="75"/>

		<label for="officeId">{{=$ctx.doI18N("label.office")}}</label>
		<select id="officeId" name="officeId" title="">
			<option value="-1">{{=$ctx.doI18N("option.office.first.choice")}}</option>
			{{#each allowedOffices}}
				{{#if $ctx.number($parent.parent.data.officeId)===$ctx.number(id)}}
					<option value="{{=$ctx.number(id)}}" selected="selected">{{=nameDecorated}}</option>
				{{#else}}
					<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
				{{/if}}
            {{/each}}
		</select>
		<br/>

		<div class="multiselectwidget">
			<label for="notSelectedRoles">{{=$ctx.doI18N("form.label.user.available.roles")}}</label>
			<select id="notSelectedRoles" name="notSelectedRoles" title="Available application roles." class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:450px;height:125px;">
			{{#each availableRoles}}
				<option value="{{=id}}">{{=name}}</option>
            {{/each}}
			</select>
			<a href="#" id="addroles" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
		</div>
		
		<div class="multiselectwidget">
			<label for="roles">{{=$ctx.doI18N("form.label.user.selected.roles")}}</label>
			<select id="roles" name="roles" title="User selected roles." class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:450px;height:125px;">
			{{#each selectedRoles}}
				<option value="{{=id}}" selected="selected">{{=name}}</option>
            {{/each}}
			</select>
			<a href="#" id="removeroles" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
		</div>
	</fieldset>
</form>
</script>

	<script id="datatableListTemplate" type="text/x-jquery-tmpl">
<table id='datatablestable' width='100%'>
<thead>
	<tr>
		<th>{{=$ctx.doI18N("table.heading.application.table")}}</th>
		<th>{{=$ctx.doI18N("table.heading.registered.datatable")}}</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=applicationTableName}}</td>
	<td>{{=registeredTableName}}</td>
	<td>
		{{#if $ctx.showTask("DEREGISTERDATATABLE")}}
		<a id='deregisterdatatable{{=registeredTableName}}' class='deregisterdatatable' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.deregister")}}</a>
		{{#else}}
		&nbsp;
		{{/if}}
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>


	<script id="datatableFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" name="registerDatatableForm">
    <div id="formerrors"></div>
	<label for="registeredTableName">{{=$ctx.doI18N("form.label.registeredTableName")}}</label>
	<input id="registeredTableName" name="registeredTableName" title="" type="text" value="{{=registeredTableName}}" size="75"/>

       <label for="applicationTableName">{{=$ctx.doI18N("form.label.applicationTableName")}}</label>
	<input id="applicationTableName" name="applicationTableName" title="" type="text" value="{{=applicationTableName}}" size="75"/>
</form>
</script>

	<!-- end of admin templates -->
	<script type="text/javascript">
		function updateCheckbox() {
			var other = $('#interestCompoundingAllowed:checked').val();
			if (other == undefined)
				$("#isInterestWithdrawable").prop("checked", true);
			else
				$("#isInterestWithdrawable").prop("checked", false);

		}
		function showLockinOptions() {
			var other = $('#isLockinPeriodAllowed:checked').val();
			//if (other == undefined){$('#lockinPeriodRow').hide();}
			//else {$('#lockinPeriodRow').show();}
		}
	</script>


	<!-- Audit Search -->
	<script id="auditSearchTemplate" type="text/x-jquery-tmpl">
	<table width="100%"><tr>
		<td>
			<button type="submit" class="searchaudit" id="searchaudit" name="_eventId_submit">{{=$ctx.doI18N("search_audit")}}</button>
		</td>
		<td>
			<label for="auditprocessingresult">{{=$ctx.doI18N("table.heading.audit.processingResult")}}</label>
			<select name="auditprocessingresult" id="auditprocessingresult" >
				<option value="ALL" selected="selected">{{=$ctx.doI18N("option.all")}}</option>
			{{#each processingResults}}
				<option value="{{=$ctx.number(id)}}">{{=$ctx.doI18N(processingResult)}}</option>
	    		{{/each}}
			</select>
		</td>
		<td>
			<label for="auditdatetimefrom">{{=$ctx.doI18N("table.heading.audit.madeOnDateFrom")}}</label>
			<input id="auditdatetimefrom" name="auditdatetimefrom" type="text" class="datepickerfield" />
		</td>
		<td>
			<label for="auditdatetimeto">{{=$ctx.doI18N("table.heading.audit.madeOnDateTo")}}</label>
			<input id="auditdatetimeto" name="auditdatetimeto" type="text" class="datepickerfield" />
		</td>
		<td>
			<label for="auditmaker">{{=$ctx.doI18N("table.heading.audit.maker")}}</label>
			<select name="auditmaker" id="auditmaker" >
				<option value="ALL" selected="selected">{{=$ctx.doI18N("option.all")}}</option>
			{{#each appUsers}}
				<option value="{{=id}}">{{=username}}</option>
	    		{{/each}}
			</select>
		</td>
		<td>
			<label for="auditaction">{{=$ctx.doI18N("table.heading.audit.actionName")}}</label>
			<select name="auditaction" id="auditaction" >
				<option value="ALL" selected="selected">{{=$ctx.doI18N("option.all")}}</option>
			{{#each actionNames}}
				<option value="{{=$data}}">{{=$ctx.doI18N($data)}}</option>
	    		{{/each}}
			</select>
		</td>
		<td>
			<label for="auditentity">{{=$ctx.doI18N("table.heading.audit.entityName")}}</label>
			<select name="auditentity" id="auditentity" >
				<option value="ALL" selected="selected">{{=$ctx.doI18N("option.all")}}</option>
			{{#each entityNames}}
				<option value="{{=$data}}">{{=$ctx.doI18N($data)}}</option>
	    		{{/each}}
			</select>
		</td>
		<td>
			<label for="auditresourceId">{{=$ctx.doI18N("table.heading.audit.resourceId")}}</label>
			<input id="auditresourceId" name="auditresourceId" type="text" size="10" value="" />
		</td>
		<td>
			<label for="auditchecker">{{=$ctx.doI18N("table.heading.audit.checker")}}</label>
			<select name="auditchecker" id="auditchecker" >
				<option value="ALL" selected="selected">{{=$ctx.doI18N("option.all")}}</option>
			{{#each appUsers}}
				<option value="{{=id}}">{{=username}}</option>
	    		{{/each}}
			</select>
		</td>
		<td>
			<label for="auditcheckeddatetimefrom">{{=$ctx.doI18N("table.heading.audit.checkedOnDateFrom")}}</label>
			<input id="auditcheckeddatetimefrom" name="auditcheckeddatetimefrom" type="text" class="datepickerfield" />
		</td>
		<td>
			<label for="auditcheckeddatetimeto">{{=$ctx.doI18N("table.heading.audit.checkedOnDateTo")}}</label>
			<input id="auditcheckeddatetimeto" name="auditcheckeddatetimeto" type="text" class="datepickerfield" />
		</td>
	</tr></table>
	<div id="auditSearchResults"></div>
	
</script>

	<script id="auditListTemplate" type="text/x-jquery-tmpl">
<table id='auditstable' width='100%'>
	<thead>
		<tr>

			<th><b>{{=$ctx.doI18N("table.heading.audit.id")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.processingResult")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.madeOnDate")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.maker")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.actionName")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.entityName")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.resourceId")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.checkedOnDate")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.checker")}}</b></th>
			<th>&nbsp;</th>
		</tr>
	</thead>
	<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=$ctx.doI18N(processingResult)}}</td>
	<td>{{=$ctx.globalDateTime(madeOnDate)}}</td>
	<td>{{=maker}}</td>
	<td>{{=$ctx.doI18N(actionName)}}</td>
	<td>{{=$ctx.doI18N(entityName)}}</td>
	<td>{{=resourceId}}</td>
	<td>{{=$ctx.globalDateTime(checkedOnDate)}}</td>
	<td>{{=checker}}</td>
	<td>
		<a id='viewaudit{{=id}}' class='viewaudit' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewaudit")}}</a>
	</td>
</tr>
{{/each}}
	</tbody>
</table>
</script>


	<script id="auditEntryTemplate" type="text/x-jquery-tmpl">

<table width='100%'>
	<thead>
		<tr>
			<th><b>{{=$ctx.doI18N("table.heading.audit.id")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.processingResult")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.madeOnDate")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.maker")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.actionName")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.entityName")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.resourceId")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.checkedOnDate")}}</b></th>
			<th><b>{{=$ctx.doI18N("table.heading.audit.checker")}}</b></th>
		</tr>
	</thead>
	<tbody>
<tr>
	<td>{{=crudRows.id}}</td>
	<td>{{=$ctx.doI18N(crudRows.processingResult)}}</td>
	<td>{{=$ctx.globalDateTime(crudRows.madeOnDate)}}</td>
	<td>{{=crudRows.maker}}</td>
	<td>{{=$ctx.doI18N(crudRows.actionName)}}</td>
	<td>{{=$ctx.doI18N(crudRows.entityName)}}</td>
	<td>{{=crudRows.resourceId}}</td>
	<td>{{=$ctx.globalDateTime(crudRows.checkedOnDate)}}</td>
	<td>{{=crudRows.checker}}</td>
</tr>
	</tbody>
</table>
<hr>

{{=$ctx.showJson(crudRows.commandAsJson))!}}

</script>



	<!--Ceda client additional data-->
	<script id="ceda_client_additional_data_template"
		type="text/x-jquery-tmpl">

	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Gender_cd", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Date of Birth", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "EducationLevel_cd", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "MaritalStatus_cd", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Number of children", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Citizenship", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "PovertyStatus_cd", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Home address", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Telephone number", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Telephone number (2nd)", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Email address", displayMode)!}}</tr>
			</table>
		  </td>
		</tr>
	</table>
	<hr>

	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Employed", displayMode, 'onChange="CEDA_Functions.onChangeCADEmployed()"')!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "FieldOfEmployment_cd_Field of employment", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Employer name", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Number of years", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Monthly salary", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Self employed", displayMode, 'onChange="CEDA_Functions.onChangeCADSelfEmployed()"')!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "FieldOfEmployment_cd_Field of self-employment", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Business address", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Number of employees", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Monthly salaries paid", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Monthly net income of business activity", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Monthly rent", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Other income generating activities", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Bookkeeping", displayMode)!}}</tr>
			</table>
		  </td>
		</tr>
	</table>
	<hr>

	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Loans with other institutions", displayMode, 'onChange="CEDA_Functions.onChangeCADLoansOther()"')!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "From whom", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Amount", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Interest rate pa", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Number of people depending on overal income", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Bank account", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Business plan provided", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Access to internet", displayMode)!}}</tr>
			</table>
		  </td>
		</tr>
	</table>
	<hr>

	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Introduced by", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Known to introducer since", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Last visited by", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Last visited on", displayMode)!}}</tr>
			</table>
		  </td>
		</tr>
	</table>

</script>
	<script id="ceda_loan_additional_data_template"
		type="text/x-jquery-tmpl">

	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "PurposeOfLoan_cd", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "CollateralType_cd", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Collateral notes", displayMode)!}}</tr>
			</table>
		  </td>
		</tr>
	</table>
	<hr>

	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_Guarantor", displayMode, 'onChange="CEDA_Functions.onChangeLADGuarantor()"')!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Guarantor name", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Guarantor relation", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Guarantor address", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Guarantor telephone number", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr><td></td></tr>
			</table>
		  </td>
		</tr>
	</table>

</script>


	<script id="ceda_impact_measurement_template" type="text/x-jquery-tmpl">
	<table width="100%">
		<tr>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_RepaidOnSchedule", displayMode, 'onChange="CEDA_Functions.onChangeIMRepaid()"')!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "ReasonNotRepaidOnSchedule", displayMode)!}}</tr>
			</table>
		  </td>
		  <td width="2%"></td>
		  <td valign="top" width="49%">
			<table width="100%">
				<tr>{{=$ctx.getDataTableFieldEntry(data, "How was Loan Amount Invested", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Additional Income Generated", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Additional Income Used For", displayMode)!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "YesNo_cd_NewJobsCreated", displayMode, 'onChange="CEDA_Functions.onChangeIMJobs()"')!}}</tr>
				<tr>{{=$ctx.getDataTableFieldEntry(data, "Number of Jobs Created", displayMode)!}}</tr>
			</table>
		  </td>
		</tr>
	</table>
</script>

	<!--Accounting section starts here-->
	<script id="accountingHomeTemplate" type="text/x-jquery-tmpl">
<div id="accountingtabs">
    <ul>
        <li><a href="#journalentry-tab">{{=$ctx.doI18N("Journal Entries")}}</a></li>
        <li><a href="#accountingclosure-tab">{{=$ctx.doI18N("Accounting Closures")}}</a></li>
        <li><a href="#coa-tab">{{=$ctx.doI18N("Chart Of Accounts")}}</a></li>
    </ul>
    <div id="journalentry-tab">
    </div>
    <div id="accountingclosure-tab">
    </div>
    <div id="coa-tab">
    </div>
</div>
</script>

	<script id="chartOfAccountsTemplate" type="text/x-jquery-tmpl">
	<table width="100%">
		<td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
		   		<button id="addglaccount">{{=$ctx.doI18N("button.addGlAccount")}}</button>
			</span>
		</td>
	</table>
	<hr/>
	<div id="coatabs-main">
	    <ul>
	    	<li><a href="#coatabs-all">{{=$ctx.doI18N("tabs.all")}}</a></li>
	        <li><a href="#coatabs-asset">{{=$ctx.doI18N("tabs.assets")}}</a></li>
	        <li><a href="#coatabs-liabilities">{{=$ctx.doI18N("tabs.liabilities")}}</a></li>
	        <li><a href="#coatabs-equity">{{=$ctx.doI18N("tabs.equity")}}</a></li>
	        <li><a href="#coatabs-income">{{=$ctx.doI18N("tabs.income")}}</a></li>
	        <li><a href="#coatabs-expenses">{{=$ctx.doI18N("tabs.expenses")}}</a></li>
	    </ul>
	    <div id="coatabs-all">
	    </div>
	    <div id="coatabs-asset">
	    </div>
	    <div id="coatabs-liabilities">
	    </div>
	    <div id="coatabs-equity">
	    </div>
	    <div id="coatabs-income">
	    </div>
	    <div id="coatabs-expenses">
	    </div>
	</div>	
</script>

	<!--Accounts table results table-->
	<script id="accountsTableTemplate" type="text/x-jquery-tmpl">
	<table id="accountstable" width="100%" >
		<thead>
			<tr>
				<th>{{=$ctx.doI18N("table.heading.accountName")}}</th>
				<th>{{=$ctx.doI18N("table.heading.glCode")}}</th>
				<th>{{=$ctx.doI18N("table.heading.accountType")}}</th>
				<th>{{=$ctx.doI18N("table.heading.disabled")}}</th>
				<th>{{=$ctx.doI18N("table.heading.manualEntriesAllowed")}}</th>
				<th>{{=$ctx.doI18N("table.heading.usedAs")}}</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			{{#each crudRows}}
			<tr>
				<td>{{=name}}</td>
				<td>{{=glCode}}</td>
				<td>{{=$ctx.doI18N(type.code)}}</td>
				<td>
					{{#if disabled == true}}
						{{=$ctx.doI18N("boolean.true")}}
					{{#else}}
						{{=$ctx.doI18N("boolean.false")}}	
					{{/if}}
				</td>
				<td>
					{{#if manualEntriesAllowed == true}}
						{{=$ctx.doI18N("boolean.true")}}
					{{#else}}
					    {{=$ctx.doI18N("boolean.false")}}
					{{/if}}
				</td>
				<td>{{=$ctx.doI18N(usage.code)}}</td>
				<td>
						<span>	
							<button id="glaccountinfo{{=id}}">{{=$ctx.doI18N("label.help.accountInfo")}}</button>
					   		<button id="glaccountedit{{=id}}">{{=$ctx.doI18N("label.help.editAccountInfo")}}</button>
					   		{{#if disabled == true}}
					   			<button id="glaccountenable{{=id}}">{{=$ctx.doI18N("label.help.enableAccountInfo")}}</button>
					   		{{#else}}
					   			<button id="glaccountdisable{{=id}}">{{=$ctx.doI18N("label.help.disableAccountInfo")}}</button>
					   		{{/if}}
					   		<button id="glaccountdelete{{=id}}">{{=$ctx.doI18N("label.help.deleteAccountInfo")}}</button>
					   	</span>
				</td>
			</tr>
			{{/each}}
		</tbody>
	</table>
</script>

	<!--GL Accounts info table-->
	<script id="glAccountsInfoFormTemplate" type="text/x-jquery-tmpl">
<table width="100%" >
	<tr>
		<td>{{=$ctx.doI18N("label.accountName")}}</td>
		<td>{{=name}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.glCode")}}</td>
		<td>{{=glCode}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.classification")}}</td>
		<td>{{=$ctx.doI18N(type.code)}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.description")}}</td>
		<td><textarea readonly rows="7" cols="50">{{=description}}</textarea></td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.manualEntriesAllowed")}}</td>
		<td>
			{{#if manualEntriesAllowed == true}}
				{{=$ctx.doI18N("boolean.true")}}
			{{#else}}
				{{=$ctx.doI18N("boolean.false")}}
			{{/if}}
		</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.isDisabled")}}</td>
		<td>
			{{#if disabled == true}}
				{{=$ctx.doI18N("boolean.true")}}
			{{#else}}
				{{=$ctx.doI18N("boolean.false")}}
			{{/if}}	
		</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.accountUsage")}}</td>
		<td>{{=$ctx.doI18N(usage.code)}}</td>
	</tr>
</table>
</script>

	<!--Add a GL Account form-->
	<script id="glAccountsFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td><label for="name">{{=$ctx.doI18N("label.accountName")}}</label></td>	
			<td><input id="name" name="name" value="{{=name}}" type="text" style="width: 200px"/></td>
		</tr>
		<tr>
			<td><label for="glCode">{{=$ctx.doI18N("label.glCode")}}</label></td>
			<td><input id="glCode" name="glCode" title="" type="text" value="{{=glCode}}"/></td>
		</tr>
		<tr>
			<td><label for="classification">{{=$ctx.doI18N("label.classification")}}</label></td>
			<td>
				<select name="classification" id="classification">
				  {{#each accountTypeOptions}}
						{{#if $parent.parent.data.type.value === value}}
							<option value="{{=id}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
						{{#else}}
							<option value="{{=id}}">{{=$ctx.doI18N(code)}}</option>
						{{/if}}
			      {{/each}}
				</select>
			</td>
		</tr> 
		<tr>
			<td><label for="usage">{{=$ctx.doI18N("label.accountUsage")}}</label></td>
			<td>
				<select name="usage" id="usage">
				  {{#each usageOptions}}
						{{#if $parent.parent.data.usage.value === value}}
							<option value="{{=id}}" selected="selected">{{=$ctx.doI18N(code)}}</option>
						{{#else}}
							<option value="{{=id}}">{{=$ctx.doI18N(code)}}</option>
						{{/if}}
			      {{/each}}
				</select>
			</td>
		</tr>
		<tr>
			<td><label for="manualEntriesAllowed">{{=$ctx.doI18N("label.manualEntriesAllowed")}}</label></td>
			<td>
				{{#if manualEntriesAllowed}}
					<input id="manualEntriesAllowed" name="manualEntriesAllowed" type="checkbox" checked="checked" value="{{=manualEntriesAllowed}}"/>
				{{#else}}
				 	<input id="manualEntriesAllowed" name="manualEntriesAllowed" type="checkbox" value="{{=manualEntriesAllowed}}"/>
				{{/if}} 
			</td>
		</tr>
		<tr>
			<td><label for="description">{{=$ctx.doI18N("label.description")}}</label></td>
			<td><textarea id="description" name="description" rows="8" cols="35">{{=description}}</textarea></td>
		</tr>
	</table>
 </form>
</script>

	<!--Accounting Closures Main page template-->
	<script id="glAccountClosuresTemplate" type="text/x-jquery-tmpl">
	<table width="100%">
		<td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
		   		<button id="addglclosure">{{=$ctx.doI18N("button.addClosureDate")}}</button>
			</span>
		</td>
	</table>
	<hr/>
	<div>
	   <table width="100%">
	   		<td><label for="accountClosuresOfficeId">{{=$ctx.doI18N("label.office")}}</label></td>	
			<td>
				<select id="accountClosuresOfficeId" name="accountClosuresOfficeId" title="">
					<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
					{{#each crudRows}}
						<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
			        {{/each}}
				</select>
				<button id="searchglclosure">{{=$ctx.doI18N("button.searchClosures")}}</button>
			</td>
		</table>
	    <div id="glaccountclosuressearchresults">
	    </div>
	</div>	
</script>

	<!--GL Closures table-->
	<script id="glAccountClosuresTableTemplate" type="text/x-jquery-tmpl">
	<table id="closurestable" width="100%" >
		<thead>
			<tr>
				<th>{{=$ctx.doI18N("table.heading.officename")}}</th>
				<th>{{=$ctx.doI18N("table.heading.closureDate")}}</th>
				<th>{{=$ctx.doI18N("table.heading.closedBy")}}</th>
				<th>{{=$ctx.doI18N("table.heading.closedOn")}}</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			{{#each crudRows}}
			<tr>
				<td>{{=officeName}}</td>
				<td>{{=$ctx.globalDate(closingDate)}}</td>
				<td>{{=createdByUsername}}</td>
				<td>{{=$ctx.globalDate(createdDate)}}</td>
				<td>
					<span>
							<button id="glclosureinfo{{=id}}">View closure details</button>
					   		<button id="glclosureedit{{=id}}">Edit closure comment</button>
					   		<button id="glclosuredelete{{=id}}">Delete this closure</button>
					</span>
				</td>
			</tr>
			{{/each}}
		</tbody>
	</table>
</script>

	<!-- GL Closure Info div-->
	<script id="glAccountClosuresInfoTemplate" type="text/x-jquery-tmpl">
<table id="closurestable" width="100%" >
	<tr>
		<td>{{=$ctx.doI18N("label.office")}}</td>
		<td>{{=officeName}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.closureDate")}}</td>
		<td>{{=$ctx.globalDate(closingDate)}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.comments")}}</td>
		<td><textarea readonly rows="7" cols="50">{{=comments}}</textarea></td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.closedBy")}}</td>
		<td>{{=createdByUsername}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.acc.closedOn")}}</td>
		<td>{{=$ctx.globalDate(createdDate)}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.updatedBy")}}</td>
		<td>{{=lastUpdatedByUsername}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.updatedOn")}}</td>
		<td>{{=$ctx.globalDate(lastUpdatedDate)}}</td>
	</tr>
</table>
</script>

	<!--Add a GL closure form-->
	<script id="glAccountClosuresFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td><label for="name">{{=$ctx.doI18N("label.office")}}</label></td>
			<td>
				<select id="officeId" name="officeId" title="">
					<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
					{{#each crudRows}}
						<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
			        {{/each}}
				</select>
			</td>
		</tr>
		<tr>
			<td><label for="closingDate">{{=$ctx.doI18N("label.closureDate")}}</label></td>
			<td>
				<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
				<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
				<input id="closingDate" name="closingDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(closingDate)}}"/>
			</td>
		</tr>
		<tr>
			<td><label for="comments">{{=$ctx.doI18N("label.comments")}}</label></td>
			<td><textarea id="comments" name="comments" rows="8" cols="35">{{=description}}</textarea></td>
		</tr>
	</table>
 </form>
</script>

	<!--Edit a GL Closure form-->
	<script id="glAccountClosuresEditFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
			<td><label for="name">{{=$ctx.doI18N("label.office")}}</label></td>	
			<td>{{=officeName}}</td>
		</tr>
		<tr>
			<td><label for="closingDate">{{=$ctx.doI18N("label.closureDate")}}</label></td>
			<td>{{=$ctx.globalDate(closingDate)}}</td>
		</tr>
		<tr>
			<td><label for="comments">{{=$ctx.doI18N("label.comments")}}</label></td>
			<td><textarea id="comments" name="comments" rows="8" cols="35">{{=comments}}</textarea></td>
		</tr>
	</table>
 </form>
</script>

	<!--Journal Entries Main page template-->
	<script id="journalEntriesTemplate" type="text/x-jquery-tmpl">
	<table width="100%">
		<td align="center">
			<span id="toolbar" class="ui-widget-header ui-corner-all">
		   		<button id="addjournalentry">{{=$ctx.doI18N("button.addjournalentry")}}</button>
			</span>
		</td>
	</table>
	<hr/>
	<div>
	   <input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	   <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		
	   	<table width="100%">
	   		<tr>
		   		<td>
		   			<label for="accountId">{{=$ctx.doI18N("label.accountName")}}</label>
					<select id="accountId" name="accountId" title="" >
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each accounts}}
							<option value="{{=id}}">{{=name}}({{=glCode}})</option>
				        {{/each}}
				    </select>
				</td>
		   		<td>
		   			<label for="journalEntryOfficeId">{{=$ctx.doI18N("label.office")}}</label>	
					<select id="journalEntryOfficeId" name="officeId" title="">
						<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
						{{#each offices}}
							<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
				        {{/each}}
					</select>
				</td>
				<td>
		   			<label for="includePortfolioPostings">{{=$ctx.doI18N("label.includePortfolioSavings")}}</label>
					<input id="includePortfolioPostings" name="includePortfolioPostings" type="checkbox" checked="checked"/>
				</td>
				<td>
					<label for="fromDate">{{=$ctx.doI18N("label.fromDate")}}</label>
					<input id="fromDate" name="fromDate" title="" type="text" class="datepickerfieldforaccounting"/>
				</td>
				<td>
					<label for="toDate">{{=$ctx.doI18N("label.toDate")}}</label>
					<input id="toDate" name="toDate" title="" type="text" class="datepickerfieldforaccounting"/>
				</td>
			</tr>
			<tr>
				<td colspan="5" align="center">
					<button id="searchjournalentries">{{=$ctx.doI18N("button.journalentry.search")}}</button>
				</td>
			</tr>
		</table>
		<br/>
	    <div id="journalentriessearchresults">
	    </div>
	</div>	
</script>

	<!--Journal entries table-->
	<script id="journalEntriesTableTemplate" type="text/x-jquery-tmpl">
	<table id="journalentriestable" width="100%" >
		<thead>
			<tr>
				<th>{{=$ctx.doI18N("table.heading.officename")}}</th>
				<th>{{=$ctx.doI18N("table.heading.entryDate")}}</th>
				<th>{{=$ctx.doI18N("table.heading.classification")}}</th>
				<th>{{=$ctx.doI18N("table.heading.accountName")}}</th>
				<th>{{=$ctx.doI18N("table.heading.createdBy")}}</th>
				<th>{{=$ctx.doI18N("table.heading.entryId")}}</th>
				<th>{{=$ctx.doI18N("table.heading.transactionId")}}</th>
				<th>{{=$ctx.doI18N("table.heading.credit")}}</th>
				<th>{{=$ctx.doI18N("table.heading.debit")}}</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			{{#each crudRows}}
			<tr>
				<td>{{=officeName}}</td>
				<td>{{=$ctx.globalDate(entryDate)}}</td>
				<td>{{=glAccountClassification.value}}</td>
				<td>{{=glAccountName}}</td>
				<td>{{=createdByUserName}}</td>
				<td>{{=id}}</td>
				<td>{{=transactionId}}</td>
				<td>
					{{#if entryType.value == "CREDIT"}}
						{{=$ctx.decimal(amount, 2)}}
					{{/if}}
				</td>
				<td>
					{{#if entryType.value == "DEBIT"}}
						{{=$ctx.decimal(amount, 2)}}
					{{/if}}
				</td>
				<td>
					<span>
						<button id="glentryinfo{{=id}}">View Entry Details</button>
						{{#if portfolioGenerated}}
				   			<!-- No buttons-->
				   		{{else}}
							{{#if reversed == false}}
					   			<button id="glentryreversal{{=id}}">Reverse this Journal Entry</button>
					   		{{/if}}
				   		{{/if}}
					</span>
				</td>
			</tr>
			{{/each}}
		</tbody>
	</table>
</script>

	<!-- Journal Entry Info template-->

	<script id="journalEntryInfoFormTemplate" type="text/x-jquery-tmpl">
<table width="100%" >
	<tr>
		<td>{{=$ctx.doI18N("label.office")}}</td>
		<td>{{=officeName}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.entryDate")}}</td>
		<td>{{=$ctx.globalDate(entryDate)}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.entryId")}}</td>
		<td>{{=id}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.transactionId")}}</td>
		<td>{{=transactionId}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.accountName")}}</td>
		<td>{{=glAccountName}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.classification")}}</td>
		<td>{{=glAccountClassification}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.transactionType")}}</td>
		<td>{{=entryType}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.createdBy")}}</td>
		<td>{{=createdByUserName}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.createdDate")}}</td>
		<td>{{=$ctx.globalDate(createdDate)}}</td>
	</tr>
	<tr>
		<td>{{=$ctx.doI18N("label.comments")}}</td>
		<td><textarea readonly rows="7" cols="50">{{=comments}}</textarea></td>
	</tr>
</table>
</script>

	<!--Add a Journal entry form-->
	<script id="journalEntryFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform" >
	<div id="formerrors"></div>
	<div>
		<b>{{=$ctx.doI18N("label.debit")}}</b>
		<button id="addDebit">{{=$ctx.doI18N("button.debit.add")}}</button>
	</div>
	<div id="debits">
		<p>
			<label for="debitAccountId1" style="display: inline">
				<select id="debitAccountId1"  title="">
					<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
					{{#each accounts}}
					<option value="{{=id}}">{{=name}}({{=glCode}})</option>
					{{/each}}
				</select> </label>
			<label for="debitAmount1" style="display: inline">
				<input type="number" id="debitAmount1" size="20" value="" placeholder="Input Amount" />
			</label>
		</p>
	</div>
	<div>
		<b>{{=$ctx.doI18N("label.credit")}}</b>
		<button id="addCredit">{{=$ctx.doI18N("button.credit.add")}}</button>
	</div>
	<div id="credits">
		<p>
			<label for="creditAccountId1" style="display: inline">
				<select id="creditAccountId1"  title="">
					<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
					{{#each accounts}}
					<option value="{{=id}}">{{=name}}({{=glCode}})</option>
					{{/each}}
				</select> </label>
			<label for="creditAmount1" style="display: inline">
				<input type="number" id="creditAmount1" size="20" value="" placeholder="Input Amount" />
			</label>
		</p>
	</div>

	<table width="100%">
		<tr>
			<td><label for="officeId">{{=$ctx.doI18N("label.office")}}</label></td>
			<td>
			<select id="officeId" name="officeId" title="">
				<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
				{{#each offices}}
				<option value="{{=$ctx.number(id)}}">{{=nameDecorated}}</option>
				{{/each}}
			</select></td>
		</tr>
		<tr>
			<td><label for="entryDate">{{=$ctx.doI18N("label.entryDate")}}</label></td>
			<td>
			<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
			<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
			<input id="entryDate" name="entryDate" title="" type="text" class="datepickerfield" />
			</td>
		</tr>
		<tr>
			<td><label for="comments">{{=$ctx.doI18N("label.comments")}}</label></td>
			<td><textarea id="comments" name="comments" rows="5" cols="45">{{=comments}}</textarea></td>
		</tr>
	</table>
</form>
</script>

	<!--Add a Journal entry sub template-->
	<script id="singleDebitOrCreditEntryTemplate" type="text/x-jquery-tmpl">
<p>
	<label for="{{=accountId}}" style="display: inline">
		<select id="{{=accountId}}"  title="">
			<option value="">{{=$ctx.doI18N("option.office.first.choice")}}</option>
			{{#each accounts}}
			<option value="{{=id}}">{{=name}}({{=glCode}})</option>
			{{/each}}
		</select> </label>
	<label for="{{=amountId}}" style="display: inline">
		<input type="number" id="{{=amountId}}" size="20" value="" placeholder="Input Amount" />
	</label>
	<button id="{{=deleteButtonId}}"> {{=activity}} </button>
</p>
</script>

	<script id="savingAccountDataTabTemplate" type="text/x-jquery-tmpl">

{{#each permissions}}
{{#if anyActionOnAccountAllowed}}
<div id="savingaccountactions">
	<span id="toolbar" class="ui-widget-header ui-corner-all">
		{{#if rejectAllowed}}
		<button id="rejectsavingbtn{{=$parent.parent.parent.data.id}}" class="rejectsavingapplication">Reject</button>
		{{/if}}
		
		{{#if withdrawnByApplicantAllowed}}
		<button id="withdrawbyapplicantbtn{{=$parent.parent.parent.data.id}}" class="savingwithdrawnbyapplicant">Withdrawn By Applicant</button>
		{{/if}}
		
		{{#if pendingApproval}}
		<button id="savingapprovebtn{{=$parent.parent.parent.data.id}}" class="approvesavingapplication">Approve</button>
		{{/if}}
		
		{{#if undoApprovalAllowed}}
		<button id="savingwithdrawbtn{{=$parent.parent.parent.data.id}}" class="withdrawsavingamount">Withdraw Total Amount </button>
		{{/if}}

		{{#if undoApprovalAllowed}}
		<button id="savingpaymentbtn{{=$parent.parent.parent.data.id}}" class="paysavinginstallment">Pay Saving Installments</button>
		{{/if}}
		
		{{#if pendingApproval}}
		<button id="modifysavingbtn{{=$parent.parent.parent.data.id}}" class="modifysavingapplication">Modify</button>
		{{/if}}

		{{#if undoApprovalAllowed}}
		{{#if renewelAllowed}}
		<button id="renewsavingbtn{{=$parent.parent.parent.parent.data.id}}" class="renewsavingaccount">Renew </button>
		{{/if}}
		{{/if}}
		
		{{#if pendingApproval}}
		<button id="deletesavingbtn{{=$parent.parent.parent.data.id}}" class="deletesavingapplication">Delete</button>
		{{/if}}
	
        {{#if undoApprovalAllowed}}
		<button id="undosavingapprovebtn{{=$parent.parent.parent.data.id}}" class="undoapprovesavingapplication">Undo Approval</button>
		{{/if}}
	</span>
</div>
{{/if}}
{{/each}}

<div id="savingtabs{{=id}}" class="savingtabs">
	<ul>
		<li><a href="#details{{=id}}" title="details">{{=$ctx.doI18N("tab.details")}}</a></li>
		{{#each savingScheduleData}}
		<li><a href="#schedule{{=id}}" title="schedule">{{=$ctx.doI18N("tab.repaymentSchedule")}}</a></li>
        {{/each}}
		{{#if transactions}}
		<li><a href="#transactions{{=id}}" title="transactions">{{=$ctx.doI18N("tab.transactions")}}</a></li>
		{{/if}}
	</ul>
	<div id="details{{=id}}" style="margin-top: 5px;">
		
		<div class="row">
			<span class="longrowlabel"><b>{{=$ctx.doI18N("form.label.saving.account.type")}}</b></span>
			<span class="rowvalue"><b>{{=productType.value}}</b></span>
		</div>	

		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.status")}}</span>
			<span class="rowvalue">{{=$ctx.doI18N(status.code)}}</span>
		</div>
		{{#if submittedOnDate}}
			<div class="row">
				<span class="longrowlabel">{{=$ctx.doI18N("label.submitted.on")}}</span>
				<span class="rowvalue">{{=$ctx.globalDate(projectedCommencementDate)}}</span>
			</div>
		{{/if}}

		{{#if actualCommencementDate}}
			<div class="row">
				<span class="longrowlabel">{{=$ctx.doI18N("label.approved.on")}}</span>
				<span class="rowvalue">{{=$ctx.globalDate(actualCommencementDate)}}</span>
			</div>
		{{/if}}

		{{#if maturedOn}}
			<div class="row">
				<span class="longrowlabel">{{=$ctx.doI18N("label.client.account.deposit.matured.on")}}</span>
				<span class="rowvalue">{{=$ctx.globalDate(maturedOn)}}</span>
			</div>
		{{/if}}

		{{#if closedonDate}}
			<div class="row">
				<span class="longrowlabel">{{=$ctx.doI18N("label.client.account.deposit.closed.on")}}</span>
				<span class="rowvalue">{{=$ctx.globalDate(closedonDate)}}</span>
			</div>
		{{/if}}

		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.product")}}</span>
			<span class="rowvalue">{{=productName}}</span>
		</div>

		{{#if externalId}}
			<div class="row">
				<span class="longrowlabel">{{=$ctx.doI18N("label.externalId")}}</span>
				<span class="rowvalue">{{=externalId}}</span>
			</div>
		{{/if}}
		
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.currency")}}</span>
			<span class="rowvalue">{{=currencyData.name}}</span>
		</div>
		
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.savingsDepositAmountPerPeriod")}}</span>
			<span class="rowvalue">{{=$ctx.moneyFormatted(currencyData, savingsDepositAmountPerPeriod)}}</span>
		</div>

		{{#if $ctx.decimal(actualMaturityAmount, 2)>0}}
			<div class="row">
				<span class="longrowlabel">{{=$ctx.doI18N("label.actualMaturityAmount")}}</span>
				<span class="rowvalue">{{=$ctx.moneyFormatted(currencyData, actualMaturityAmount)}}</span>
			</div>
		{{/if}}	
		
		{{#if projectedMaturityAmount}}
			<div class="row">
				<span class="longrowlabel">{{=$ctx.doI18N("label.projectedMaturityAmount")}}</span>
				<span class="rowvalue">{{=$ctx.moneyFormatted(currencyData, projectedMaturityAmount)}}</span>
			</div>
		{{/if}}

		{{#if $ctx.decimal(outstandingAmount, 2)>0}}
			<div class="row">
				<span class="longrowlabel">{{=$ctx.doI18N("label.outstandingAmount")}}</span>
				<span class="rowvalue">{{=$ctx.moneyFormatted(currencyData, outstandingAmount)}}</span>
			</div>
		{{/if}}

		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interestcompoundevery")}}</span>
			<span class="rowvalue">{{=interestPostEvery}} month(s)</span>
		</div>
		
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interestType")}}</span>
			{{#if interestType.id === 2}}
				<span class="rowvalue">Compound</span>
			{{else}}
				<span class="rowvalue">Simple</span>
			{{/if}}
		</div>

		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interestCalculationMethod")}}</span>
			{{#if interestCalculationMethod.id === 1}}
				<span class="rowvalue">Average Balance</span>
			{{else}}
				<span class="rowvalue">Monthly Collection</span>
			{{/if}}
		</div>
		
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.tenure")}}</span>
			<span class="rowvalue">{{=tenureInMonths}} month(s)</span>
		</div>

		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.depositEvery")}}</span>
			<span class="rowvalue">{{=depositEvery}} month(s)</span>
		</div>
		
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interest.rate.on.maturity")}}</span>
			<span class="rowvalue">{{=$ctx.decimal(recurringInterestRate, 4)}}%</span>
		</div>
		
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.interest.rate.on.preclose")}}</span>
			<span class="rowvalue">{{=$ctx.decimal(savingInterestRate, 4)}}%</span>
		</div>
		
		<div class="row">
			<span class="longrowlabel">{{=$ctx.doI18N("label.lockin.period")}}</span>
			{{#if isLockinPeriodAllowed}}
				<span class="rowvalue">{{=lockinPeriod}} month(s).</span>
			{{else}}
				<span class="rowvalue">Not applicable.</span>
			{{/if}}
		</div>
	</div>

	{{#each savingScheduleData}}
	<div id="schedule{{=id}}" style="margin-top: 5px;">
		<table id="repaymentschedule_todate{{=id}}" class="pretty displayschedule">
			<caption>{{=$ctx.doI18N("tab.client.account.saving.schedule.table.caption")}}</caption>

			<thead>
				<tr>
					<th scope="col">#</th>
					<th scope="col">{{=$ctx.doI18N("tab.client.account.saving.schedule.table.column.heading.date")}}</th>
					<th scope="col">Amountperperiod</th>
					<th scope="col">Interest Accured</th>
					<th scope="col">AmountPaid</th>
				</tr>
			</thead>
			<tbody>
			{{#each periods}}
			<tr>
				<td scope="row">{{=$ctx.number(period)}}</td>
				<td>{{=$ctx.globalDate(dueDate)}}</td>
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, depositDue)}}</td>
			<td>{{=$ctx.monetaryValue($parent.parent.data.currency, interestAccured)}}</td>
				<td>{{=$ctx.monetaryValue($parent.parent.data.currency, depositPaid)}}</td>
			</tr>
			{{/each}}
			</tbody>
			<tfoot>
				<tr>
					<td scope="row" align="center"><b>Total</b></td>
					<td align="center">#</td>
					<td align="center"><b>{{=$ctx.monetaryValue(currency, cumulativeDepositDue)}}</b></td>
					<td align="center"><b>{{=$ctx.monetaryValue(currency, cummulativeInterestAccured)}}</b></td>
					<td align="center"><b>{{=$ctx.monetaryValue(currency, cumulativeDepositPaid)}}</b></td>
				</tr>
			</tfoot>
		</table>
	</div>
	{{/each}}
		
	{{#if transactions}}
	<div id="transactions{{=id}}" style="margin-top: 5px;">
	<table id="newrepaymentsactivity{{=id}}" class="pretty displaypayments">
	<caption>{{=$ctx.doI18N("tab.client.account.saving.transactions.activity.caption")}}</caption>
	<thead>
		<tr>
			<th>{{=$ctx.doI18N("tab.client.account.saving.transaction.table.column.heading.transactionId")}}</th>
			<th>{{=$ctx.doI18N("tab.client.account.saving.transaction.table.column.heading.transactiondate")}}</th>
			<th>{{=$ctx.doI18N("tab.client.account.saving.transaction.table.column.heading.transactionType")}}</th>
			<th>{{=$ctx.doI18N("tab.client.account.saving.transaction.table.column.heading.amount")}}</th>
		</tr>
	</thead>
	<tbody>
	{{#each transactions}}
		<tr>
			<td>{{=$ctx.number(id)}}</td>
			<td>{{=$ctx.globalDate(transactionDate)}}</td>
			<td>{{=$ctx.doI18N(transactionType.code)}}</td>
			<td>{{=$ctx.monetaryValue($parent.parent.data.savingScheduleData.currency, amount)}}</td>
	{{/each}}
	</tbody>
	</table>
	</div>
	{{/if}}
</div>
</script>

	<script id="newSavingAccountFormTemplateMin" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />

<label for="clientname">{{=$ctx.doI18N("form.label.deposit.applicant")}}</label>
<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" />

<label for="productId">{{=$ctx.doI18N("label.product")}}</label>
<select name="productId" id="productId">
<option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
{{#each productOptions}}
{{#if $ctx.number($parent.parent.data.productId)===$ctx.number(id)}}
<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
{{#else}}
<option value="{{=$ctx.number(id)}}">{{=name}}</option>
{{/if}}
{{/each}}
</select>
</form>
</script>

	<script id="newSavingAccountFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<input type="hidden" id="currencyCode" name="currencyCode" value="{{=currencyData.code}}" />
	<input type="hidden" id="digitsAfterDecimal" name="digitsAfterDecimal" value="{{=currencyData.decimalPlaces}}" />

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.saving.information")}}</legend>
		<div>
			<table>
				<tr>
					<td><b>{{=$ctx.doI18N("form.label.saving.account.type")}}</b></td>
					<td><b>{{=productType.value}}</b></td>
				</tr>
			</table>
			<table id="productdetails">
				<tr>
					<td valign="top">

						<label for="clientname">{{=$ctx.doI18N("form.label.deposit.applicant")}}</label>
						<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" />

						<label for="productId">{{=$ctx.doI18N("label.product")}}</label>
						<select name="productId" id="productId">
							<option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
							{{#each productOptions}}
							{{#if $ctx.number($parent.parent.data.productId)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
							{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=name}}</option>
							{{/if}}
							{{/each}}
						</select>
					</td>
					<td style="text-align:right;vertical-align:bottom;width:50px;">&nbsp;</td>
					<td valign="top">
						<label for="commencementDate">{{=$ctx.doI18N("label.commencementDate")}}</label>
						<input id="commencementDate" name="commencementDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(projectedCommencementDate)}}" />
						<label for="externalId">{{=$ctx.doI18N("form.label.deposit.externalId")}}</label>
						<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}" />
					</td>
				</tr>
			</table>
		</div>
	</fieldset>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.saving.product.saving.terms")}}</legend>
			<table>
			<tr>
				<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.product.saving.amount")}}</td>
							<td>
								<input id="savingsDepositAmountPerPeriod" name="savingsDepositAmountPerPeriod" title="" type="text" value="{{=$ctx.decimal(savingsDepositAmountPerPeriod, currencyData.decimalPlaces)}}" style="width: 125px;" />
								<input id="currencyCode" name="currencyCode" title="" type="text" value="{{=currencyData.code}}" style="width: 40px;" disabled="disabled" />
							</td>
						</tr>
						<tr>
						<td>{{=$ctx.doI18N("form.label.saving.product.minbalforwithdrawal")}}</td>
						<td>
						<input id="minimumBalanceForWithdrawal" name="minimumBalanceForWithdrawal" title="" style="width: 125px;" value="{{=$ctx.decimal(100, currencyData.decimalPlaces)}}" />
						<input id="currencyCode" title="" type="text" value="{{=currencyData.code}}" style="width: 40px;" disabled="disabled" />	
						</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.tenure")}}</td>
							<td>
								<input id="tenure" name="tenure" title="" type="text" value="{{=$ctx.number(tenure)}}" style="width: 50px;"/>
								<select name="tenureType" id="tenureType"  title="">
								{{#each tenureTypeOptions}}
									{{#if $ctx.number($parent.parent.data.tenureType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
									{{/if}}
								{{/each}}
								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.account.deposit.money.every")}}</td>
							<td>
								<input id="depositEvery" name="depositEvery" title="" type="text" value="{{=$ctx.number(depositEvery)}}" style="width: 50px;" />
								
								<select name="depositfrequency" id="depositfrequency"  title="" style="width: 121px;">
								{{#each savingFrequencyOptions}}
								{{#if $ctx.number($parent.parent.data.savingsFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.account.isLockinPeriodAllowed")}}</td>
						<td>
							{{#if isLockinPeriodAllowed}}
							<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.account.ispartialdepositallowed")}}</td>
					<td>
						{{#if isPartialDepositAllowed}}
						<input type="checkbox" id="isPartialDepositAllowed" name="isPartialDepositAllowed" title="" style="width: 125px;" checked=checked />
						{{#else}}
						<input type="checkbox" id="isPartialDepositAllowed" name="isPartialDepositAllowed" title="" style="width: 125px;" />
						{{/if}}
					</td>
				</tr>
					</table>
				</td>

				<!-- interest details cell -->
				<td valign="top" style="padding-left: 5px; padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.interestCalculationMethod")}}</td>
							<td>-<select name="interestCalculationMethod" id="interestCalculationMethod"  title="">
									{{#each interestCalculationOptions}}
										{{#if $ctx.number($parent.parent.data.interestCalculationMethod.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
										{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
										{{/if}}
        							{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.recurring.interestrate")}}</td>
							<td>
								<input id="recurringInterestRate" name="recurringInterestRate" title="" type="text" value="{{=$ctx.decimal(recurringInterestRate, currencyData.decimalPlaces)}}" style="width: 60px;" />
							   -<select name="interestType" id="interestType"  title="">
									{{#each savingsInterestTypeOptions}}
										{{#if $ctx.number($parent.parent.data.interestType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
										{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
										{{/if}}
        							{{/each}}
  								</select>	
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.regular.interestrate")}}</td>
							<td>
								<input id="savingInterestRate" name="savingInterestRate" title="" type="text" value="{{=$ctx.decimal(savingInterestRate, currencyData.decimalPlaces)}}" style="width: 60px;" />
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.interest.compounding.every")}}</td>
							<td>
								<input id="interestPostEvery" name="interestPostEvery" title="" type="text" value="{{=$ctx.number(interestPostEvery)}}" style="width: 50px;" />
								
								<select name="interestPostFrequency" id="interestPostFrequency"  title="" style="width: 121px;">
								{{#each savingFrequencyOptions}}
								{{#if $ctx.number($parent.parent.data.savingsFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
					</tr>
					<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.lockin.period")}}</td>
							<td>
								<input id="lockinPeriod" name="lockinPeriod" title="" type="text" value="{{=$ctx.number(lockinPeriod)}}" style="width: 50px;" />
								
								<select name="lockinPeriodType" id="lockinPeriodType"  title="" style="width: 121px;">
								{{#each lockinPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.lockinPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
					</tr>

					</table>
				</td>
				<td>
				<!-- Other options -->
					<div>
						<span id="toolbar" class="ui-widget-header ui-corner-all">
							<button type="submit" class="submitsavingapp" id="submitsavingaccountapp" name="_eventId_submit"  title="Submit saving application.">Submit saving application</button>
							<button type="submit" class="cancelsavingapp" id="cancelsavingaccountapp" name="_eventId_cancel" title="Cancel saving application.">Cancel</button>
						</span>
					</div>
				<!-- other options -->
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>
	<script id="stateTransitionSavingFormTemplateForApprove"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />

	<label for="commencementDate">{{=$ctx.doI18N("label.commencementDate")}}</label>
	<input id="commencementDate" name="commencementDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(projectedCommencementDate)}}" />

	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="2" cols="53" id="note" name="note"></textarea>

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.deposit.product.deposit.terms")}}</legend>
		<table>
			<tr>
				<td valign="top" style="padding-right: 5px; border-right: 0px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.deposit.amount")}}</td>
							<td>
								<input id="savingsDepositAmountPerPeriod" name="savingsDepositAmountPerPeriod" title="" type="text" value="{{=$ctx.decimal(savingsDepositAmountPerPeriod, $ctx.number(currencyData.decimalPlaces))}}" style="width: 125px;" />
								<input id="currencyCode" name="currencyCode" title="" type="text" value="{{=currencyData.code}}" style="width: 40px;" disabled="disabled" />
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.product.minbalforwithdrawal")}}</td>
							<td>
								<input id="minimumBalanceForWithdrawal" name="minimumBalanceForWithdrawal" title="" style="width: 125px;" value="{{=$ctx.decimal(minimumBalanceForWithdrawal, currencyData.decimalPlaces)}}" />
								<input id="currencyCode" title="" type="text" value="{{=currencyData.code}}" style="width: 40px;" disabled="disabled" />	
							</td>
						</tr>			
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.recurring.interestrate")}}</td>
							<td>
								<input id="recurringInterestRate" name="recurringInterestRate" title="" type="text" value="{{=$ctx.decimal(recurringInterestRate, currencyData.decimalPlaces)}}" style="width: 60px;" />
							   -<select name="interestType" id="interestType"  title="">
									{{#each savingsInterestTypeOptions}}
										{{#if $ctx.number($parent.parent.data.interestType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
										{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
										{{/if}}
        							{{/each}}
  								</select>	
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.regular.interestrate")}}</td>
							<td>
								<input id="savingInterestRate" name="savingInterestRate" title="" type="text" value="{{=$ctx.decimal(savingInterestRate, currencyData.decimalPlaces)}}" style="width: 60px;" />
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.tenure")}}</td>
							<td>
								<input id="tenure" name="tenure" title="" type="text" value="{{=$ctx.number(tenure)}}" style="width: 50px;" />
								<select name="tenureType" id="tenureType"  title="">
								{{#each tenureTypeOptions}}
									{{#if $ctx.number($parent.parent.data.tenureType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
									{{/if}}
        						{{/each}}
  								</select>	
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.account.deposit.money.every")}}</td>
							<td>
								<input id="payEvery" name="payEvery" title="" type="text" value="{{=$ctx.number(depositEvery)}}" style="width: 50px;" />
								
								<select name="frequency" id="frequency"  title="" style="width: 121px;">
								{{#each savingFrequencyOptions}}
								{{#if $ctx.number($parent.parent.data.savingsFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.interest.compounding.every")}}</td>
							<td>
								<input id="interestPostEvery" name="interestPostEvery" title="" type="text" value="{{=$ctx.number(interestPostEvery)}}" style="width: 50px;" />
								
								<select name="interestPostFrequency" id="interestPostFrequency"  title="" style="width: 121px;">
								{{#each savingFrequencyOptions}}
								{{#if $ctx.number($parent.parent.data.savingsFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>

	<script id="paySavingInstallmentsFormTemplate"
		type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />

	<table>
		<tr>
			<td>{{=$ctx.doI18N("form.label.saving.amount.payment.date")}}</td>
			<td>
			<input id="depositDate" name="depositDate" title="" class="datepickerfield" />
			</td>
		</tr>
	
		<tr>
			<td>{{=$ctx.doI18N("form.label.saving.installment.amount")}}</td>
			<td>
			<input id="savingsDepositAmountPerPeriod" name="savingsDepositAmountPerPeriod" title="" type="text" value="{{=$ctx.decimal(dueAmount, 2)}}" style="width: 125px;"/>
			</td>
		</tr>

	</table>	
	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="3" cols="40" id="note" name="note"></textarea>

</form>
</script>

	<script id="withdrawSavingAmountFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />

	<table>
		<tr>
			<td>{{=$ctx.doI18N("form.label.saving.amount.payment.date")}}</td>
			<td>
			<input id="transactionDate" name="transactionDate" title="" class="datepickerfield" />
			</td>
		</tr>
	
		<tr>
			<td>{{=$ctx.doI18N("form.label.saving.installment.amount")}}</td>
			<td>
			<input id="amount" name="amount" title="" type="text" value="{{=$ctx.decimal(outstandingAmount, 2)}}" style="width: 125px;"/>
			</td>
		</tr>

	</table>	
	<label for="note">{{=$ctx.doI18N("label.note")}}</label>
	<textarea rows="3" cols="40" id="note" name="note"></textarea>

</form>
</script>
	<script id="modifySavingAccountFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	<input type="hidden" id="dateFormat" name="dateFormat" value="{{=$ctx.currentDateFormat()}}" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<input type="hidden" id="currencyCode" name="currencyCode" value="{{=currencyData.code}}" />
	<input type="hidden" id="digitsAfterDecimal" name="digitsAfterDecimal" value="{{=currencyData.decimalPlaces}}" />

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.saving.information")}}</legend>
		<div>
			<table>
				<tr>
					<td><b>{{=$ctx.doI18N("form.label.saving.account.type")}}</b></td>
					<td><b>{{=productType.value}}</b></td>
				</tr>
			</table>
			<table id="productdetails">
				<tr>
					<td valign="top">

						<label for="clientname">{{=$ctx.doI18N("form.label.deposit.applicant")}}</label>
						<input id="clientname" name="clientName" title="" type="text" value="{{=clientName}}" disabled="disabled" />

						<label for="productId">{{=$ctx.doI18N("label.product")}}</label>
						<select name="productId" id="productId">
							<option value="-1">{{=$ctx.doI18N("option.product.first.choice")}}</option>
							{{#each productOptions}}
							{{#if $ctx.number($parent.parent.data.productId)===$ctx.number(id)}}
							<option value="{{=$ctx.number(id)}}" selected="selected">{{=name}}</option>
							{{#else}}
							<option value="{{=$ctx.number(id)}}">{{=name}}</option>
							{{/if}}
							{{/each}}
						</select>
					</td>
					<td style="text-align:right;vertical-align:bottom;width:50px;">&nbsp;</td>
					<td valign="top">
						<label for="commencementDate">{{=$ctx.doI18N("label.commencementDate")}}</label>
						<input id="commencementDate" name="commencementDate" title="" type="text" class="datepickerfield" value="{{=$ctx.globalDate(projectedCommencementDate)}}" />
						<label for="externalId">{{=$ctx.doI18N("form.label.deposit.externalId")}}</label>
						<input id="externalId" name="externalId" title="" type="text" value="{{=externalId}}" />
					</td>
				</tr>
			</table>
		</div>
	</fieldset>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.saving.product.saving.terms")}}</legend>
			<table>
			<tr>
				<td valign="top" style="padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.product.saving.amount")}}</td>
							<td>
								<input id="savingsDepositAmountPerPeriod" name="savingsDepositAmountPerPeriod" title="" type="text" value="{{=$ctx.decimal(savingsDepositAmountPerPeriod, currencyData.decimalPlaces)}}" style="width: 125px;" />
								<input id="currencyCode" name="currencyCode" title="" type="text" value="{{=currencyData.code}}" style="width: 40px;" disabled="disabled" />
							</td>
						</tr>
						<tr>
						<td>{{=$ctx.doI18N("form.label.saving.product.minbalforwithdrawal")}}</td>
						<td>
						<input id="minimumBalanceForWithdrawal" name="minimumBalanceForWithdrawal" title="" style="width: 125px;" value="{{=$ctx.decimal(100, currencyData.decimalPlaces)}}" />
						<input id="currencyCode" title="" type="text" value="{{=currencyData.code}}" style="width: 40px;" disabled="disabled" />	
						</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.tenure")}}</td>
							<td>
								<input id="tenure" name="tenure" title="" type="text" value="{{=$ctx.number(tenure)}}" style="width: 50px;"/>
								<select name="tenureType" id="tenureType"  title="">
								{{#each tenureTypeOptions}}
									{{#if $ctx.number($parent.parent.data.tenureType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
									{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
									{{/if}}
								{{/each}}
								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.account.deposit.money.every")}}</td>
							<td>
								<input id="depositEvery" name="depositEvery" title="" type="text" value="{{=$ctx.number(depositEvery)}}" style="width: 50px;" />
								
								<select name="depositfrequency" id="depositfrequency"  title="" style="width: 121px;">
								{{#each savingFrequencyOptions}}
								{{#if $ctx.number($parent.parent.data.savingsFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
					</tr>
					<tr>
						<td>{{=$ctx.doI18N("form.label.deposit.account.isLockinPeriodAllowed")}}</td>
						<td>
							{{#if isLockinPeriodAllowed}}
							<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="isLockinPeriodAllowed" name="isLockinPeriodAllowed" title="" style="width: 125px;" />
							{{/if}}
						</td>
					</tr>
				<tr>
					<td>{{=$ctx.doI18N("form.label.saving.account.ispartialdepositallowed")}}</td>
					<td>
						{{#if isPartialDepositAllowed}}
						<input type="checkbox" id="isPartialDepositAllowed" name="isPartialDepositAllowed" title="" style="width: 125px;" checked=checked />
						{{#else}}
						<input type="checkbox" id="isPartialDepositAllowed" name="isPartialDepositAllowed" title="" style="width: 125px;" />
						{{/if}}
					</td>
				</tr>
					</table>
				</td>

				<!-- interest details cell -->
				<td valign="top" style="padding-left: 5px; padding-right: 5px; border-right: 1px solid;">
					<table>
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.interestCalculationMethod")}}</td>
							<td>-<select name="interestCalculationMethod" id="interestCalculationMethod"  title="">
									{{#each interestCalculationOptions}}
										{{#if $ctx.number($parent.parent.data.interestCalculationMethod.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
										{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
										{{/if}}
        							{{/each}}
  								</select>
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.recurring.interestrate")}}</td>
							<td>
								<input id="recurringInterestRate" name="recurringInterestRate" title="" type="text" value="{{=$ctx.decimal(recurringInterestRate, currencyData.decimalPlaces)}}" style="width: 60px;" />
							   -<select name="interestType" id="interestType"  title="">
									{{#each savingsInterestTypeOptions}}
										{{#if $ctx.number($parent.parent.data.interestType.id)===$ctx.number(id)}}
										<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
										{{#else}}
										<option value="{{=$ctx.number(id)}}">{{=value}}</option>
										{{/if}}
        							{{/each}}
  								</select>	
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.saving.regular.interestrate")}}</td>
							<td>
								<input id="savingInterestRate" name="savingInterestRate" title="" type="text" value="{{=$ctx.decimal(savingInterestRate, currencyData.decimalPlaces)}}" style="width: 60px;" />
							</td>
						</tr>
						<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.interest.compounding.every")}}</td>
							<td>
								<input id="interestPostEvery" name="interestPostEvery" title="" type="text" value="{{=$ctx.number(interestPostEvery)}}" style="width: 50px;" />
								
								<select name="interestPostFrequency" id="interestPostFrequency"  title="" style="width: 121px;">
								{{#each savingFrequencyOptions}}
								{{#if $ctx.number($parent.parent.data.savingsFrequencyType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
					</tr>
					<tr>
							<td>{{=$ctx.doI18N("form.label.deposit.product.lockin.period")}}</td>
							<td>
								<input id="lockinPeriod" name="lockinPeriod" title="" type="text" value="{{=$ctx.number(lockinPeriod)}}" style="width: 50px;" />
								
								<select name="lockinPeriodType" id="lockinPeriodType"  title="" style="width: 121px;">
								{{#each lockinPeriodTypeOptions}}
								{{#if $ctx.number($parent.parent.data.lockinPeriodType.id)===$ctx.number(id)}}
									<option value="{{=$ctx.number(id)}}" selected="selected">{{=value}}</option>
								{{#else}}
									<option value="{{=$ctx.number(id)}}">{{=value}}</option>
								{{/if}}
        						{{/each}}
  								</select>
							</td>
					</tr>

					</table>
				</td>
			</tr>
		</table>
	</fieldset>
</form>
</script>
	<script id="newSavingScheduleTemplate" type="text/x-jquery-tmpl">
	<table id="savingschedule" class="pretty displayschedule">
		<caption>{{=$ctx.doI18N("tab.client.account.saving.schedule.table.caption")}}</caption>
		<thead>
			<tr>
				<th scope="col">#</th>
				<th scope="col">{{=$ctx.doI18N("tab.client.account.saving.schedule.table.column.heading.date")}}</th>
				<th scope="col">Amountperperiod</th>
				<th scope="col">Interest Accured</th>	
				<th scope="col">AmountPaid</th>
			</tr>
		</thead>
		<tbody>
		{{#each periods}}
		<tr>
			<td scope="row">{{=$ctx.number(period)}}</td>
			<td>{{=$ctx.globalDate(dueDate)}}</td>
			<td>{{=$ctx.monetaryValue($parent.parent.data.currency, depositDue)}}</td>
			<td>{{=$ctx.monetaryValue($parent.parent.data.currency, interestAccured)}}</td>
			<td>{{=$ctx.monetaryValue($parent.parent.data.currency, depositPaid)}}</td>
		</tr>
		{{/each}}
		</tbody>
		<tfoot>
			<tr>
				<td scope="row" align="center"><b>Total</b></td>
				<td align="center">#</td>
				<td align="center"><b>{{=$ctx.monetaryValue(currency, cumulativeDepositDue)}}</b></td>
				<td align="center"><b>{{=$ctx.monetaryValue(currency, cummulativeInterestAccured)}}</b></td>
				<td align="center"><b>{{=$ctx.monetaryValue(currency, cumulativeDepositPaid)}}</b></td>
			</tr>
		</tfoot>
	</table>
</script>

	<script id="subscriptionFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.subscription.details")}}</legend>
		<label for="subscription_period">{{=$ctx.doI18N("form.label.subscription.period")}}</label>
		<input id="subscription_period" name="subscriptionPeriod" title="" type="text" value="{{=subscription_period}}" size="20"/>

		<label for="subscription_type">{{=$ctx.doI18N("form.label.subscription.type")}}</label>
	
	<select id="day_name" name="subscriptionType"  title="">
			 <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
            
		{{#each allowedperiods}}
{{#if subscription_type}}
            {{#if $parent.parent.parent.data.subscription_type ===subscription_type}}
				
	<option value="{{=subscription_type}}" selected="selected">{{=subscription_type}}</option>

               
          {{#else}}
                   <option value="{{=subscription_type}}">{{=subscription_type}}</option>
				
 {{/if}}

 {{/if}}
   {{/each}}
</select>
<select id="subscription_type2" name="subscriptionTypeId" style="display:none"  title="">
			 <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		{{#each allowedperiods}}
{{#if day_name}}
  {{#if $ctx.number($parent.parent.parent.data.subscriptiontypeId)===$ctx.number(id)}}
					<option value="{{=day_name}}">{{=day_name}}</option>
 {{#else}}
                   <option value="{{=$ctx.number(id)}}">{{=day_name}}</option>
{{/if}}
{{/if}}
            {{/each}}
</select>
		<br/>
          <label for="units">{{=$ctx.doI18N("Units")}}</label>
       <input id="units" name="units" title="" type="text" value="{{=units}}" size="20"/>
	
	</fieldset>
</form>
</script>

	<script id="subscriptionListTemplate" type="text/x-jquery-tmpl">
<table id='subscriptionstable' width='100%'>
<thead>
	<tr>
		<th>{{=$ctx.doI18N("table.heading.subscription")}}</th>
		<th>{{=$ctx.doI18N("table.heading.subscription.type")}}</th>
		<th>{{=$ctx.doI18N("table.heading.units")}}</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=subscription_period}}</td>
  {{#if subscription_type === -1}}
					
 {{#else}}
	<td>{{=subscription_type}}</td>
{{/if}}
	<td>{{=units}}</td>
	<td>
		<a id='editsubscription{{=id}}' class='editsubscription' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletesubscription{{=id}}' class='deletesubscription' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="serviceFormListTemplate" type="text/x-jquery-tmpl">

 
<table id='servicestable' width='100%'>
 
<button id="newpricebtn{{=planId}}" class="newpricebtn" >Add Price</button>
<thead>
	<tr>
		<th>Id</th>
        <th>plan Code</th>
		<th>Service Code</th>
		<th>Charge Code</th>
		<th>charge Variant</th>
		<th>price</th>
      <th>&nbsp</th>
        
	</tr>
</thead>
<tbody>
{{#each crudRows}}

{{#each serviceData}}
<tr>
<td>{{=id}}</td>
 <td>{{=planCode}}</td>
 <td>{{=serviceCode}}</td>
 <td>{{=chargeCode}}</td>
 <td>{{=chargeVariant}}</td>
 <td>{{=price}}</td>
<td>
<a id='updatePrice{{=id}}' class='updatePrice' href='#' style='margin-right: 5px;' >{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletePrice{{=id}}' class='deletePrice' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
</td>
{{/each}}
</tr>
{{/each}}
</tbody>
</table>
</script>


	<script id="servicemasterFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
 <fieldset>
  <legend>{{=$ctx.doI18N("Add Service")}}</legend>
<table>
     <tr>
        <td align="right">
  <label for="discountcode">{{=$ctx.doI18N("Service Code:")}}</label>
        </td>
      <td>
  <input id="serviceCode" name="serviceCode" title="" type="text" value="{{=serviceCode}}" size="20"/>
<br/>
      </td>
    </tr>
     <tr>
       <td align="right">
        <label for="serviceDescription">{{=$ctx.doI18N("Service Description:")}}</label>
       </td>
         <td>
  <input id="serviceDescription" name="serviceDescription" title="" type="text" value="{{=serviceDescription}}" size="20"/>
<br/>
        </td>
          </tr>
         </tr>
        <td align="right">
              <label for="serviceType">{{=$ctx.doI18N("Service Type:")}}</label>
          </td>
          <td>
          <input id="serviceType" name="serviceType" title="" type="text" value="{{=serviceType}}" size="20"/>
            <br/>
</td>
        </tr>
       
        </table>
 </fieldset>
</form>
</script>

	<script id="planListTemplate" type="text/x-jquery-tmpl">
<table id='planstable' width='100%'>
<button id="newplanbtn{{=id}}" class="newplanbtn" onclick="addPlan(); return false;">Add Plan</button>
<thead>
	<tr>
		<th>Id</th>
		<th>Plan Code</th>
		 <th>Plan Description</th>

        <th>Status</th>

		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=planCode}}</td>
<td>{{=serviceDescription}}</td>
{{#each planstatus}}
      <td>{{=value}}</td>
{{/each}}
	<td>
		<a id='updatePlan{{=id}}' class='updatePlan' href='#' style='margin-right: 5px;'  onclick="updatePlan('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletePlan{{=id}}' class='deletePlan' href='#' style='margin-right: 5px;' onclick="deletePlan('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.delete")}}</a>
		<a id='addPricing{{=id}}' class='addPricing' href='#' style='margin-right: 5px;' onclick="addPricing('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.addprice")}}</a>
	
	</td>
</tr>

{{/each}}
</tbody>
<table>
</script>

	<script id="planFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("dialog.title.plan.details")}}</legend>

<table>
		<tr>
			<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>

		<td align="right"><label for="planCode">{{=$ctx.doI18N("form.label.plan.code")}}</label>

</td>
<td>
	<input id="planCode" name="planCode" title="" type="text" value="{{=planCode}}" size="25"/>

 <td>
</tr>
					<tr>
				<td align="right">
<label for="units">{{=$ctx.doI18N("form.label.plan.description")}}</label>

</td>
<td>
  <input id="planDescription" name="planDescription" title="" type="text" value="{{=planDescription}}" size="25"/>

</td>
<tr><td align="right">
<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		<label for="startDate">{{=$ctx.doI18N("form.label.start.date")}}</label>

</td>
	<td><input id="startDate" name="startDate" title="" type="text" value="{{=$ctx.globalDate(startDate)}}"size="25" class="datepickerfield" />

</td>
</tr>
</table>
</td>
<td valign="top" style="padding-left: 5px; padding-right: 5px;">
<table>
					<tr>
				<td align="right">
<label for="status">{{=$ctx.doI18N("form.label.plan.status")}}</label>

</td>
	<td><select id="status" name="status"  title="" style="width: 145px;">
			 <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		{{#each planStatus}}
             {{#if $ctx.number($parent.parent.data.status)===$ctx.number(id)}}
              
					<option value="{{=id}}" selected="selected">{{=value}}</option>
{{#else}}
     	<option value="{{=id}}">{{=value}}</option>



 {{/if}}
  
    
  {{/each}}	
		</select>

</td></tr>
<tr><td>

<tr><td align="right">
<label for="billRule">{{=$ctx.doI18N("form.label.plan.rule")}}</label>

</td>
	<td><select id="billRule" name="billRule"  title="" style="width: 145px;">
			 <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		{{#each statusType}}
             
  {{#if $ctx.number($parent.parent.data.billRule)===$ctx.number(id)}}

				<option value="{{=id}}" selected="selected">{{=billruleOptions}}</option>
{{#else}}
      <option value="{{=id}}">{{=billruleOptions}}</option>



 {{/if}}
   {{/each}}	
		</select>

</td></tr>

	</tr>
<tr><td align="right">
<label for="endDate">{{=$ctx.doI18N("form.label.end.date")}}</label>

</td>
	<td>	<input id="endDate" name="endDate" title="" type="text" value="{{=$ctx.globalDate(endDate)}}" size="17" class="datepickerfieldnoconstraint" />

</td>
				
</table>
</td>
</tr></table>
    <label for="units">{{=$ctx.doI18N("form.label.plan.service")}}</label></td></tr>

<div class="multiselectwidget">
			<label for="notSelectedServices">{{=$ctx.doI18N("form.label.user.available.services")}}</label>
			<select id="notSelectedServices" name="notSelectedServices" title="Available application services." class="multiselectwidget multiNotSelectedItems" multiple="multiple" style="width:370px;height:125px;">
			{{#each services}}
				<option value="{{=id}}">{{=planCode}}</option>
            {{/each}}
			</select>
			<a href="#" id="addservices" class="multiselectwidget multiadd">{{=$ctx.doI18N("widget.multiselect.button.add")}} &gt;&gt;</a>
		</div>
		
		<div class="multiselectwidget">
			<label for="services">{{=$ctx.doI18N("form.label.user.selected.services")}}</label>
			<select id="services" name="services" title="User selected services." class="multiselectwidget multiSelectedItems" multiple="multiple" style="width:370px;height:125px;">
			{{#each selectedServices}}
				<option value="{{=id}}" selected="selected">{{=serviceCode}}</option>
            {{/each}}
			</select>
			<a href="#" id="removeservices" class="multiselectwidget multiremove">&lt;&lt; {{=$ctx.doI18N("widget.multiselect.button.remove")}}</a>  
		
						
							
						
					</div>
	
	</fieldset>
</form>
</script>


	<script id="priceFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
<legend>{{=$ctx.doI18N("dialog.title.add.price")}}</legend>

<table>
		<tr>
			<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>

<td align="right">	
		<label for="planCode">{{=$ctx.doI18N("form.label.plan.code")}}</label></td>

		<td><input id="planId" name="planCode" title="" type="text" value="{{=planCode}}" readonly  size="22"/></td></tr>


<tr><td align="right"><label for="serviceCode">{{=$ctx.doI18N("form.label.loan.service.code")}}</label></td>
    <td> <select id="serviceCode" name="serviceCode"  title=""  style="width: 180px;>
               <option value="None">None</option>
                  {{#each serviceData}}
        {{#if $ctx.number($parent.parent.data.serviceId)===$ctx.number(id)}}
				<option value="{{=chargeCode}}" selected="selected">{{=serviceCode}}</option>

          {{#else}}
                <option value="{{=chargeCode}}">{{=serviceCode}}</option>
    {{/if}}
                   {{/each}}
  
		</select></td></tr>


	<tr><td align="right">	<label for="chargeCode">{{=$ctx.doI18N("form.label.loan.charge.code")}}</label></td>
 <td><select id="chargeCode" name="chargeCode"  title=""  style="width: 180px;>
			 <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		{{#each chargeData}}

                      {{#if $ctx.number($parent.parent.data.chargeId)===$ctx.number(id)}}
					<option value="{{=chargeCode}}" selected="selected">{{=chargeDescription}}</option>
         {{#else}}
  	<option value="{{=chargeCode}}">{{=chargeDescription}}</option>
{{/if}}

  {{/each}}	
		</select>
		</td></tr>
</table>
</td>
		<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>
<td align="right"><label for="chargevariant">{{=$ctx.doI18N("form.label.loan.charge.variant")}}</label></td>
	<td><select id="chargevariant" name="chargevariant"  title="" style="width: 145px;">
			 <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		
{{#each chargevariant}}
             {{#if $ctx.number(id)===$ctx.number($parent.parent.data.chargeVariantId)}}
					<option value="{{=id}}" selected="selected" >{{=value}}</option>
    
{{#else}}
  	<option value="{{=id}}">{{=value}}</option>
{{/if}}

  {{/each}}	
		</select></td></tr>
<tr><td align="right">
<label for="discountId">{{=$ctx.doI18N("form.label.loan.discount.code")}}</label></td>
	<td><select id="discountId" name="discountId"  title="" style="width: 145px;">
			 <option value="0">{{=$ctx.doI18N("option.subscription.first.none")}}</option>
		
{{#each discountdata}}

                           {{#if $ctx.number($parent.parent.data.discountId)===$ctx.number(id)}}
					<option value="{{=id}}" selected="selected" >{{=discountDescription}}</option>
      
{{#else}}
  	<option value="{{=id}}">{{=discountDescription}}</option>
{{/if}}
	{{/each}}
		</select></td></tr>


      <tr><td align="right">   <label for="price">{{=$ctx.doI18N("form.label.price.amount")}}</label></td>
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
<td><input id="price" name="price" title="" type="text" value="{{=price}}" size="17"/></td></tr>


</table>
</td></tr>
</table>
	</fieldset>
</form>
</script>

	<script id="serviceFormListTemplate" type="text/x-jquery-tmpl">

 
<table id='servicestable' width='100%'>
 
<button id="newpricebtn{{=planId}}" class="newpricebtn" >Add Price</button>
<thead>
	<tr>
		<th>Id</th>
        <th>plan Code</th>
		<th>Service Code</th>
		<th>Charge Code</th>
		<th>charge Variant</th>
		<th>price</th>
      <th>&nbsp</th>
        
	</tr>
</thead>
<tbody>
{{#each crudRows}}

{{#each serviceData}}
<tr>
<td>{{=id}}</td>
 <td>{{=planCode}}</td>
 <td>{{=serviceCode}}</td>
 <td>{{=chargeCode}}</td>
 <td>{{=chargeVariant}}</td>
 <td>{{=price}}</td>
<td>
<a id='updatePrice{{=id}}' class='updatePrice' href='#' style='margin-right: 5px;' >{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletePrice{{=id}}' class='deletePrice' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
</td>
{{/each}}
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="orderFormListTemplate" type="text/x-jquery-tmpl">
<table id='orderstable' width='100%'>
<thead>
	<tr>
		<th>Id</th>
		<th>Plan Code</th>
        <th>Status</th>
      <th>Contract Period</th>
		 <th>Start Date</th>
        <th>End Date</th>
          <th>Price</th>

		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
<td><a id='orderdetails{{=id}}' class='orderdetails' href='#' style='margin-right: 5px;'>{{=id}}</a></td>
	<td>{{=plan_code}}</td>
     <td>{{=status}}</td>
 <td>{{=contractPeriod}}</td>
<td>{{=$ctx.globalDate(startDate)}}</td>
<td>{{=$ctx.globalDate(endDate)}}</td>
	<td>{{=price}}</td>
	<td>

{{#if flag}}
 
          <a id="editorderprice{{=id}}"  class='editorderprice' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("Edit Price")}}</a>
		  <a id="deleteorder{{=id}}"  class='deleteorder' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("Delete")}}</a>

{{else}}

 {{#if status === cancelledStatus }}
         {{=$ctx.doI18N("Edit Price")}}
		{{=$ctx.doI18N("Cancel")}}
{{else }}

 <a id="editorderprice{{=id}}"  class='editorderprice' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("Edit Price")}}</a>
		  <a id="cancelorder{{=id}}"  class='deleteclientidentifier' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("Cancel")}}</a>
	{{/if}}
{{/if}}
	</td>
</tr>
{{/each}}

</tbody>
</table>
</script>

	<script id="orderFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.order.details")}}</legend>

<table>
		<tr>
			<td valign="top" style="padding-right: 15px; width:100px">
				<table>
					<tr>
<td>


<label for="subscription_period">{{=$ctx.doI18N("form.label.plan.name")}}</label>

{{#each plandata}}
<table border="1" width="300">
<tr>
<td>
<table>

    
<td>
<input type="radio" id="planCode" name="planCode" value="{{=id}}" onClick="setBillingFrequency('{{=id}}')"/></td><td>{{=planCode}}({{#each availableServices}} {{=chargeCode}}{{/each}})</td>


<td>

<br/>
</table>
</td>
</tr>
</table>

</body>

{{/each}}

</td>
<div id="orderdetails">
</tr>
</table>
</td>
<td valign="top" style="padding-left: 5px; padding-right: 5px;">
<table>
					<tr>
						<td align="right">

		<label for="start_date">{{=$ctx.doI18N("form.label.start.date")}}</label></td>
<td>	<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<input id="start_date" name="start_date" title="" type="text" value="{{=$ctx.globalDate(startDate)}}"  style="width: 145px;" class="datepickerfield" />
</td></tr><br/>
<tr>
	<td align="right"><label for="contractPeriod">{{=$ctx.doI18N("form.label.plan.subscription")}}</label></td>
	<td><select id="contractPeriod" name="contractPeriod"  title="" style="width: 145px;">
			
		
	{{#each subscriptiondata}}
      {{#if $ctx.number($parent.parent.data.period)===$ctx.number(id)}}

					<option value="{{=id}}">{{=Contractdata}}</option>
{{#else}}
          <option value="{{=id}}">{{=Contractdata}}</option>

{{/if}}
       
   {{/each}}	
		</select>

	

</td></td></tr><br/>



<td>
</div>

      </td>
</tr>

<tr>	<td align="right">
<label for="paytermCode">{{=$ctx.doI18N("form.label.billing.frequency")}}</label></td>
<td>
<div id="frequencyDiv" name="frequencyDiv">
<select id="paytermCode" name="paytermCode"  title=""  style="width: 145px;" >
			
		{{#each paytermdata}}
					<option value="{{=paytermtype}}">{{=paytermtype}}</option>
            {{/each}}

</div>

</td></tr>

<tr>
	<td align="right">

<label for="anyDayAllowed">{{=$ctx.doI18N("form.label.plan.billing")}}</label></td>


		<td align="left">			
						{{#if billingcycle}}
						<input type="checkbox" id="anyDayAllowed" name="billAlign" title="" style="width: 25px;" checked=checked />
							{{#else}}
							<input type="checkbox" id="anyDayAllowed" name="billAlign" title="" style="width: 25px;" />
							{{/if}}
</td></tr>


</table>
	



				
					

	</fieldset>
</form>
</script>


	<script id="paymentFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	<input type="hidden" id="clientId" name="clientId" value="{{=clientId}}" />
	<fieldset>
		<legend>{{=$ctx.doI18N("form.legend.new.payment")}}</legend>
	
			<table>
				<tr>
	
	<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
			<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		  <td align="right"> <label for="payment_date">{{=$ctx.doI18N("form.label.payment.date")}}</label></td>
		<td>	<input id="paymentDate" name="paymentDate" title="" type="text" value="{{=$ctx.globalDate(startDate)}}" size="20" class="datepickerfieldnoconstraint" />
</td></tr>

<tr>	  <td align="right"> 	<label for="paymentCode">{{=$ctx.doI18N("form.label.payment.type")}}</label></td>
						<td> <select id="paymentCode" name="paymentCode" title="" style="width: 150px;>
                        
						 <option value="1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
 {{#each paymodeDatas}}
								<option value="{{=paymodeCode}}">{{=paymodeDescription}}</option>
{{/each}}
				      
					</select></td></tr><br/>
<tr></tr>
		<tr>	  <td align="right"> 		<label for="amountPaid">{{=$ctx.doI18N("form.label.amount")}}</label></td>
				<td>			<input id="amountPaid" name="amountPaid" title="" type="text" value="{{=amountPaid}}" size="18" /> </td></tr>

			<tr>	    <td align="right" valign="top">			<label for="remarks">{{=$ctx.doI18N("form.label.payment.notes")}}</label></td>
	<td>  <textarea rows="3" cols="50" id="note" name="remarks" cssClass="text ui-widget-content ui-corner-all">{{=remarks}}</textarea> </td></tr>
			</table></br>
	
	</fieldset>
	</form>
</script>

	<script id="addadjustmentFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
	<legend>{{=$ctx.doI18N("Add Adjustment")}}</legend>
<table>
       
        <tr>
        <td align="right">

<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
			<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
         <label for="adjustment_date">{{=$ctx.doI18N("Adjustment Date:")}}</label>
 	    </td>
        <td>
	<input id="adjustment_date" name="adjustment_date" title="" type="text" value="{{=$ctx.globalDate(adjustment_date)}}" size="20" class="datepickerfieldnoconstraint" />
         </td>
          </tr>   
                 <tr>
               <td align="right"> 
                       <label for="adjustment_code">{{=$ctx.doI18N("adjustment Code:")}}</label>  
                  </td>
                   <td>
					<select id="adjustment_code" name="adjustment_code" title="">
						{{#each data}}
								<option value="{{=id}}">{{=adjustment_type}}</option>
				        {{/each}}
					</select>  
       </td>
       </tr>
        
        <tr>
        <td align="right">
        <label for="amount_paid">{{=$ctx.doI18N("Adjustment Amount:")}}</label>
        </td>
         <td>
		<input id="amount_paid" name="amount_paid" title="" type="text" value="{{=$ctx.decimal(amount_paid, 2)}}" size="9"/>    
        
              <select id="adjustment_type" name="adjustment_type" title="">
						{{#each datass}}
                               {{#each discountOptions}}
								<option value="{{=discountType}}">{{=discountType}}</option>
				        {{/each}}
                           {{/each}}
				     
          </td>
       </tr>
       
       <tr>
        <td>
       	<tr>	 <td align="right" valign="top">		
       <label for="remarks">{{=$ctx.doI18N("form.label.payment.notes")}}</label></td>
	<td>  <textarea rows="3" cols="40" id="note" name="Remarks" cssClass="text ui-widget-content ui-corner-all">{{=Remarks}}</textarea>
         </td>
        </tr>
</table>
       
	</fieldset>
</form>
</script>

	<script id="invoiceFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
 <fieldset>
<table>
 <tr>
   <td align="right">

<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
 <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
  <label for="startDate">{{=$ctx.doI18N("form.label.process.date")}}</label></td>
<td>
<input id="systemDate" name="systemDate" title="" type="text" value="{{=$ctx.globalDate(systemDate)}}" size="20" class="datepickerfieldnoconstraint" />
   </td>
 <tr>
</table>
  

</fieldset>
</form>
</script>

	<script id="billStatmentFormListTemplate" type="text/x-jquery-tmpl">
<table id='billstable' width='100%'>
<thead>
	<tr>
		
		<th>id</th>
        <th>Bill Date</th>
		 <th>Due Date</th>
        <th>Amount</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
    
<td>{{=$ctx.globalDate(billDate)}}</td>
<td>{{=$ctx.globalDate(dueDate)}}</td>
	<td>{{=amount}}</td>
	<td>
      
  <a id="printpdf{{=id}}"  class='printpdf' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("Download Pdf")}}</a>
         
	
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="billStatementFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>

<table>
        <tr>
      <td align="right">

<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
			<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
         <label for="adjustment_date">{{=$ctx.doI18N("Due Date:")}}</label>
 	    </td>
        <td>
        <input id="adjustment_date" name="dueDate" title="" type="text"  value="{{=dueDate}}" class="datepickerfieldnoconstraint" />
         </td>
          </tr>   
                
        
        <tr>
      <td align="right" valign="top">		
        <label for="message">{{=$ctx.doI18N("Promotional Message:")}}</label>
        </td>
         <td>
         <textarea rows="3" cols="45" id="note" name="message" cssClass="text ui-widget-content ui-corner-all">{{=message}}</textarea>
         
          </td>
       </tr>
</table>
       
	</fieldset>
</form>
</script>


	<script id="transactionFormListTemplate" type="text/x-jquery-tmpl">
<table id='financialTransactionstable' width='100%'>
<thead>
	<tr>
		
		<th>Transaction Id</th>
        <th>Transaction Date</th>
		 <th>Transaction Type</th>
        <th>Amount</th>
		
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
 {{#if transactionType === transaction}}
<td> <a id='invoicedetails{{=transactionId}}' class='invoicedetails' href='#' style='margin-right: 5px;'>{{=transactionId}}</a></td>
{{#else}}
	<td>{{=transactionId}}</td>
{{/if}}
<td>{{=$ctx.globalDate(transDate)}}</td>
<td>{{=transactionType}}</td>
<td>{{=amount}}</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="servicemasterListTemplate" type="text/x-jquery-tmpl">
<table id='servicemasterstable' width='100%'>
<button id="newservicebtn{{=id}}" class=newservicebtn" onclick="addService(); return false;">Add Service</button>
<thead>
	<tr>
		<th>Id</th>
		<th>Service Code</th>
		 <th>Service Description</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=serviceCode}}</td>
<td>{{=serviceDescription}}</td>

	<td>
		<a id='updateservice{{=id}}' class='updatePlan' href='#' style='margin-right: 5px;'  onclick="updateService('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteservice{{=id}}' class='deletePlan' href='#' style='margin-right: 5px;' onclick="deleteService('{{=id}}'); return false;">{{=$ctx.doI18N("link.action.delete")}}</a>
	
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="allBillingFreqsDropdownTemplate" type="text/x-jquery-tmpl">

<form id="entityform">
 <div id="formerrors"></div>

<select id="paytermCode" name="paytermCode"  title=""  style="width: 145px;" >
			
		{{#each paytermdata}}
					<option value="{{=paytermtype}}">{{=paytermtype}}</option>
            {{/each}}

</form>

</script>

	<script id="ticketmasterFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("dialog.title.add.ticket")}}</legend>

<table>
		<tr>
			<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>
                     <td align="right">

		<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
	   <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		<label for="ticketDate">{{=$ctx.doI18N("form.label.ticket.date")}}</label>

               </td>
               <td>
		         <input id="startDate" name="ticketDate" title="" type="text" value="{{=$ctx.globalDate(ticketDate)}}" size="20" class="datepickerfieldnoconstraint" />

             </td>
       </tr>
	   <tr>
		     <td align="right">

               <label for="problemCode">{{=$ctx.doI18N("form.label.ticket.category")}}</label>
           </td>
           <td>
              <select id="problemCode" name="problemCode"  title="" style="width: 160px;">
			 <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		{{#each problemsDatas}}
                 {{#if $ctx.number($parent.parent.data.status)===$ctx.number(id)}}
              
					<option value="{{=problemCode}}" selected="selected">{{=problemDescription}}</option>
          {{#else}}
     	<option value="{{=problemCode}}">{{=problemDescription}}</option>
               {{/if}}
        {{/each}}	
		</select>
          </td>
   <tr>
         <td>
         </td>
  </tr>
   <tr>
         <td>

        </td>
	  <td>

     </td>
</tr>
</table>
</td>
<td valign="top" style="padding-left: 5px; padding-right: 5px;">
<table>
					<tr>
				     <td align="right">
<label for="priority">{{=$ctx.doI18N("form.label.ticket.priority")}}</label>

</td>
	<td><select id="priority" name="priority"  title="">
			 <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		{{#each priorityType}}
					<option value="{{=value}}" selected="value">{{=value}}</option>
           {{/each}}	
		</select>

</td></tr>
<tr><td>

<tr>     <td align="right">

<label for="priority">{{=$ctx.doI18N("form.label.ticket.assignedto")}}</label>
</td>
	<td>
             
  <select id="assignedTo" name="assignedTo"  title="">
			 <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		{{#each usersData}}
              
					<option value="{{=id}}" selected="value">{{=userName}}</option>
    
           {{/each}}	
		</select>

</td></tr>

	
				
</table>
</td>
</tr></table>
<table>
   <tr>
      <td>
   
<tr>
        <td align="right" valign="top">		
 <label for="description">{{=$ctx.doI18N("form.label.ticket.Description")}}</label>  </td>
   <td><textarea rows="3" cols="53" id="note" name="description" cssClass="text ui-widget-content ui-corner-all">{{=description }}</textarea>
    </td>
</tr>
</table>
	
	</fieldset>
</form>
</script>

	<script id="ticketFormListTemplate" type="text/x-jquery-tmpl">
<table id='ticketstable' width='100%'>
<thead>
	<tr>
		
		<th>Id</th>
       <th>Priority</th>
        <th>Ticket Date</th>
         <th>problem Code</th> 
		        <th>Status</th>
          <th>Assigned TO</th>
        <th>Last Comment</th>
<th>&nbsp</th>

	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td><a id='historyticket{{=id}}' class='historyticket' href='#' style='margin-right: 5px;' >{{=id}}</a></td>
<td>{{=priority}}</td>
 <td>{{=$ctx.globalDate(ticketDate)}}</td>
<td>{{=problemDescription}}</td>
<td>{{=status}}</td>
<td>{{=userName}}</td>
<td>{{=lastComment}}</td>

<td>    
   {{#if status === closedStatus}}
		{{=$ctx.doI18N("link.action.edit")}}
		{{=$ctx.doI18N("link.action.close")}}
	{{#else}}
		<a id='editticket{{=id}}' class='editticket' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.edit")}}</a>
		<a id='closeticket{{=id}}' class='closeticket' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.close")}}</a>
    {{/if}}
	
	</td>
</tr>
{{/each}}
</tbody>

<tfoot>
<tr>
<th><input type=text size="10" name=Id     class=search_init /></th>
<th><input type=text  name=ticketDate    class=search_init /></th>
<th><input type=text name=priority  class=search_init /></th>
<th><input type=text  name=Status    class=search_init /></th>
<th><input type=text  name=assignedTO    class=search_init /></th>
<th><input type=text  name=Status    class=search_init /></th>
<th><input type=text  name=assignedTO    class=search_init /></th>
 	<th>&nbsp;</th>
</tr>
</tfoot>
</table>
</script>

	<script id="ticketDetailFormTemplate" type="text/x-jquery-tmpl">

<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
	
<td valign="top" style="padding-right: 15px;">
	<table>
		<tr>
          <td>
   <label for="problemCode">{{=$ctx.doI18N("form.label.ticket.status")}}</label>
           </td>
           <td>
      	     <select id="status" name="status"  title="">
					{{#each statusType}}
      					<option value="{{=statusDescription}}" selected="selected">{{=statusDescription}}</option>
                    {{/each}}	
		         </select>
            </td>
        </tr>
   </table>
</td>
<td valign="top" style="padding-left: 140px; padding-right: 1px;">
   <table>
     <tr>
       <td>
      <label for="assignedTo">{{=$ctx.doI18N("form.label.ticket.assignedto")}}</label>
       </td>
	   <td>
         <select id="assignedTo" name="assignedTo"  title="">
				{{#each usersData}}
                {{#if $ctx.number($parent.parent.data.userId)===$ctx.number(id)}}
					<option value="{{=userName}}" selected="selected">{{=userName}}</option>
                {{#else}}
	             <option value="{{=userName}}">{{=userName}}</option>
                  {{/if}}
                 {{/each}}	
		  </select>
  

</td></tr>

	
				
</table>
</td>
			</tr>	
</table>
<table>
		<tr>
			<td>
				<label for="comments">{{=$ctx.doI18N("label.comments")}}</label>
				<textarea cols="70" rows="5" id="description" name="comments">{{=comments}}</textarea></td>
			
		<tr>
		<tr>
			<td colspan="2" valign="top">
				<label for="file">{{=$ctx.doI18N("label.upload.attachments")}}</label>
				<input type="file" name="file" id="file" size="73"></input>
			</td>
		</tr>


	</table>
 </form>

</script>

	<script id="paymodeFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>

	
	<fieldset>
	<legend>{{=$ctx.doI18N("dialog.title.add.paymode")}}</legend>
				<table>
					<tr>
                     <td align="right">

	
		<label for="paymode">{{=$ctx.doI18N("form.label.paymode.code")}}</label></td>
	<td>	<input id="paymode" name="paymode" title="" type="text" value="{{=paymodeCode}}" size="20"/></td></tr>
<tr>
 <td align="right">
 <label for="units">{{=$ctx.doI18N("form.label.paymode.description")}}</label></td>
       <td><input id="description" name="description" title="" type="text" value="{{=paymodeDescription}}" size="20"/></td>

</tr>
</table>
			
         
	
	</fieldset>
</form>
</script>

	<script id="paymodeFormListTemplate" type="text/x-jquery-tmpl">
<table id='paymodestable' width='100%'>
<button id="newservicebtn{{=id}}" class=newservicebtn" onclick="addNewPaymode(); return false;">Add Paymode</button>
<thead>
	<tr>
		<th>Id</th>
		<th>Paymode Code</th>
		 <th>Paymode Description</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td>{{=id}}</td>
	<td>{{=paymodeCode}}</td>
<td>{{=paymodeDescription}}</td>

	<td>
<a id='updatepaymode{{=id}}' class='updatepaymode' href='#' style='margin-right: 5px;' >{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deletepaymode{{=id}}' class='deletepaymode' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	
	</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="ticketclosedFormTemplate" type="text/x-jquery-tmpl">

<form id="entityform" >
    <div id="formerrors"></div>
	<table>
		<tr>
           <td align="right">
   <label for="problemCode">{{=$ctx.doI18N("form.label.ticket.status")}}</label>
           </td>
           <td>
      	     <select id="status" name="status"  title="">
					{{#each statusType}}
      					<option value="{{=statusDescription}}" selected="selected">{{=statusDescription}}</option>
                    {{/each}}	
		         </select>
            </td>
        </tr>
       <tr>
      <td align="right">
    	<label for="resolutionDescription">{{=$ctx.doI18N("label.resolutionDescription")}}</label>
       </td>
	   <td>
      	<textarea cols="65" rows="5" id="resolutionDescription" name="resolutionDescription">{{=comments}}</textarea></td>
</td></tr>

</table>
 </form>

</script>

	<script id="invoceDetailsFormTemplate" type="text/x-jquery-tmpl">
<table id='orderpricetable' width='100%'>
<thead>
	<tr>
		<th>Charge Type</th>
		<th>Charge Description</th>
        <th>Charge Start Date</th>
        <th>Charge End Date</th>
		<th>Charge Amount</th>
        <th>Tax Amount</th>
         
		</tr>              
</thead>
<tbody>
{{#each transactionsDatas}}
<tr>
	<td>{{=chargeType}}</td>
	<td>{{=chargeDescription}}</td>
    <td>{{=$ctx.globalDate(chargeStartDate)}}</td>
    <td>{{=$ctx.globalDate(chargeEndDate)}}</td>
    <td>{{=chargeAmount}}</td>
    <td>{{=taxAmount}}</td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="tickethistoryFormTemplate" type="text/x-jquery-tmpl">


<table id='tickethistorytable' width='100%'>
<tr>
<b>Problem Description:</b><br/>
</tr>
<tr>
    {{=problemDescription}}<br/><br/>
<fieldset>
<legend></legend>
</fieldset>
</tr>
{{#each masterData}}
     <tr>
        <td>
        <b>Created Date:</b>
 	   
{{=$ctx.globalDate(createdDate)}}
	     
         </td>
         <td>
         <b> Assign To:</b>
               
				{{=assignedTo}}
       </td>


        <td>
     <b>Attachments:</b>     
	 <a id='attachedlink{{=id}}' class='attachedlink' href='#' style='margin-right: 5px;'  onclick="attachedlink('{{=id}}'); return false;">{{=attachedFile}}</a>
         </td>
       </tr>
      	<tr>			
       </tr>
 <tr>
	<td> <b>Comments:</b><br/>  {{=statusDescription}}
         </td>
        </tr>
 <tr>
        </tr>
{{/each}}

</table>
</script>

	<script id="orderPriceFormListTemplate" type="text/x-jquery-tmpl">
<table id='orderpricetable' width='100%'>
<thead>
	<tr>
	  <th><b>Id</b></th>
        <th><b>Service</b></th>
		 <th><b>Charge Code</b></th>
        <th><b>Duration Type</b></th>
          <th><b>Price</b></th>

		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>

{{#each orderPriceData}}
<tr>
	<td>{{=id}}</td>
	 <td> {{=chargeCode}}</td>
<td>{{=chargeType}}</td>
<td>{{=durationType}}</td>
<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
	<td>

<input id="price{{=id}}" name="price" title="" type="text" value="{{=price}}" size="10"/></td>
	<td><a id='updateprice' class='updateprice' href='#' style='margin-right: 5px;"color: #CC0000" ' onClick="updatePrice({{=id}},{{=clientId}})">{{=$ctx.doI18N("link.action.editprice")}}</a></td>
</tr>
{{/each}}
</tbody>
</table>
</script>

	<script id="orderDetailsFormListTemplate" type="text/x-jquery-tmpl">
<table id='orderpricetable' width='100%'>
<thead>
	<tr>
		
	   <th><b>Id</b></th>
       <th><b>Service</b></th>
	   <th><b>Charge Code</b></th>
       <th><b>Bill StartDate</b></th>
       <th><b>Bill EndDate</b></th>
       <th><b>Invoice TillDate</b></th>
        <th><b>Billing Cycle</b></th>  
       <th><b>Price</b></th>
			
	</tr>
</thead>
<tbody>

{{#each orderPriceData}}
<tr>
	<td>{{=id}}</td>
	 <td> {{=chargeCode}}</td>
<td>{{=chargeType}}</td>
<td>{{=$ctx.globalDate(billStartDate)}}</td>
<td>{{=$ctx.globalDate(billEndDate)}}</td>
<td>{{=$ctx.globalDate(invoiceTillDate)}}</td>
<td>{{=billingCycle}}</td>
<td>{{=price}}</td>
</tr>
{{/each}}

</tbody>
</table>
</script>

	<script id="ticketsListTemplate1" type="text/x-jquery-tmpl">
<table id='ticketslisttable' width='100%'>
<thead>
	<tr>
		<th>TicketId</th>
		<th>Priority</th>
		<th>Status</th>
		<th>Created on</th>
		<th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
{{#if status==="Opened"}}
<tr>
	<td> {{=id}} </td>
	<td> {{=priority}} </td>
	<td> {{=status}} </td>
	<td>{{=$ctx.globalDate(ticketDate)}}</td>
	<td>
		<a id='viewticket{{=id}}' href='#' style='margin-right: 5px;' onclick="showILClient({{=clientId}}); return false;">{{=$ctx.doI18N("link.action.view")}}</a>
	</td>
</tr>
{{/if}}
{{/each}}
</tbody>
</table>
</script>
	<script id="addressListTemplate" type="text/x-jquery-tmpl">

<table id='ticketslisttable' width='100%'>



<thead>
	<tr>
		<th>Address No</th>
		<th>Street</th>
		<th>City</th>
		<th>State</th>
		<th>Country</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
{{#each datas}}
<tr>
	<td> {{=addressNo}} </td>
	<td> {{=street}} </td>
	<td> {{=city}} </td>
	<td>{{=state}}</td>
<td>{{=country}}</td>
	
</tr>
{{/each}}
{{/each}}
</tbody>
</table>
</script>
	<script id="addressFormTemplate" type="text/x-jquery-tmpl">

<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
		<legend>{{=$ctx.doI18N("dialog.title.add.address")}}</legend>

<table>
		<tr>
			<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>
                     <td align="right">

		<label for="priority">{{=$ctx.doI18N("form.label.Address1")}}</label>
		

               </td>
              
		     <td>

 {{#if datas}}
 {{#each datas}}
           <input id="addressKey" name="addressKey" title="" type="text" value="{{=addressKey}}" size="33" />
	{{/each}}
          {{#else}}		
			 <input id="addressKey" name="addressKey" title="" type="text" value="{{=addressKey}}" size="33" />
	{{/if}}

</td></tr>
			
		

            
      
	   <tr>
		     <td align="right">

              <label for="priority">{{=$ctx.doI18N("form.label.Address2")}}</label>
           </td>
       
           <td>
 {{#if datas}}
 {{#each datas}}
           <input id="addressNo" name="addressNo" title="" type="text" value="{{=street}}" size="33" />
	{{/each}}
          {{#else}}		
			 <input id="addressNo" name="addressNo" title="" type="text" value="{{=street}}" size="33" />
	{{/if}}
</td></tr>
         
   <tr>
       <td align="right">
   <label for="city">{{=$ctx.doI18N("form.label.city")}}</label>
         </td>
  <td>
         {{#if datas}}
 {{#each datas}}
           <input id="city" name="city" title="" type="text" value="{{=city}}" />
	{{/each}}
          {{#else}}		
			 <input id="city" name="city" title="" type="text" value="{{=city}}" />
	{{/if}}
</td></tr>
			 <tr>
     <td align="right">
          <label for="state">{{=$ctx.doI18N("form.label.state")}}</label>
         </td>
   <td>
        
         {{#if datas}}
 {{#each datas}}
          <input id="state" name="state" title="" type="text" value="{{=state}}" />
{{/each}}
          {{#else}}
    <input id="state" name="state" title="" type="text" value="{{=state}}" />
	{{/if}}

       
  
	
</td>
			 <tr>
      <td align="right">
 <label for="country">{{=$ctx.doI18N("form.label.country")}}</label>

         </td> <td>
         {{#if datas}}
 {{#each datas}}
           <input id="country" name="country" title="" type="text" value="{{=country}}" />
{{/each}}
          {{#else}}
    <input id="country" name="country" title="" type="text" value="{{=country}}" />
	{{/if}}

</td></tr>
			
			 <tr>
        <td align="right">
   <label for="priority">{{=$ctx.doI18N("form.label.zip")}}</label>
         </td>

            <td>
{{#if datas}}
 {{#each datas}}
           <input id="zip" name="zip" title="" type="text" value="{{=zip}}" size="33"/>
	{{/each}}
          {{#else}}		
			 <input id="zip" name="zip" title="" type="text" value="{{=zip}}" size="33" />
	{{/if}}

</td></tr>
        
  
  
</table>



	
	</fieldset>
</form>


</script>


<script id="inventoryItemListTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
<button id="newinventoryadditem" class="newinventoryadditem ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" role="button" aria-disabled="false">
<span class="ui-button-icon-primary ui-icon ui-icon-plusthick">
</span>
<span class="ui-button-text">
	Add Item & Grn
</span>
</button>

<table id='inventorylisttable' width='100%'>

<thead>
	<tr>
		<th>Id</th>
		<th>ItemMasterId</th>
		<th>SerialNo</th>
		<th>GrnId</th>
		<th>ProvisioningSerialNo</th>
       <th>Quality</th>
       <th>Status</th>
	   <th>Warranty</th>
	   <th>Remarks</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td> {{=id}} </td>
	<td> {{=itemMasterId}} </td>
	<td> {{=serialNumber}} </td>
	<td> {{=grnId}} </td>
	<td> {{=provisioningSerialNumber}} </td>
	<td> {{=quality}} </td>
	<td> {{=status}} </td>
	<td> {{=warranty}} </td>
	<td> {{=remarks}} </td>
</tr>

{{/each}}
</tbody>
</table>
</form>
</script>

<script id="oneTimeSaleListTemplate" type="text/x-jquery-tmpl">

<table id='onetimelisttable' width='100%'>

<button id="newadditem" class="newadditem" >Add </button>

<thead>
	<tr>
		<th>Id</th>
		<th>Sale Date</th>
		<th>Item Code</th>
		<th>Charge Code</th>
		<th>Quantity</th>
       <th>Total Price</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td> {{=id}} </td>
    <td>{{=$ctx.globalDate(saleDate)}}</td>
	<td> {{=itemCode}} </td>
	<td>{{=chargeCode}}</td>
    <td> {{=quantity}} </td>
<td>{{=totalPrice}}</td>
	
</tr>

{{/each}}
</tbody>
</table>
</script>

<script id="oneTimeSaleFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
	
    <div id="formerrors"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.add.item")}}</legend>

<table>
		<tr>
			<td valign="top" style="padding-right: 15px;">
				<table>
                <tr>
               <td align="right">

		<input type="hidden" id="dateFormat" name="dateFormat" value="dd MMMM yyyy" />
	   <input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
		<label for="saleDate">{{=$ctx.doI18N("form.label.Sale.date")}}</label>

               </td>
               <td>
		         <input id="saleDate" name="saleDate" title="" type="text" value="{{=$ctx.globalDate(saleDate)}}" size="22" class="datepickerfieldnoconstraint" />

             </td> 
</tr>            

					<tr>
    	               	<td align="right">
                         <label for="itemCode">{{=$ctx.doI18N("form.label.item.code")}}</label>
                        </td>
                        <td>
	                    <select id="itemId" name="itemId"  title="" style="width: 180px;">
			            <option value="">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		             {{#each itemDatas}}
                        {{#if $ctx.number($parent.parent.data.id)===$ctx.number(id)}}
			                	<option value="{{=id}}" selected="selected">{{=itemCode}}</option>
                        {{#else}}
                            <option value="{{=id}}">{{=itemCode}}</option>
                       {{/if}}
                     {{/each}}	
		             </select>

                    <td>
                </tr>
				<tr>
     				<td align="right">
                     <label for="quantity">{{=$ctx.doI18N("form.label.item.quantity")}}</label>
                  </td>
                 <td>
              <input id="quantity" name="quantity" title="" type="text" value="{{=quantity}}" size="22"/>
              </td>
           </tr>
</table>
  </td>
       <td valign="top" style="padding-left: 5px; padding-right: 5px;">
               <table>
					<tr>
				     <td align="right">
                     <label for="chargeCode">{{=$ctx.doI18N("form.label.item.chargecode")}}</label>

                    </td>
                 	<td> 
                  <input id="chargeCode" name="chargeCode" title="" type="text" value="{{=itemCode}}" size="22"/>
               </td>
               </tr>
               <tr>
                 <td align="right">
                  <label for="totalprice">{{=$ctx.doI18N("form.label.item.totalprice")}}</label>
               </td>
              <td>
               <input id="totalprice" name="totalPrice" title="" type="text" value="{{=totalPrice}}" size="22"/>
	         </td>
           </tr>
 <tr>
                 <td align="right">
                  <label for="unitPrice">{{=$ctx.doI18N("form.label.item.unitprice")}}</label>
               </td>
              <td>
             <input id="unitprice" name="unitPrice" title="" type="text" value="{{=unitPrice}}" size="22"/>
	         </td>
           </tr>
	</table>
</td>
</tr>
</table>
</fieldset>
</form>

</script>

<script id="inventoryItemFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
	
    <div id="formerrors" style="color:red"></div>
	  <fieldset>
		 <legend>{{=$ctx.doI18N("dialog.title.view.inventoryitem")}}</legend>

<table>
	<tr>
		<td valign="top" style="padding-right: 15px;">
			<table>
					
				<tr>
				<td align="right">
					<label for="id">{{=$ctx.doI18N("form.label.item.id")}}</label>
				</td>
				<td>
					<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
					<input type="number" id="id" name="id" title=""  value="{{=id}}" size="22"/>
				</td>
				</tr>
                <tr>
               	<td align="right">
					<label for="purchaseDate">{{=$ctx.doI18N("form.label.item.purchasedate")}}</label>
               	</td>
               	<td>
		        	<input type="text" id="purchaseDate" name="purchaseDate" title="" type="text" value="{{=$ctx.globalDate(purchaseDate)}}" size="22"/>
             	</td> 
				</tr>
				<tr>
				<td align="right">
					<label for="supplierId">{{=$ctx.doI18N("form.label.item.supplierid")}}</label>
				</td>
				<td>
					<input type="number" id="supplierId" name="supplierId"  title="" value="{{=supplierId}}" size="22"/>
				</td>
				</tr>            
			</table>
 		</td>
       	<td valign="top" style="padding-left: 5px; padding-right: 5px;">
        	<table>
				<tr>
				<td align="right">
					<label for="itemMasterId">{{=$ctx.doI18N("form.label.item.itemmasterid")}}</label>
				</td>
				<td>
					<input type="number" id="itemMasterId" name="itemMasterId" value="{{=itemMasterId}}" size="22"/>
				</td>
				</tr>
				<tr>
				<td align="right">
					<label id="orderdQuantity">{{=$ctx.doI18N("form.label.item.orderdquantity")}}</label>
				</td>
				<td>
					<input type="number" id="orderdQuantity" name="orderdQuantity" value="{{=orderdQuantity}}" size="22" required/>
				</td>
				</tr>
				<tr>
					<td align="right">
						<label for="receivedQuantity">{{=$ctx.doI18N("form.label.item.receivedquantity")}}</label>	
					</td>
					<td>
						<input type="number" id="receivedQuantity" name="receivedQuantity" title=""  value="{{=receivedQuantity}}" size="22" required/>
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>
</fieldset>
<fieldset>
	<legend>{{=$ctx.doI18N("dialog.title.add.inventoryitem")}}</legend>
<table>
	<tr>
		<td valign="top" style="padding-right: 15px;">
			<table>
				<tr>
					<td align="right">
						<label for="itemMasterId">{{=$ctx.doI18N("form.label.item.itemmasterid")}}</label>		
					</td>
					<td>
						<input type="number" id="itemMasterId" name="itemMasterId" title="" value="{{=itemMasterId}}" size="22" disabled="disabled"/>
					</td>
				</tr>
				<tr>
					<td align="right">
						<label for="serialNumber">{{=$ctx.doI18N("form.label.item.serialnumber")}}</label>
					</td>
					<td>
						<input type="text" id="serialNumber" name="serialNumber" title="" value="{{=serialNumber}}" size="22"/>
					</td>	
				</tr>
				<tr>
					<td align="right">
						<label for="grnId">{{=$ctx.doI18N("form.label.item.grnid")}}</label>
					</td>
					<td>
						<input type="number" id="grnId" name="grnId" title="" value="{{=id}}" size="22" disabled="disabled"/>
					</td>
				</tr>
				<tr>
					<td align="right">
						<label for="provisioningSerialNumber">{{=$ctx.doI18N("form.label.item.provisioningserialnumber")}}</label>
					</td>
					<td>
						<input type="text" id="provisioningSerialNumber" name="provisioningSerialNumber" title="" value="{{=provisioningSerialNumber}}" size="22"/>
					</td>
				</tr>

				</table>
			</td>
			<td>
				<table>	
					<tr>
						<td align="right">
							<label for="quality">{{=$ctx.doI18N("form.label.item.quality")}}</label>	
						</td>
						<td>
							<select id="quality" name="quality"  title="" style="width: 180px;">
							<option>Good</option>
							<option>Defective</option>
						</select>	
						</td>
					</tr>

					<tr>
						<td align="right">
							<label for="status">{{=$ctx.doI18N("form.label.item.status")}}</label>
						</td>
						<td>
							<select id="status" name="status" title="" style="width: 180px;">
								<option>New</option>
								<option>Used</option>
							</select>
						</td>
					</tr>
						<tr>
						<td align="right">
							<label for="warranty">{{=$ctx.doI18N("form.label.item.inventory.warranty")}}</label>
						</td>
						<td>
							<input type="number" id="warranty" name="warranty" title="" value="{{=warranty}}" size="22"/>	
						</td>
					</tr>	
					<tr>
						<td align="right">
							<label for="remarks">{{=$ctx.doI18N("form.label.item.remarks")}}</label>
						</td>
						<td>
							<input type="text" id="remarks" name="remarks" title="" vlaue="{{=remarks}}" size="22"/>
						</td>
					</tr>
				</table>	
			</td>			
		</tr>
	</table>
</fieldset>
<fieldset><p style="color:red" id="itemMasterError"></p></fieldset>
</form>

</script>

<script id="itemListTemplate" type="text/x-jquery-tmpl">

<table id='itemstable' width='100%'>

<button id="newadditem" class="newadditem"  onClick="addItem()" >Add </button>

<thead>
	<tr>
		<th>Id</th>
		<th>Item COde</th>
		<th>Item Description</th>
		<th>Units</th>
		<th>Unit Price</th>
       <th>Warranty</th>
       <th>&nbsp;</th>
	</tr>
</thead>
<tbody>
{{#each crudRows}}
<tr>
	<td> {{=id}} </td>
  	<td> {{=itemCode}} </td>
	<td>{{=itemDescription}}</td>
    <td>{{=units}}</td>
   <td> {{=unitPrice}} </td>
  <td>{{=warranty}}</td>

<td>
		<a id='edititem{{=id}}' class='edititem' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.viewedit")}}</a>
		<a id='deleteitem{{=id}}' class='deleteitem' href='#' style='margin-right: 5px;'>{{=$ctx.doI18N("link.action.delete")}}</a>
	</td>

</tr>

{{/each}}
</tbody>
</table>
</script>

<script id="itemFormTemplate" type="text/x-jquery-tmpl">
<form id="entityform">
    <div id="formerrors"></div>
	<fieldset>
<legend>{{=$ctx.doI18N("dialog.title.add.item")}}</legend>

<table>
		<tr>
			<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>

<td align="right">	
		<label for="itemCode">{{=$ctx.doI18N("form.label.item.code")}}</label></td>

		<td><input id="itemCode" name="itemCode" title="" type="text" value="{{=itemCode}}"   size="22"/></td></tr>


<tr><td align="right"><label for="itemDescription">{{=$ctx.doI18N("form.label.loan.item.desc")}}</label></td>
    <td><input id="itemDescription" name="itemDescription" title="" type="text" value="{{=itemDescription}}"   size="22"/></td></tr>


	<tr><td align="right">	<label for="chargeCode">{{=$ctx.doI18N("form.label.loan.charge.code")}}</label></td>
 <td><select id="chargeCode" name="chargeCode"  title=""  style="width: 180px;>
			 <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		{{#each chargesData}}

                      {{#if $parent.parent.data.chargeCode===chargeCode}}
					<option value="{{=chargeCode}}" selected="selected">{{=chargeDescription}}</option>
         {{#else}}
  	<option value="{{=chargeCode}}">{{=chargeDescription}}</option>
{{/if}}

  {{/each}}	
		</select>
		</td></tr>
			<tr>

<td align="right">	
		<label for="warranty">{{=$ctx.doI18N("form.label.item.warranty")}}</label></td>

		<td><input id="warranty" name="warranty" title="" type="text" value="{{=warranty}}"   size="22"/></td></tr>
</table>
</td>
		<td valign="top" style="padding-right: 15px;">
				<table>
					<tr>
<td align="right"><label for="itemClass">{{=$ctx.doI18N("form.label.item.class")}}</label></td>
	<td><select id="itemClass" name="itemClass"  title="" style="width: 145px;">
			 <option value="-1">{{=$ctx.doI18N("option.subscription.first.choice")}}</option>
		
{{#each itemClassData}}
             {{#if value === $parent.parent.data.itemClass}}
					<option value="{{=value}}" selected="selected" >{{=value}}</option>
    
{{#else}}
  	<option value="{{=value}}">{{=value}}</option>
{{/if}}

  {{/each}}	
		</select></td></tr>
<tr><td align="right">
<label for="units">{{=$ctx.doI18N("form.label.item.units")}}</label></td>
	<td><select id="units" name="units"  title="" style="width: 145px;">
			 <option value="0">{{=$ctx.doI18N("option.subscription.first.none")}}</option>
		
{{#each unitData}}

                           {{#if value === $parent.parent.data.units }}
					<option value="{{=value}}" selected="selected" >{{=value}}</option>
      
{{#else}}
  	<option value="{{=value}}">{{=value}}</option>
{{/if}}
	{{/each}}
		</select></td></tr>


      <tr><td align="right">   <label for="unitPrice">{{=$ctx.doI18N("form.label.item.price")}}</label></td>
	<input type="hidden" id="locale" name="locale" value="{{=$ctx.currentLocale()}}" />
<td><input id="unitPrice" name="unitPrice" title="" type="text" value="{{=unitPrice}}" size="17"/></td></tr>


</table>
</td></tr>
</table>
	</fieldset>
</form>
</script>

<div id="question" style="display:none; cursor: default"> 
        <h1>Would you like to contine?.</h1> 
        <input type="button" id="yes" value="Yes" /> 
        <input type="button" id="no" value="No" /> 
</div>

</body>
</html>